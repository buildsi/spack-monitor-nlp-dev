{
    "body": "While building the spfft, I received the following error message. \r\n\r\n\r\n---\r\n\r\n### Steps to reproduce the issue\r\n\r\n```console\r\n$ spack install spfft \r\n==> Installing spfft\r\n==> Searching for binary cache of spfft\r\n==> No binary for spfft found: installing from source\r\n==> Fetching https://github.com/eth-cscs/SpFFT/archive/v0.9.8.zip\r\n  -#O=-#   #    #                                                                          \r\n==> Staging archive: /tmp/junmian/spack-stage/spack-stage-spfft-0.9.8-ce6uhekrj4fsikj4ymzoo76rvbps6ux7/v0.9.8.zip\r\n==> Created stage in /tmp/junmian/spack-stage/spack-stage-spfft-0.9.8-ce6uhekrj4fsikj4ymzoo76rvbps6ux7\r\n==> No patches needed for spfft\r\n==> Building spfft [CMakePackage]\r\n==> Executing phase: 'cmake'\r\n==> Executing phase: 'build'\r\n==> Error: ProcessError: Command exited with status 2:\r\n    'make' '-j8'\r\n\r\n11 errors found in build log:\r\n     54    [ 64%] Building CXX object src/CMakeFiles/spfft.dir/spfft/grid.cpp.o\r\n     55    cd /tmp/junmian/spack-stage/spack-stage-spfft-0.9.8-ce6uhekrj4fsikj4ymzoo76rvbps\r\n           6ux7/spack-build/src && /home/junmian/Applications/spack/lib/spack/env/gcc/g++  \r\n           -Dspfft_EXPORTS -I/tmp/junmian/spack-stage/spack-stage-spfft-0.9.8-ce6uhekrj4fsi\r\n           kj4ymzoo76rvbps6ux7/spack-src/ext -I/tmp/junmian/spack-stage/spack-stage-spfft-0\r\n           .9.8-ce6uhekrj4fsikj4ymzoo76rvbps6ux7/spack-src/include -I/tmp/junmian/spack-sta\r\n           ge/spack-stage-spfft-0.9.8-ce6uhekrj4fsikj4ymzoo76rvbps6ux7/spack-src/src -I/tmp\r\n           /junmian/spack-stage/spack-stage-spfft-0.9.8-ce6uhekrj4fsikj4ymzoo76rvbps6ux7/sp\r\n           ack-build -isystem /home/junmian/Applications/openmpi/openmpi-4.0.2-cuda/include\r\n             -O3 -DNDEBUG -fPIC -fvisibility=hidden -fvisibility-inlines-hidden   -pthread \r\n           -fopenmp -std=gnu++11 -o CMakeFiles/spfft.dir/spfft/grid.cpp.o -c /tmp/junmian/s\r\n           pack-stage/spack-stage-spfft-0.9.8-ce6uhekrj4fsikj4ymzoo76rvbps6ux7/spack-src/sr\r\n           c/spfft/grid.cpp\r\n     56    [ 71%] Building CXX object src/CMakeFiles/spfft.dir/spfft/grid_internal.cpp.o\r\n     57    cd /tmp/junmian/spack-stage/spack-stage-spfft-0.9.8-ce6uhekrj4fsikj4ymzoo76rvbps\r\n           6ux7/spack-build/src && /home/junmian/Applications/spack/lib/spack/env/gcc/g++  \r\n           -Dspfft_EXPORTS -I/tmp/junmian/spack-stage/spack-stage-spfft-0.9.8-ce6uhekrj4fsi\r\n           kj4ymzoo76rvbps6ux7/spack-src/ext -I/tmp/junmian/spack-stage/spack-stage-spfft-0\r\n           .9.8-ce6uhekrj4fsikj4ymzoo76rvbps6ux7/spack-src/include -I/tmp/junmian/spack-sta\r\n           ge/spack-stage-spfft-0.9.8-ce6uhekrj4fsikj4ymzoo76rvbps6ux7/spack-src/src -I/tmp\r\n           /junmian/spack-stage/spack-stage-spfft-0.9.8-ce6uhekrj4fsikj4ymzoo76rvbps6ux7/sp\r\n           ack-build -isystem /home/junmian/Applications/openmpi/openmpi-4.0.2-cuda/include\r\n             -O3 -DNDEBUG -fPIC -fvisibility=hidden -fvisibility-inlines-hidden   -pthread \r\n           -fopenmp -std=gnu++11 -o CMakeFiles/spfft.dir/spfft/grid_internal.cpp.o -c /tmp/\r\n           junmian/spack-stage/spack-stage-spfft-0.9.8-ce6uhekrj4fsikj4ymzoo76rvbps6ux7/spa\r\n           ck-src/src/spfft/grid_internal.cpp\r\n     58    /tmp/junmian/spack-stage/spack-stage-spfft-0.9.8-ce6uhekrj4fsikj4ymzoo76rvbps6ux\r\n           7/spack-src/src/execution/execution_host.cpp: In instantiation of 'spfft::Execut\r\n           ionHost<T>::ExecutionHost(int, std::shared_ptr<spfft::Parameters>, spfft::HostAr\r\n           ray<std::complex<_Tp> >&, spfft::HostArray<std::complex<_Tp> >&) [with T = doubl\r\n           e]':\r\n     59    /tmp/junmian/spack-stage/spack-stage-spfft-0.9.8-ce6uhekrj4fsikj4ymzoo76rvbps6ux\r\n           7/spack-src/src/execution/execution_host.cpp:360:16:   required from here\r\n  >> 60    /tmp/junmian/spack-stage/spack-stage-spfft-0.9.8-ce6uhekrj4fsikj4ymzoo76rvbps6ux\r\n           7/spack-src/src/execution/execution_host.cpp:55:87: error: array must be initial\r\n           ized with a brace-enclosed initializer\r\n     61               1.0 / static_cast<double>(param->dim_x() * param->dim_y() * param->di\r\n           m_z()))) {\r\n     62                                                                                    \r\n    ... \r\n  >> 81    /tmp/junmian/spack-stage/spack-stage-spfft-0.9.8-ce6uhekrj4fsikj4ymzoo76rvbps6ux\r\n           7/spack-src/src/memory/host_array_view.hpp:99:3: error: array must be initialize\r\n           d with a brace-enclosed initializer\r\n     82       HostArrayView2D() = default;\r\n     83       ^\r\n  >> 84    /tmp/junmian/spack-stage/spack-stage-spfft-0.9.8-ce6uhekrj4fsikj4ymzoo76rvbps6ux\r\n           7/spack-src/src/memory/host_array_view.hpp:99:3: error: too many initializers fo\r\n           r 'std::array<long long unsigned int, 2ul>'\r\n     85    /tmp/junmian/spack-stage/spack-stage-spfft-0.9.8-ce6uhekrj4fsikj4ymzoo76rvbps6ux\r\n           7/spack-src/src/execution/execution_host.cpp:55:87: note: synthesized method 'sp\r\n           fft::HostArrayView2D<T>::HostArrayView2D() [with T = std::complex<double>]' firs\r\n           t required here\r\n     86               1.0 / static_cast<double>(param->dim_x() * param->dim_y() * param->di\r\n           m_z()))) {\r\n     87                                                                                    \r\n                  ^\r\n     88    src/CMakeFiles/spfft.dir/build.make:117: recipe for target 'src/CMakeFiles/spfft\r\n           .dir/execution/execution_host.cpp.o' failed\r\n  >> 89    make[2]: *** [src/CMakeFiles/spfft.dir/execution/execution_host.cpp.o] Error 1\r\n     90    make[2]: *** Waiting for unfinished jobs....\r\n     91    make[2]: Leaving directory '/tmp/junmian/spack-stage/spack-stage-spfft-0.9.8-ce6\r\n           uhekrj4fsikj4ymzoo76rvbps6ux7/spack-build'\r\n     92    CMakeFiles/Makefile2:96: recipe for target 'src/CMakeFiles/spfft.dir/all' failed\r\n  >> 93    make[1]: *** [src/CMakeFiles/spfft.dir/all] Error 2\r\n     94    make[1]: Leaving directory '/tmp/junmian/spack-stage/spack-stage-spfft-0.9.8-ce6\r\n           uhekrj4fsikj4ymzoo76rvbps6ux7/spack-build'\r\n     95    Makefile:132: recipe for target 'all' failed\r\n  >> 96    make: *** [all] Error 2`\r\n\r\nSee build log for details:\r\n  /tmp/junmian/spack-stage/spack-stage-spfft-0.9.8-ce6uhekrj4fsikj4ymzoo76rvbps6ux7/spack-build-out.txt\r\n```\r\n\r\n### Platform and user environment\r\n\r\nPlease report your OS here: \r\n```commandline\r\n$ uname -a \r\nLinux computer 4.15.0-74-generic #83~16.04.1-Ubuntu SMP Wed Dec 18 04:56:23 UTC 2019 x86_64 x86_64 x86_64 GNU/Linux\r\n\r\n$ lsb_release -d\r\nDescription:\tUbuntu 16.04 LTS\r\n``` \r\n### Additional Information\r\nThe package was compiled by gcc@5.4.0, and I tried to install several different versions, including spfft 9.9, 9.8. All produce the same error message. \r\n",
    "user": "zhujunmian",
    "url": "https://api.github.com/repos/spack/spack/issues/14563",
    "updated_at": "2020-01-26 07:11:54",
    "created_at": "2020-01-20 04:49:43",
    "closed_at": "2020-01-26 07:11:54",
    "state": "closed",
    "title": "Installation issue: spfft ",
    "number": 14563,
    "milestone": null,
    "labels": [
        "build-error"
    ],
    "id": 552064528,
    "html_url": "https://github.com/spack/spack/issues/14563",
    "assignees": [
        "scheibelp"
    ],
    "comments": 2
}