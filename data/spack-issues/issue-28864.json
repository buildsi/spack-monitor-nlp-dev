{
    "body": "### Summary\n\nIt would be super nice if you could add the feature to generate and submit the Test.xml file generated by the ctest -T Test option.  With a little hackery I was able to do so, but it should would be nice to do it automatically and internally.  \n\n### Rationale\n\nThis would allow the cdash capability of spack to be a bit more complete and make dashboard supporting of spack builds and tests complete.  And could also open the door to other CDash capabilities such as coverage and memory analysis ( valgrind )\n\n### Description\n\n1) By default, ctest -T Test is called for all CMakePackages instead of make test, as part of the default 'check' method\r\n2) Somehow you make the headers consistent across all CTest xml files. Not sure how this would be handled within spack.\n\n### Additional information\n\nOverview of existent hackery to do so outside of spack:\r\n```\r\nexport TMPDIR=/tmp\r\n spack  \\\r\n    install -j36 \\\r\n    --test root \\\r\n    --keep-stage \\\r\n    --log-format cdash \\\r\n    --log-file CDASH_REPORTS \\\r\n    --cdash-upload-url http://ourcdash-site/ \\\r\n    --cdash-track Nightly \\\r\n    ourpackage%gcc@8.3.0\r\n\r\n# A little hackery to fix up the generated Test.xml file and resubmit\r\n  testfile=`find $TMPDIR -name \"Test.xml\" -print | head -n 1`\r\n  if [ -f \"$testfile\" ] ; then\r\n    mv $testfile CDASH_REPORTS\r\n    echo \"Found Testfile: $testfile\"\r\n    pushd CDASH_REPORTS\r\n# Sometimes the configure.xml is named differently\r\n    configure_file=\"ourpackage_Configure.xml\"\r\n    if [ -f $configure_file ] ; then\r\n      mv $configure_file Configure.xml\r\n    else\r\n      echo \"Could not find $configure_file\"\r\n    fi\r\n# Clean up xmls and make correlate header sections\r\n    ../jenkins/python_testing/fixxml.py .\r\n\r\n # Resbumit all files with correlated XML files\r\n    ../jenkins/python_testing/curl_submit.py --srcdir . \\\r\n                                            --dropsite ourcdash \\\r\n                                            --dropmethod http \\\r\n                                            --cdashproject ourproject\r\n```\n\n### General information\n\n- [X] I have run `spack --version` and reported the version of Spack\n- [X] I have searched the issues of this repo and believe this is not a duplicate",
    "user": "azukaitis",
    "url": "https://api.github.com/repos/spack/spack/issues/28864",
    "updated_at": "2022-02-10 13:54:11",
    "created_at": "2022-02-10 13:54:11",
    "closed_at": "None",
    "state": "open",
    "title": "Full CTest Dashboard support",
    "number": 28864,
    "milestone": null,
    "labels": [
        "feature"
    ],
    "id": 1130119934,
    "html_url": "https://github.com/spack/spack/issues/28864",
    "assignees": [],
    "comments": 0
}