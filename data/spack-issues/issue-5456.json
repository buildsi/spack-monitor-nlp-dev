{
    "body": "happens with\r\n```\r\npackages:\r\n  all:\r\n    compiler: [clang, gcc]\r\n    providers:\r\n      mpi: [openmpi]\r\n      blas: [openblas]\r\n      lapack: [openblas]\r\n      scalapack: [netlib-scalapack]\r\n   intel-mkl:\r\n     version: [2018.0.128]\r\n     paths:\r\n        intel-mkl@2018.0.128 threads=none: /opt/intel/\r\n     buildable: False\r\n```\r\nand `spack spec dealii`. If i just comment `intel-mkl` in the config, `openblas` is chosen as expected.",
    "user": "davydden",
    "url": "https://api.github.com/repos/spack/spack/issues/5456",
    "updated_at": "2018-09-25 17:12:24",
    "created_at": "2017-09-23 08:15:43",
    "closed_at": "None",
    "state": "open",
    "title": "Adding external intel-mkl makes Spack pick it up ignoring the preferences",
    "number": 5456,
    "milestone": null,
    "labels": [
        "bug",
        "configuration",
        "concretization",
        "external-packages"
    ],
    "id": 259992236,
    "html_url": "https://github.com/spack/spack/issues/5456",
    "assignees": [],
    "comments": 3
}