{
    "body": "The latest spack version of git-lfs crashes on newer darwin systems (until recently I've been using the Homebrew version so I don't know what versions are compatible) but I've added 2.13.3 (the latest Homebrew version) and 3.1.2 works on my machine as well. I also added the latest bug/security patch version from Go.\r\n\r\n<details><summary>git-lfs crash log</summary>\r\n```console\r\n$ git-lfs --version\r\nfatal error: unexpected signal during runtime execution\r\n[signal SIGSEGV: segmentation violation code=0x1 addr=0xb01dfacedebac1e pc=0x7fff20425c9e]\r\n\r\nruntime stack:\r\nruntime: unexpected return pc for runtime.sigpanic called from 0x7fff20425c9e\r\nstack: frame={sp:0x7ffeefbfdb48, fp:0x7ffeefbfdb98} stack=[0x7ffeefb7ebe8,0x7ffeefbfdc50)\r\n0x00007ffeefbfda48:  0x01007ffeefbfda68  0x0000000000000004\r\n0x00007ffeefbfda58:  0x000000000000001f  0x00007fff20425c9e\r\n0x00007ffeefbfda68:  0x0b01dfacedebac1e  0x0000000000000001\r\n0x00007ffeefbfda78:  0x0000000004037611 <runtime.throw+0x0000000000000071>  0x00007ffeefbfdb18\r\n0x00007ffeefbfda88:  0x0000000004576351  0x00007ffeefbfdad0\r\n0x00007ffeefbfda98:  0x00000000040378c8 <runtime.fatalthrow.func1+0x0000000000000048>  0x00000000049b2100\r\n0x00007ffeefbfdaa8:  0x0000000000000001  0x0000000000000001\r\n0x00007ffeefbfdab8:  0x00007ffeefbfdb18  0x0000000004037611 <runtime.throw+0x0000000000000071>\r\n0x00007ffeefbfdac8:  0x00000000049b2100  0x00007ffeefbfdb08\r\n0x00007ffeefbfdad8:  0x0000000004037850 <runtime.fatalthrow+0x0000000000000050>  0x00007ffeefbfdae8\r\n0x00007ffeefbfdae8:  0x0000000004037880 <runtime.fatalthrow.func1+0x0000000000000000>  0x00000000049b2100\r\n0x00007ffeefbfdaf8:  0x0000000004037611 <runtime.throw+0x0000000000000071>  0x00007ffeefbfdb18\r\n0x00007ffeefbfdb08:  0x00007ffeefbfdb38  0x0000000004037611 <runtime.throw+0x0000000000000071>\r\n0x00007ffeefbfdb18:  0x00007ffeefbfdb20  0x0000000004037640 <runtime.throw.func1+0x0000000000000000>\r\n0x00007ffeefbfdb28:  0x000000000457ed0a  0x000000000000002a\r\n0x00007ffeefbfdb38:  0x00007ffeefbfdb88  0x000000000404cfd6 <runtime.sigpanic+0x0000000000000396>\r\n0x00007ffeefbfdb48: <0x000000000457ed0a  0x000000000401ce85 <runtime.(*fixalloc).alloc+0x0000000000000085>\r\n0x00007ffeefbfdb58:  0x00007ffeefbfdbc8  0x000000000402a646 <runtime.(*mheap).allocSpan+0x0000000000000546>\r\n0x00007ffeefbfdb68:  0x000000c000142000  0x0000000000002000\r\n0x00007ffeefbfdb78:  0x000000c000000008  0x0000000000000000\r\n0x00007ffeefbfdb88:  0x00007ffeefbfdbd0 !0x00007fff20425c9e\r\n0x00007ffeefbfdb98: >0x00007ffeefbfdbd0  0x0000000004934000\r\n0x00007ffeefbfdba8:  0x000000000000018f  0x000000000415e645 <golang.org/x/sys/unix.libc___sysctl_trampoline+0x0000000000000005>\r\n0x00007ffeefbfdbb8:  0x0000000004069cac <runtime.syscall6+0x000000000000002c>  0x000000c000125808\r\n0x00007ffeefbfdbc8:  0x00007ffeefbfdc10  0x000000c0001257d8\r\n0x00007ffeefbfdbd8:  0x00000000040679f0 <runtime.asmcgocall+0x0000000000000070>  0x0000000000000001\r\n0x00007ffeefbfdbe8:  0x000000c000114400  0x44000000045af738\r\n0x00007ffeefbfdbf8:  0x0000000000000010  0x00000000044d8440\r\n0x00007ffeefbfdc08:  0x0000000000000850  0x000000c0000001a0\r\n0x00007ffeefbfdc18:  0x0000000004065b09 <runtime.systemstack+0x0000000000000049>  0x0000000000000004\r\n0x00007ffeefbfdc28:  0x00000000046292d8  0x00000000049b2100\r\n0x00007ffeefbfdc38:  0x00007ffeefbfdc88  0x0000000004065a05 <runtime.mstart+0x0000000000000005>\r\n0x00007ffeefbfdc48:  0x00000000040659bd <runtime.rt0_go+0x000000000000013d>\r\nruntime.throw({0x457ed0a, 0x401ce85})\r\n\tgo/src/runtime/panic.go:1198 +0x71\r\nruntime: unexpected return pc for runtime.sigpanic called from 0x7fff20425c9e\r\nstack: frame={sp:0x7ffeefbfdb48, fp:0x7ffeefbfdb98} stack=[0x7ffeefb7ebe8,0x7ffeefbfdc50)\r\n0x00007ffeefbfda48:  0x01007ffeefbfda68  0x0000000000000004\r\n0x00007ffeefbfda58:  0x000000000000001f  0x00007fff20425c9e\r\n0x00007ffeefbfda68:  0x0b01dfacedebac1e  0x0000000000000001\r\n0x00007ffeefbfda78:  0x0000000004037611 <runtime.throw+0x0000000000000071>  0x00007ffeefbfdb18\r\n0x00007ffeefbfda88:  0x0000000004576351  0x00007ffeefbfdad0\r\n0x00007ffeefbfda98:  0x00000000040378c8 <runtime.fatalthrow.func1+0x0000000000000048>  0x00000000049b2100\r\n0x00007ffeefbfdaa8:  0x0000000000000001  0x0000000000000001\r\n0x00007ffeefbfdab8:  0x00007ffeefbfdb18  0x0000000004037611 <runtime.throw+0x0000000000000071>\r\n0x00007ffeefbfdac8:  0x00000000049b2100  0x00007ffeefbfdb08\r\n0x00007ffeefbfdad8:  0x0000000004037850 <runtime.fatalthrow+0x0000000000000050>  0x00007ffeefbfdae8\r\n0x00007ffeefbfdae8:  0x0000000004037880 <runtime.fatalthrow.func1+0x0000000000000000>  0x00000000049b2100\r\n0x00007ffeefbfdaf8:  0x0000000004037611 <runtime.throw+0x0000000000000071>  0x00007ffeefbfdb18\r\n0x00007ffeefbfdb08:  0x00007ffeefbfdb38  0x0000000004037611 <runtime.throw+0x0000000000000071>\r\n0x00007ffeefbfdb18:  0x00007ffeefbfdb20  0x0000000004037640 <runtime.throw.func1+0x0000000000000000>\r\n0x00007ffeefbfdb28:  0x000000000457ed0a  0x000000000000002a\r\n0x00007ffeefbfdb38:  0x00007ffeefbfdb88  0x000000000404cfd6 <runtime.sigpanic+0x0000000000000396>\r\n0x00007ffeefbfdb48: <0x000000000457ed0a  0x000000000401ce85 <runtime.(*fixalloc).alloc+0x0000000000000085>\r\n0x00007ffeefbfdb58:  0x00007ffeefbfdbc8  0x000000000402a646 <runtime.(*mheap).allocSpan+0x0000000000000546>\r\n0x00007ffeefbfdb68:  0x000000c000142000  0x0000000000002000\r\n0x00007ffeefbfdb78:  0x000000c000000008  0x0000000000000000\r\n0x00007ffeefbfdb88:  0x00007ffeefbfdbd0 !0x00007fff20425c9e\r\n0x00007ffeefbfdb98: >0x00007ffeefbfdbd0  0x0000000004934000\r\n0x00007ffeefbfdba8:  0x000000000000018f  0x000000000415e645 <golang.org/x/sys/unix.libc___sysctl_trampoline+0x0000000000000005>\r\n0x00007ffeefbfdbb8:  0x0000000004069cac <runtime.syscall6+0x000000000000002c>  0x000000c000125808\r\n0x00007ffeefbfdbc8:  0x00007ffeefbfdc10  0x000000c0001257d8\r\n0x00007ffeefbfdbd8:  0x00000000040679f0 <runtime.asmcgocall+0x0000000000000070>  0x0000000000000001\r\n0x00007ffeefbfdbe8:  0x000000c000114400  0x44000000045af738\r\n0x00007ffeefbfdbf8:  0x0000000000000010  0x00000000044d8440\r\n0x00007ffeefbfdc08:  0x0000000000000850  0x000000c0000001a0\r\n0x00007ffeefbfdc18:  0x0000000004065b09 <runtime.systemstack+0x0000000000000049>  0x0000000000000004\r\n0x00007ffeefbfdc28:  0x00000000046292d8  0x00000000049b2100\r\n0x00007ffeefbfdc38:  0x00007ffeefbfdc88  0x0000000004065a05 <runtime.mstart+0x0000000000000005>\r\n0x00007ffeefbfdc48:  0x00000000040659bd <runtime.rt0_go+0x000000000000013d>\r\nruntime.sigpanic()\r\n\tgo/src/runtime/signal_unix.go:719 +0x396\r\n\r\ngoroutine 1 [syscall, locked to thread]:\r\nsyscall.syscall6(0x415e640, 0xc000125910, 0x2, 0xc000034340, 0xc000125908, 0xc000030250, 0xe)\r\n\tgo/src/runtime/sys_darwin.go:44 +0x3b fp=0xc000125808 sp=0xc0001257e8 pc=0x406473b\r\nsyscall.syscall6(0xe, 0x1, 0xc000030250, 0xc0001258c0, 0x415dc08, 0x456b1ba, 0xe)\r\n\t<autogenerated>:1 +0x35 fp=0xc000125868 sp=0xc000125808 pc=0x406a455\r\ngolang.org/x/sys/unix.sysctl({0xc000125910, 0x4011054, 0x412486d}, 0xa0, 0x2, 0xc00007a510, 0x100000100000007)\r\n\t/Users/Shared/ornldev/spack/opt/spack/apple-clang-13.0.0/git-lfs/wlahb2e/pkg/mod/golang.org/x/sys@v0.0.0-20190412213103-97732733099d/unix/zsyscall_darwin_amd64.go:314 +0x6d fp=0xc0001258d0 sp=0xc000125868 pc=0x415e28d\r\ngolang.org/x/sys/unix.nametomib({0x456b1ba, 0x0})\r\n\t/Users/Shared/ornldev/spack/opt/spack/apple-clang-13.0.0/git-lfs/wlahb2e/pkg/mod/golang.org/x/sys@v0.0.0-20190412213103-97732733099d/unix/syscall_darwin.go:74 +0x92 fp=0xc000125938 sp=0xc0001258d0 pc=0x415e072\r\ngolang.org/x/sys/unix.sysctlmib({0x456b1ba, 0x0}, {0x0, 0x0, 0x1})\r\n\t/Users/Shared/ornldev/spack/opt/spack/apple-clang-13.0.0/git-lfs/wlahb2e/pkg/mod/golang.org/x/sys@v0.0.0-20190412213103-97732733099d/unix/syscall_bsd.go:427 +0x2f fp=0xc0001259a0 sp=0xc000125938 pc=0x415dc6f\r\ngolang.org/x/sys/unix.SysctlRaw({0x456b1ba, 0xc00007e1b0}, {0x0, 0x1, 0xc000077a60})\r\n\t/Users/Shared/ornldev/spack/opt/spack/apple-clang-13.0.0/git-lfs/wlahb2e/pkg/mod/golang.org/x/sys@v0.0.0-20190412213103-97732733099d/unix/syscall_bsd.go:496 +0x2a fp=0xc000125a18 sp=0xc0001259a0 pc=0x415de6a\r\ngolang.org/x/sys/unix.SysctlArgs({0x456b1ba, 0xc000077a01}, {0x0, 0x4011ee5, 0xc000125a90})\r\n\t/Users/Shared/ornldev/spack/opt/spack/apple-clang-13.0.0/git-lfs/wlahb2e/pkg/mod/golang.org/x/sys@v0.0.0-20190412213103-97732733099d/unix/syscall_bsd.go:444 +0x27 fp=0xc000125a50 sp=0xc000125a18 pc=0x415dd87\r\ngolang.org/x/sys/unix.Sysctl(...)\r\n\t/Users/Shared/ornldev/spack/opt/spack/apple-clang-13.0.0/git-lfs/wlahb2e/pkg/mod/golang.org/x/sys@v0.0.0-20190412213103-97732733099d/unix/syscall_bsd.go:440\r\ngithub.com/git-lfs/git-lfs/tools.checkCloneFileSupported()\r\n\t/private/var/folders/fy/x2xtwh1n7fn0_0q2kk29xkv9vvmbqb/T/s3j/spack-stage/spack-stage-git-lfs-2.11.0-wlahb2e4shpp4hocdk3qopsyfxims5lb/spack-src/tools/util_darwin.go:41 +0x30 fp=0xc000125a90 sp=0xc000125a50 pc=0x41630d0\r\ngithub.com/git-lfs/git-lfs/tools.init.0()\r\n\t/private/var/folders/fy/x2xtwh1n7fn0_0q2kk29xkv9vvmbqb/T/s3j/spack-stage/spack-stage-git-lfs-2.11.0-wlahb2e4shpp4hocdk3qopsyfxims5lb/spack-src/tools/util_darwin.go:28 +0x17 fp=0xc000125aa0 sp=0xc000125a90 pc=0x4163077\r\nruntime.doInit(0x493e400)\r\n\tgo/src/runtime/proc.go:6498 +0x123 fp=0xc000125bd8 sp=0xc000125aa0 pc=0x4046da3\r\nruntime.doInit(0x493e500)\r\n\tgo/src/runtime/proc.go:6475 +0x71 fp=0xc000125d10 sp=0xc000125bd8 pc=0x4046cf1\r\nruntime.doInit(0x4943e40)\r\n\tgo/src/runtime/proc.go:6475 +0x71 fp=0xc000125e48 sp=0xc000125d10 pc=0x4046cf1\r\nruntime.doInit(0x49394c0)\r\n\tgo/src/runtime/proc.go:6475 +0x71 fp=0xc000125f80 sp=0xc000125e48 pc=0x4046cf1\r\nruntime.main()\r\n\tgo/src/runtime/proc.go:238 +0x1e6 fp=0xc000125fe0 sp=0xc000125f80 pc=0x4039c66\r\nruntime.goexit()\r\n\tgo/src/runtime/asm_amd64.s:1581 +0x1 fp=0xc000125fe8 sp=0xc000125fe0 pc=0x4067ce1\r\n```\r\n</details>",
    "user": "sethrj",
    "url": "https://api.github.com/repos/spack/spack/issues/29121",
    "updated_at": "2022-03-08 18:11:45",
    "created_at": "2022-02-22 11:14:04",
    "closed_at": "2022-03-08 18:06:58",
    "state": "closed",
    "title": "git-lfs and go: add new versions",
    "number": 29121,
    "milestone": null,
    "labels": [],
    "id": 1146776621,
    "html_url": "https://github.com/spack/spack/pull/29121",
    "assignees": [],
    "comments": 2
}