{
    "body": "When trying to use py-torch -1.6.0 built with CUDA 11 I see the following error:\r\n```console\r\npython -c 'import torch'\r\nTraceback (most recent call last):\r\n  File \"<string>\", line 1, in <module>\r\n  File \"/opt/packages/gpjohnsn/spack/opt/spack/linux-centos7-skylake_avx512/gcc-9.3.0/py-torch-1.6.0-vw3qfqc6okp7suoc4ifgkdgqab5pvh56/lib/python3.8/site-packages/torch/__init__.py\", line 189, in <module>\r\n    from torch._C import *\r\nImportError: /lib64/libstdc++.so.6: version `GLIBCXX_3.4.22' not found (required by /opt/packages/gpjohnsn/spack/opt/spack/linux-centos7-skylake_avx512/gcc-9.3.0/py-torch-1.6.0-vw3qfqc6okp7suoc4ifgkdgqab5pvh56/lib/python3.8/site-packages/torch/lib/libtorch_python.so)\r\n```\r\nThis works fine when using `CUDA-10.2.89` and `7.6.5.32-10.2-linux-x64`\r\n\r\n### Steps to reproduce the issue\r\n\r\n```console\r\n$ spack install py-torch cuda_arch=35,75 ^cudnn@8.0.2.39-11.0-linux-x64\r\n...\r\n```\r\n\r\n### Information on your system\r\n\r\n```console\r\n$ spack debug report\r\n* **Spack:** 0.11.2-8723-01df552\r\n* **Python:** 3.8.5\r\n* **Platform:** linux-centos7-skylake_avx512\r\n```\r\n```console\r\n$ spack find -vd py-torch\r\n==> 1 installed package\r\n-- linux-centos7-skylake_avx512 / gcc@9.3.0 ---------------------\r\npy-torch@1.6.0~binary~caffe2+cuda+cudnn~distributed~fbgemm~ffmpeg~gloo~leveldb~lmdb~magma~miopen+mkldnn+nccl~nnpack~opencv+openmp~qnnpack~redis~rocm~tbb~test~xnnpack~zstd cuda_arch=35,75\r\n    cuda@11.0.2\r\n        libxml2@2.9.10~python\r\n            libiconv@1.16\r\n            xz@5.2.5~pic\r\n            zlib@1.2.11+optimize+pic+shared\r\n    cudnn@8.0.2.39-11.0-linux-x64\r\n    eigen@3.3.7 build_type=RelWithDebInfo\r\n    nccl@2.7.8-1+cuda cuda_arch=none\r\n        rdma-core@20 build_type=RelWithDebInfo\r\n            libnl@3.3.0\r\n    openblas@0.3.10~consistent_fpcsr~ilp64+pic+shared threads=none\r\n    protobuf@3.12.2+shared build_type=Release\r\n    py-numpy@1.19.2+blas+lapack\r\n        py-setuptools@50.1.0\r\n            python@3.8.5+bz2+ctypes+dbm~debug+libxml2+lzma~nis~optimizations+pic+pyexpat+pythoncmd+readline+shared+sqlite3+ssl~tix~tkinter~ucs4+uuid+zlib patches=0d98e93189bc278fbc37a50ed7f183bd8aaf249a8e1670a465f0db6bb4f8cf87\r\n                bzip2@1.0.8+shared\r\n                expat@2.2.9+libbsd\r\n                    libbsd@0.10.0\r\n                gdbm@1.18.1\r\n                    readline@8.0\r\n                        ncurses@6.2~symlinks+termlib\r\n                gettext@0.21+bzip2+curses+git~libunistring+libxml2+tar+xz\r\n                    tar@1.32\r\n                libffi@3.3 patches=26f26c6f29a7ce9bf370ad3ab2610f99365b4bdd7b82e7c31df41a3370d685c0\r\n                libuuid@1.0.3\r\n                openssl@1.1.1g+systemcerts\r\n                sqlite@3.33.0+column_metadata+fts~functions~rtree\r\n    py-pybind11@2.5.0 build_type=RelWithDebInfo\r\n    py-pyyaml@5.3.1+libyaml\r\n        libyaml@0.2.4\r\n```\r\n<!-- If you have any relevant configuration detail (custom `packages.yaml` or `modules.yaml`, etc.) you can add that here as well. -->\r\n\r\n### Additional information\r\n\r\n<!-- These boxes can be checked by replacing [ ] with [x] or by clicking them after submitting the issue. -->\r\n- [x] I have run `spack debug report` and reported the version of Spack/Python/Platform\r\n- [x] I have searched the issues of this repo and believe this is not a duplicate\r\n- [ ] I have run the failing commands in debug mode and reported the output\r\n\r\n<!-- We encourage you to try, as much as possible, to reduce your problem to the minimal example that still reproduces the issue. That would help us a lot in fixing it quickly and effectively!\r\n\r\nIf you want to ask a question about the tool (how to use it, what it can currently do, etc.), try the `#general` channel on our Slack first. We have a welcoming community and chances are you'll get your reply faster and without opening an issue.\r\n\r\nOther than that, thanks for taking the time to contribute to Spack! -->\r\n",
    "user": "glennpj",
    "url": "https://api.github.com/repos/spack/spack/issues/18867",
    "updated_at": "2021-02-22 19:02:11",
    "created_at": "2020-09-22 17:08:22",
    "closed_at": "2021-02-22 19:02:11",
    "state": "closed",
    "title": "py-torch@1.6.0 produces a GLIBC error when built with CUDA-11",
    "number": 18867,
    "milestone": null,
    "labels": [
        "bug",
        "triage"
    ],
    "id": 706553081,
    "html_url": "https://github.com/spack/spack/issues/18867",
    "assignees": [],
    "comments": 11
}