{
    "body": "I was successfully able to install python@3.7.4 with compiler gcc@4.8.5 and gcc@8.1.0, but it fails when I try with the most up-to-date gcc@9.2.0.\r\n\r\n---\r\n\r\n### Steps to reproduce the issue\r\n\r\n```console\r\n$ spack install python@3.7.4\r\n==> Warning: No Spack mirrors are currently configured\r\n==> diffutils is already installed in /home/dror/spack/opt/spack/linux-rhel7-ppc64le/gcc-9.2.0/diffutils-3.7-2frmp5xpdubyliy34wydaiexik4qhdrp\r\n```\r\n[...]\r\n```console\r\n==> sqlite is already installed in /home/dror/spack/opt/spack/linux-rhel7-ppc64le/gcc-9.2.0/sqlite-3.28.0-mqfz3kfnzyc4mvx2phpy7jgphvnzb4py\r\n==> Installing python\r\n==> Searching for binary cache of python\r\n==> No binary for python found: installing from source\r\n==> Using cached archive: /home/dror/spack/var/spack/cache/python/python-3.7.4.tgz\r\n==> Staging archive: /tmp/spack-stage/dror/python-3.7.4-dujvqglywu2slghaagqybsp7qforsiz6/Python-3.7.4.tgz\r\n==> Created stage in /tmp/spack-stage/dror/python-3.7.4-dujvqglywu2slghaagqybsp7qforsiz6\r\n==> Ran patch() for python\r\n==> Building python [AutotoolsPackage]\r\n==> Executing phase: 'autoreconf'\r\n==> Executing phase: 'configure'\r\n==> Executing phase: 'build'\r\n==> Error: ProcessError: Command exited with status 2:\r\n    'make' '-j16'\r\n\r\n138 errors found in build log:\r\n     897     LD_LIBRARY_PATH=/tmp/spack-stage/dror/python-3.7.4-dujvqglywu2slgh\r\n             aagqybsp7qforsiz6/spack-src/spack-build CC='/home/dror/spack/lib/s\r\n             pack/env/gcc/gcc -pthread' LDSHARED='/home/dror/spack/lib/spack/en\r\n             v/gcc/gcc -pthread -shared -L/home/dror/spack/opt/spack/linux-rhel\r\n             7-ppc64le/gcc-9.2.0/sqlite-3.28.0-mqfz3kfnzyc4mvx2phpy7jgphvnzb4py\r\n             /lib -L/home/dror/spack/opt/spack/linux-rhel7-ppc64le/gcc-9.2.0/nc\r\n             urses-6.1-o3nuwd2kgcbrobajmxsq4fuhus6krfrt/lib -L/home/dror/spack/\r\n             opt/spack/linux-rhel7-ppc64le/gcc-9.2.0/expat-2.2.5-oacoskrsq5ksp5\r\n             iep6k7atljlp6cxkp4/lib -L/home/dror/spack/opt/spack/linux-rhel7-pp\r\n             c64le/gcc-9.2.0/xz-5.2.4-lju7uwsv2f5kcdkv6c3bmbd2npma6tt4/lib -L/h\r\n             ome/dror/spack/opt/spack/linux-rhel7-ppc64le/gcc-9.2.0/libffi-3.2.\r\n             1-tqoaod74myz3abbtm6xhmvsfps7jdz5u/lib64 -L/home/dror/spack/opt/sp\r\n             ack/linux-rhel7-ppc64le/gcc-9.2.0/readline-7.0-w4tbzqvvgmmibe5fan4\r\n             ghbkowwkhdgf7/lib -L/home/dror/spack/opt/spack/linux-rhel7-ppc64le\r\n             /gcc-9.2.0/gdbm-1.18.1-vm3mhbv6i433mkv6g5okrppprfzibzcs/lib -L/hom\r\n             e/dror/spack/opt/spack/linux-rhel7-ppc64le/gcc-9.2.0/bzip2-1.0.8-3\r\n             p7tzmpnsvjwy5kojjxnvew7lbid5t6e/lib -L/home/dror/spack/opt/spack/l\r\n             inux-rhel7-ppc64le/gcc-9.2.0/zlib-1.2.11-d5zv4b44x5clkcdr4xix4sqzl\r\n             cafknuc/lib -L/home/dror/spack/opt/spack/linux-rhel7-ppc64le/gcc-9\r\n             .2.0/openssl-1.1.1c-sqq44tjcih3qf77kycohadi7mwjvnnxg/lib -L/home/d\r\n             ror/spack/opt/spack/linux-rhel7-ppc64le/gcc-9.2.0/gettext-0.19.8.1\r\n             -hb3obu2w2y23zpv3lqrzuh56ofum37vd/lib   ' OPT='-DNDEBUG -g -fwrapv\r\n              -O3 -Wall'        _TCLTK_INCLUDES='' _TCLTK_LIBS=''       ./python -E /tmp/s\r\n             pack-stage/dror/python-3.7.4-dujvqglywu2slghaagqybsp7qforsiz6/spac\r\n             k-src/setup.py   --no-user-cfg build\r\n     898     running build\r\n     899     running build_ext\r\n     900     INFO: Can't locate Tcl/Tk libs and/or headers\r\n     901     building '_struct' extension\r\n     902     /home/dror/spack/lib/spack/env/gcc/gcc -pthread -fPIC -Wno-unused-\r\n             result -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -fPIC -std=c99\r\n              -Wextra -Wno-unused-result -Wno-unused-parameter -Wno-missing-fie\r\n             ld-initializers -Werror=implicit-function-declaration -I. -I/home/\r\n             dror/spack/opt/spack/linux-rhel7-ppc64le/gcc-4.8.5/python-3.7.4-qb\r\n             4enrozlhhujedrkioxidykwicugvu7/include -IObjects -IPython -I/home/\r\n             dror/spack/opt/spack/linux-rhel7-ppc64le/gcc-4.8.5/sqlite-3.28.0-4\r\n             iydsvoqfg2b6bmputt2tgx3nxoe3wfl/include -I/home/dror/spack/opt/spa\r\n             ck/linux-rhel7-ppc64le/gcc-4.8.5/ncurses-6.1-jp42wsit7mklqgtlbq7ry\r\n             s5prgrrhajs/include -I/home/dror/spack/opt/spack/linux-rhel7-ppc64\r\n             le/gcc-4.8.5/expat-2.2.5-wlslwljfzi52exlanr7koedbpx7wngz2/include\r\n             -I/home/dror/spack/opt/spack/linux-rhel7-ppc64le/gcc-4.8.5/xz-5.2.\r\n             4-goozwyd3vo334mzphodqavktxzvhxgv2/include -I/home/dror/spack/opt/\r\n             spack/linux-rhel7-ppc64le/gcc-4.8.5/readline-7.0-saf6z7uchqyykwtai\r\n             xttbfhr2qc3zgb6/include -I/home/dror/spack/opt/spack/linux-rhel7-p\r\n             pc64le/gcc-4.8.5/gdbm-1.18.1-qstr2ltko3dz3m3fsati3ynvwhkdbsqt/incl\r\n             ude -I/home/dror/spack/opt/spack/linux-rhel7-ppc64le/gcc-4.8.5/bzi\r\n             p2-1.0.8-o3sdu6rpqilyfbezqx4f6qnghnjlxfio/include -I/home/dror/spa\r\n             ck/opt/spack/linux-rhel7-ppc64le/gcc-4.8.5/zlib-1.2.11-4v3ticyykh2\r\n             xcgw5fzltjrfuxkx7ipqh/include -I/home/dror/spack/opt/spack/linux-r\r\n             hel7-ppc64le/gcc-4.8.5/openssl-1.1.1c-z225fw73fpylz4jd7um4oxpdyhza\r\n             mijc/include -I/home/dror/spack/opt/spack/linux-rhel7-ppc64le/gcc-\r\n             4.8.5/gettext-0.19.8.1-girtgotiovck56xyhzi3x2ln6jiyao2y/include -I\r\n             /usr/local/include -I/tmp/spack-stage/dror/python-3.7.4-qb4enrozlh\r\n             hujedrkioxidykwicugvu7/spack-src/Include -I/tmp/spack-stage/dror/p\r\n             ython-3.7.4-dujvqglywu2slghaagqybsp7qforsiz6/spack-src/spack-build\r\n              -c _struct.c -o build/temp.linux-ppc64le-3.7/_struct.o\r\n  >> 903     gcc: error: _struct.c: No such file or directory\r\n  >> 904     gcc: fatal error: no input files\r\n     905     compilation terminated.\r\n     906     building '_ctypes_test' extension\r\n     907     creating build/temp.linux-ppc64le-3.7/_ctypes\r\n```\r\n[...]\r\n```console\r\n  >> 1247    gcc: error: _ctypes/_ctypes.c: No such file or directory\r\n  >> 1248    gcc: fatal error: no input files\r\n     1249    compilation terminated.\r\n     1250\r\n     1251    Python build finished successfully!\r\n     1252    The necessary bits to build these optional modules were not found:\r\n     1253    _elementtree          _tkinter              _uuid\r\n     1254    To find the necessary bits, look in setup.py in detect_modules() f\r\n             or the module's name.\r\n\r\n     ...\r\n\r\n     1289    Could not build the ssl module!\r\n     1290    Python requires an OpenSSL 1.0.2 or 1.1 compatible libssl with X50\r\n             9_VERIFY_PARAM_set1_host().\r\n     1291    LibreSSL 2.6.4 and earlier do not provide the necessary APIs, http\r\n             s://github.com/libressl-portable/portable/issues/381\r\n     1292\r\n     1293    running build_scripts\r\n     1294    creating build/scripts-3.7\r\n  >> 1295    error: file '/tmp/spack-stage/dror/python-3.7.4-qb4enrozlhhujedrki\r\n             oxidykwicugvu7/spack-src/Tools/scripts/pydoc3' does not exist\r\n  >> 1296    make: *** [sharedmods] Error 1\r\n\r\nSee build log for details:\r\n  /tmp/spack-stage/dror/python-3.7.4-dujvqglywu2slghaagqybsp7qforsiz6/spack-build-out.txt\r\n```\r\n\r\n### Platform and user environment\r\n\r\n```commandline\r\n$ uname -a \r\nLinux tellico-compute0 4.14.0-115.10.1.el7a.ppc64le #1 SMP Wed Jun 26 09:32:17 UTC 2019 ppc64le ppc64le ppc64le GNU/Linux\r\n\r\n$ cat /etc/redhat-release \r\nRed Hat Enterprise Linux Server release 7.6 (Maipo)\r\n\r\n$ spack compilers\r\n==> Available compilers\r\n-- gcc rhel7-ppc64le --------------------------------------------\r\ngcc@9.2.0  gcc@8.1.0  gcc@4.8.5\r\n``` \r\n",
    "user": "imnasnainaec",
    "url": "https://api.github.com/repos/spack/spack/issues/12709",
    "updated_at": "2019-09-17 22:45:22",
    "created_at": "2019-09-04 21:53:32",
    "closed_at": "2019-09-17 22:45:22",
    "state": "closed",
    "title": "Installation issue: python@3.7.4",
    "number": 12709,
    "milestone": null,
    "labels": [
        "build-error",
        "impact-high"
    ],
    "id": 489417936,
    "html_url": "https://github.com/spack/spack/issues/12709",
    "assignees": [
        "scheibelp"
    ],
    "comments": 4
}