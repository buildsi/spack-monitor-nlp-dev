{
    "body": "People have requested a command to get details on how a package is actually built to include, more recently, compiler flags.  Unless I'm mistaken, that level of detail is not available in any Spack commands so this PR leverages `spack info` to provide it.\r\n\r\n(Update: `spack find --json` *does* provide all of the information here and a bit more in machine-readable form.  `spack find` also has options to get dependencies (`-d`), variants (`-v`), compiler flags (`-f`), install path (`-p`).  I still think the  output from this PR is more user friendly and complete -- except when `--json` is used with `spack find`.)\r\n\r\nHelp output:\r\n```\r\n$ spack info --help\r\nusage: spack info [-hi] ...\r\n\r\nget detailed information on a particular package\r\n\r\npositional arguments:\r\n  pkg_spec         Package name or, with --installed, spec\r\n\r\noptional arguments:\r\n  -h, --help       show this help message and exit\r\n  -i, --installed  Show installation details: same as `spack find --info`\r\n```\r\n\r\nOutput from a Spack instance with one version of _hypre_ 2.23.0 installed:\r\n```\r\n$ spack find --info hypre@2.23.0      # OR  $ spack info --installed hypre@2.23.0\r\nAutotoolsPackage:   hypre@2.23.0\r\n\r\nHashes:\r\n    DAG  = odn3zibu5sjt2xumsin6b4quduykiklt\r\n    full = jtv3ffez3sjcrwgrvrtdcxjndrczdhz6\r\n\r\nInstalled Explicitly:   Thursday 21 October 2021\r\n    architecture = linux-rhel7-skylake_avx512\r\n    prefix       = /usr/WS1/dahlgren/spack/opt/spack/linux-rhel7-skylake_avx512/gcc-8.3.1/hypre-2.23.0-odn3zibu5sjt2xumsin6b4quduykiklt\r\n\r\nCompiler:   gcc@8.3.1\r\n    cflags = []\r\n    cppflags = []\r\n    cxxflags = []\r\n    fflags = []\r\n    ldflags = []\r\n    ldlibs = []\r\n\r\nVariant Settings:\r\n    ~complex\r\n    ~cuda\r\n    cuda_arch=none\r\n    ~debug\r\n    +fortran\r\n    ~int64\r\n    ~internal-superlu\r\n    ~mixedint\r\n    +mpi\r\n    ~openmp\r\n    +shared\r\n    ~superlu-dist\r\n    ~unified-memory\r\n\r\nRecorded Dependencies:\r\n    ('build', 'link') dependencies on openblas\r\n    ('build', 'link') dependencies on openmpi\r\n```\r\n\r\nOutput when multiple versions of a package are installed in the instance:\r\n```\r\n$ spack find --info zlib\r\n==> Error: Information is provided for a single package only\r\n\r\n$ spack info -i zlib\r\n==> Error: zlib matches multiple packages.\r\n  Matching packages:\r\n    s4yfeca zlib@1.2.11%clang@11.0.1 arch=linux-rhel7-cascadelake\r\n    c7zv5ft zlib@1.2.11%gcc@8.3.1 arch=linux-rhel7-broadwell\r\n    ash26ww zlib@1.2.11%gcc@8.3.1 arch=linux-rhel7-skylake_avx512\r\n    kzsxhof zlib@1.2.11%gcc@8.3.1 arch=linux-rhel7-skylake_avx512\r\n  Use a more specific spec.\r\n\r\n$ spack find --info /s4yfeca     # OR  $ spack info -i /s4yfeca\r\nPackage:   zlib@1.2.11\r\n\r\nHashes:\r\n    DAG  = s4yfecahwfhlopnflf3unufea6hh2efg\r\n    full = n2uzqshm22zbhvho3lw36zrtziglracf\r\n\r\nInstalled as Dependency:   Wednesday 01 September 2021\r\n    architecture = linux-rhel7-cascadelake\r\n    prefix       = /usr/WS1/dahlgren/spack/opt/spack/linux-rhel7-cascadelake/clang-11.0.1/zlib-1.2.11-s4yfecahwfhlopnflf3unufea6hh2efg\r\n\r\nCompiler:   clang@11.0.1\r\n    cflags = []\r\n    cppflags = []\r\n    cxxflags = []\r\n    fflags = []\r\n    ldflags = []\r\n    ldlibs = []\r\n\r\nVariant Settings:\r\n    +optimize\r\n    +pic\r\n    +shared\r\n\r\nRecorded Dependents:\r\n    libxml2 ('build', 'link') dependencies on zlib\r\n```\r\n\r\nOutput for an externally installed package:\r\n```\r\n$ spack find --info /er475uw    # OR $ spack info -i /er475uw\r\nAutotoolsPackage:   xz@5.2.2\r\n\r\nHashes:\r\n    DAG  = er475uwcmw5la52ymtpaskn43zua5x37\r\n    full = ydmq7okvsa4c3z6hffqxnki42pnymwkt\r\n\r\nInstalled as Dependency:   Friday 30 July 2021\r\n    architecture = linux-rhel7-broadwell\r\n    prefix       = /usr\r\n\r\nExternal:\r\n    path             = /usr\r\n    module           = None\r\n    extra_attributes = {}\r\n\r\nCompiler:   gcc@8.3.1\r\n    cflags = []\r\n    cppflags = []\r\n    cxxflags = []\r\n    fflags = []\r\n    ldflags = []\r\n    ldlibs = []\r\n\r\nVariant Settings:\r\n    libs=shared,static\r\n    ~pic\r\n\r\nRecorded Dependents:\r\n    libxml2 ('build', 'link') dependencies on xz\r\n    gettext ('build', 'link', 'run') dependencies on xz\r\n```\r\n\r\n\r\nTODO:\r\n- [x] Is it better to use the ASP solver or database to get to the information?  (A: database is faster and more complete)\r\n- [x] Format the output, whether ASP or database, in a human-readable form",
    "user": "tldahlgren",
    "url": "https://api.github.com/repos/spack/spack/issues/26862",
    "updated_at": "2022-01-05 17:45:17",
    "created_at": "2021-10-21 02:05:02",
    "closed_at": "None",
    "state": "open",
    "title": "feature: 'spack find --info' with alias 'spack info --installed'",
    "number": 26862,
    "milestone": null,
    "labels": [
        "new-version",
        "tests",
        "commands"
    ],
    "id": 1031980148,
    "html_url": "https://github.com/spack/spack/pull/26862",
    "assignees": [
        "tgamblin",
        "adamjstewart"
    ],
    "comments": 6
}