{
    "body": "### Steps to reproduce the issue\n\n```console\r\n$ spack install hip\r\n==> Warning: Spack will not check SSL certificates. You need to update your Python to enable certificate verification.\r\n==> Warning: Spack will not check SSL certificates. You need to update your Python to enable certificate verification.\r\n[+] /home/alexandre.sardinha/spack/opt/spack/linux-rhel7-cascadelake/gcc-11.2.0/pkgconf-1.8.0-twbax3sa4vo4ddxqgw245am2wk4ttc5x\r\n[+] /home/alexandre.sardinha/spack/opt/spack/linux-rhel7-cascadelake/gcc-11.2.0/berkeley-db-18.1.40-wu5sih7bb7c7npxn52jhssekf5xashf5\r\n[+] /home/alexandre.sardinha/spack/opt/spack/linux-rhel7-cascadelake/gcc-11.2.0/libiconv-1.16-wi3gdhxdwvnf5yila4okisgiqu7evuup\r\n[+] /home/alexandre.sardinha/spack/opt/spack/linux-rhel7-cascadelake/gcc-11.2.0/zlib-1.2.11-67gypdy5zszb6tg3dgb46m6qadcitvu3\r\n[+] /home/alexandre.sardinha/spack/opt/spack/linux-rhel7-cascadelake/gcc-11.2.0/libsigsegv-2.13-w4qn37hmah4u2ttz2bmz34njq5bqov4v\r\n[+] /home/alexandre.sardinha/spack/opt/spack/linux-rhel7-cascadelake/gcc-11.2.0/util-macros-1.19.3-mydwtzfehrmpubkhpcqoykry2f7eu3gy\r\n[+] /home/alexandre.sardinha/spack/opt/spack/linux-rhel7-cascadelake/gcc-11.2.0/xz-5.2.5-w5vqjb3ohjtu2qodqshjqu5g6ut54fko\r\n[+] /home/alexandre.sardinha/spack/opt/spack/linux-rhel7-cascadelake/gcc-11.2.0/libelf-0.8.13-jtlr3arbfksh6bv54fadywlt4fmqrbtu\r\n[+] /home/alexandre.sardinha/spack/opt/spack/linux-rhel7-cascadelake/gcc-11.2.0/libmd-1.0.3-arklijmbpxa4ms2ydpg5f5ukljm2xdpx\r\n[+] /home/alexandre.sardinha/spack/opt/spack/linux-rhel7-cascadelake/gcc-11.2.0/libffi-3.3-y6to4eh5jhm73pey5sovot35fgkej5gd\r\n[+] /home/alexandre.sardinha/spack/opt/spack/linux-rhel7-cascadelake/gcc-11.2.0/xxd-standalone-8.2.1201-k44i6srliefq2rslw2tyjxn24l4momlu\r\n[+] /home/alexandre.sardinha/spack/opt/spack/linux-rhel7-cascadelake/gcc-11.2.0/findutils-4.8.0-bt4tilss4cj5ga4k3lp436ag5urv6rkg\r\n[+] /home/alexandre.sardinha/spack/opt/spack/linux-rhel7-cascadelake/gcc-11.2.0/libpthread-stubs-0.4-ejrcoh55l3bi2a7cl554qiymko3nolby\r\n[+] /home/alexandre.sardinha/spack/opt/spack/linux-rhel7-cascadelake/gcc-11.2.0/xcb-proto-1.14.1-h2w6mo4fcx5m3565omkfh3nnhmpawfbz\r\n[+] /home/alexandre.sardinha/spack/opt/spack/linux-rhel7-cascadelake/gcc-11.2.0/roctracer-dev-api-4.3.1-npolowaehvvfxmqx5fznijystnnzzfvm\r\n[+] /home/alexandre.sardinha/spack/opt/spack/linux-rhel7-cascadelake/gcc-11.2.0/util-linux-uuid-2.36.2-wnl3rdcpsgp7r7dulj73y52rm7pzqxtp\r\n[+] /home/alexandre.sardinha/spack/opt/spack/linux-rhel7-cascadelake/gcc-11.2.0/ncurses-6.2-tsq37gnowacrzhs7uxsps7aq3opi224x\r\n[+] /home/alexandre.sardinha/spack/opt/spack/linux-rhel7-cascadelake/gcc-11.2.0/diffutils-3.8-um6louj5vpk332szz5qatwupj3ey5arx\r\n[+] /home/alexandre.sardinha/spack/opt/spack/linux-rhel7-cascadelake/gcc-11.2.0/tar-1.34-m7cotyihi5keiattwjl3vzsixs3qclfy\r\n[+] /home/alexandre.sardinha/spack/opt/spack/linux-rhel7-cascadelake/gcc-11.2.0/m4-1.4.19-meuqfs3esktzi2q3jvxoof5qa2xwnli4\r\n[+] /home/alexandre.sardinha/spack/opt/spack/linux-rhel7-cascadelake/gcc-11.2.0/xextproto-7.3.0-fi33m67uiwcgpwg4eb5glbbx43uh6pjm\r\n[+] /home/alexandre.sardinha/spack/opt/spack/linux-rhel7-cascadelake/gcc-11.2.0/glproto-1.4.17-ojli2bxxyh3ow7fvcsqbmhcoyquyqdsb\r\n[+] /home/alexandre.sardinha/spack/opt/spack/linux-rhel7-cascadelake/gcc-11.2.0/xproto-7.0.31-hzbdf6ruf6nvezsbsh5ztcplyjyiiwdq\r\n[+] /home/alexandre.sardinha/spack/opt/spack/linux-rhel7-cascadelake/gcc-11.2.0/xtrans-1.3.5-vu6rdx7bzrtsuimtnwa3h3xbp4ifq423\r\n[+] /home/alexandre.sardinha/spack/opt/spack/linux-rhel7-cascadelake/gcc-11.2.0/inputproto-2.3.2-3dltaj2ozqe6aebeo75vjek3p3jqj5a7\r\n[+] /home/alexandre.sardinha/spack/opt/spack/linux-rhel7-cascadelake/gcc-11.2.0/kbproto-1.0.7-3q4cvr22sgx7jslp4wj7xj5uwh7g52wh\r\n[+] /home/alexandre.sardinha/spack/opt/spack/linux-rhel7-cascadelake/gcc-11.2.0/libxml2-2.9.12-ff7qxwuaqvegevwzalhqq5gxlznemash\r\n[+] /home/alexandre.sardinha/spack/opt/spack/linux-rhel7-cascadelake/gcc-11.2.0/libbsd-0.11.3-5z3xr5rvwd6tawz46rmckmbx2eptnphn\r\n[+] /home/alexandre.sardinha/spack/opt/spack/linux-rhel7-cascadelake/gcc-11.2.0/readline-8.1-a6wazg3lnemxuijlfylwqbhal4woe7bx\r\n[+] /home/alexandre.sardinha/spack/opt/spack/linux-rhel7-cascadelake/gcc-11.2.0/bzip2-1.0.8-v6ehlfpl3nkfhvw52vim5hjtg4pxut4q\r\n[+] /home/alexandre.sardinha/spack/opt/spack/linux-rhel7-cascadelake/gcc-11.2.0/libtool-2.4.6-6s77nkds3trrgaqtnwmy5ekv7spddtuk\r\n[+] /home/alexandre.sardinha/spack/opt/spack/linux-rhel7-cascadelake/gcc-11.2.0/libxau-1.0.8-warqk3pnnnptmn7vyl2pnhlnnsonxwkt\r\n[+] /home/alexandre.sardinha/spack/opt/spack/linux-rhel7-cascadelake/gcc-11.2.0/libxdmcp-1.1.2-lxjla7hglxy5zj3tznkjecrgqpwkknmm\r\n[+] /home/alexandre.sardinha/spack/opt/spack/linux-rhel7-cascadelake/gcc-11.2.0/expat-2.4.1-nexejbcj2inx7q27mbhsyta6fw23tfy2\r\n[+] /home/alexandre.sardinha/spack/opt/spack/linux-rhel7-cascadelake/gcc-11.2.0/gdbm-1.19-voiucly5jr6narlnrpnopr2czhnckurq\r\n[+] /home/alexandre.sardinha/spack/opt/spack/linux-rhel7-cascadelake/gcc-11.2.0/sqlite-3.36.0-j5uebf55k27q3l77qfv3lbg6ovq5bdes\r\n[+] /home/alexandre.sardinha/spack/opt/spack/linux-rhel7-cascadelake/gcc-11.2.0/gettext-0.21-2y4dwftqv54m6rjqf7eovc2c52znewiv\r\n[+] /home/alexandre.sardinha/spack/opt/spack/linux-rhel7-cascadelake/gcc-11.2.0/libpciaccess-0.16-obctdncslbibhbawpqsa4nbnwimpcxdt\r\n[+] /home/alexandre.sardinha/spack/opt/spack/linux-rhel7-cascadelake/gcc-11.2.0/libxcb-1.14-zh2y3o3shfebw67k6yhh5m52ogzccfmv\r\n[+] /home/alexandre.sardinha/spack/opt/spack/linux-rhel7-cascadelake/gcc-11.2.0/perl-5.34.0-l3qu4jv2ct6xbmsvbqbns3ojugkv4mys\r\n[+] /home/alexandre.sardinha/spack/opt/spack/linux-rhel7-cascadelake/gcc-11.2.0/binutils-2.37-jn4nypkp3d2s3okwo44jbut5vakzr6yp\r\n[+] /home/alexandre.sardinha/spack/opt/spack/linux-rhel7-cascadelake/gcc-11.2.0/hwloc-2.5.0-3qztq6ip6adh5kwtuwia5strkiwijgxy\r\n[+] /home/alexandre.sardinha/spack/opt/spack/linux-rhel7-cascadelake/gcc-11.2.0/libx11-1.7.0-hh4qvqb4nw27mwoqacas3r4ndic7rxau\r\n[+] /home/alexandre.sardinha/spack/opt/spack/linux-rhel7-cascadelake/gcc-11.2.0/perl-data-dumper-2.173-fb4n6cmr52oivyzpprtzkny2dil7f4zn\r\n[+] /home/alexandre.sardinha/spack/opt/spack/linux-rhel7-cascadelake/gcc-11.2.0/bison-3.8.2-cqoayv6uv6kybkfeemsdukczlwpmk4yr\r\n[+] /home/alexandre.sardinha/spack/opt/spack/linux-rhel7-cascadelake/gcc-11.2.0/autoconf-2.69-767enomzurkdux5ytcgywcpmjl3s2idj\r\n[+] /home/alexandre.sardinha/spack/opt/spack/linux-rhel7-cascadelake/gcc-11.2.0/openssl-1.1.1l-i5jug2ueqzsig4vtl7z676v74pz4lq3x\r\n[+] /home/alexandre.sardinha/spack/opt/spack/linux-rhel7-cascadelake/gcc-11.2.0/libxext-1.3.3-7baeby4p5pobyyj4p5mkl3dskye2wtgd\r\n[+] /home/alexandre.sardinha/spack/opt/spack/linux-rhel7-cascadelake/gcc-11.2.0/flex-2.6.3-tgzmpqol7flq4soi6udeha2qskzka5pa\r\n[+] /home/alexandre.sardinha/spack/opt/spack/linux-rhel7-cascadelake/gcc-11.2.0/automake-1.16.3-oscwiqb6j3y4cynutxdssbrubo7xmqts\r\n[+] /home/alexandre.sardinha/spack/opt/spack/linux-rhel7-cascadelake/gcc-11.2.0/cmake-3.21.4-4pfd6wgbeknqtis64iou4kxfecioymcz\r\n[+] /home/alexandre.sardinha/spack/opt/spack/linux-rhel7-cascadelake/gcc-11.2.0/python-3.8.12-o4jg4mwj3fk5y2qbmaywjk4t45emnwxw\r\n[+] /home/alexandre.sardinha/spack/opt/spack/linux-rhel7-cascadelake/gcc-11.2.0/numactl-2.0.14-vh53jyvxisljbjulzapgxrgbgjk7xelv\r\n[+] /home/alexandre.sardinha/spack/opt/spack/linux-rhel7-cascadelake/gcc-11.2.0/rocm-cmake-4.3.1-s576aekappjvpsbrnz5v2lxb57nnsgx2\r\n[+] /home/alexandre.sardinha/spack/opt/spack/linux-rhel7-cascadelake/gcc-11.2.0/py-setuptools-58.2.0-jaug6xmya2k5hpmmo4euqwba6kk3hzfc\r\n[+] /home/alexandre.sardinha/spack/opt/spack/linux-rhel7-cascadelake/gcc-11.2.0/z3-4.8.9-xykcp4bxr6f4poc7vrtddyxpqybuevpj\r\n[+] /home/alexandre.sardinha/spack/opt/spack/linux-rhel7-cascadelake/gcc-11.2.0/hsakmt-roct-4.3.1-txyj3rl22nwinjpthwnub5vxurho4crp\r\n[+] /home/alexandre.sardinha/spack/opt/spack/linux-rhel7-cascadelake/gcc-11.2.0/py-markupsafe-2.0.1-bgvsfhdqjczpsrczsdu66atvy5npmcue\r\n[+] /home/alexandre.sardinha/spack/opt/spack/linux-rhel7-cascadelake/gcc-11.2.0/llvm-amdgpu-4.3.1-2boua4fbven4ayfnwm6jyah4rwb2cvfa\r\n[+] /home/alexandre.sardinha/spack/opt/spack/linux-rhel7-cascadelake/gcc-11.2.0/py-mako-1.1.4-zztrzgffra4b6kijj45t5s5b6fjcglhq\r\n[+] /home/alexandre.sardinha/spack/opt/spack/linux-rhel7-cascadelake/gcc-11.2.0/comgr-4.3.1-rwrlqjz7gbpjtl3oj7rgyo6u4kyhjsnj\r\n==> Installing hsa-rocr-dev-4.3.1-hnl55ssihd7fgaobmvzmb5kfoyrph4t4\r\n==> No binary for hsa-rocr-dev-4.3.1-hnl55ssihd7fgaobmvzmb5kfoyrph4t4 found: installing from source\r\n==> Using cached archive: /home/alexandre.sardinha/spack/var/spack/cache/_source-cache/archive/85/85fbd1645120b71635844090ce8bd9f7af0a3d1065d5fae476879f99ba0c0475.tar.gz\r\n==> Applied patch /home/alexandre.sardinha/spack/var/spack/repos/builtin/packages/hsa-rocr-dev/0002-Remove-explicit-RPATH-again.patch\r\n==> hsa-rocr-dev: Executing phase: 'cmake'\r\n==> hsa-rocr-dev: Executing phase: 'build'\r\n==> Error: ProcessError: Command exited with status 2:\r\n    'make' '-j16'\r\n\r\n4 errors found in build log:\r\n     540          |                 ^~~~\r\n     541    /tmp/alexandre.sardinha/spack-stage/spack-stage-hsa-rocr-dev-4.3.1-\r\n            hnl55ssihd7fgaobmvzmb5kfoyrph4t4/spack-src/src/image/image_manager_\r\n            kv.cpp: In member function 'virtual hsa_status_t rocr::image::Image\r\n            ManagerKv::CalculateImageSizeAndAlignment(hsa_agent_t, const hsa_ex\r\n            t_image_descriptor_t&, hsa_ext_image_data_layout_t, size_t, size_t,\r\n             hsa_ext_image_data_info_t&) const':\r\n     542    /tmp/alexandre.sardinha/spack-stage/spack-stage-hsa-rocr-dev-4.3.1-\r\n            hnl55ssihd7fgaobmvzmb5kfoyrph4t4/spack-src/src/image/image_manager_\r\n            kv.cpp:206:16: warning: unused variable 'status' [-Wunused-variable\r\n            ]\r\n     543      206 |   hsa_status_t status = HSA::hsa_agent_get_info(component, \r\n            HSA_AGENT_INFO_PROFILE, &profile);\r\n     544          |                ^~~~~~\r\n     545    /tmp/alexandre.sardinha/spack-stage/spack-stage-hsa-rocr-dev-4.3.1-\r\n            hnl55ssihd7fgaobmvzmb5kfoyrph4t4/spack-src/src/image/blit_kernel.cp\r\n            p: In member function 'hsa_status_t rocr::image::BlitKernel::CopyBu\r\n            fferToImage(rocr::image::BlitQueue&, const std::vector<rocr::image:\r\n            :BlitCodeInfo>&, const void*, size_t, size_t, const Image&, const h\r\n            sa_ext_image_region_t&)':\r\n  >> 546    /tmp/alexandre.sardinha/spack-stage/spack-stage-hsa-rocr-dev-4.3.1-\r\n            hnl55ssihd7fgaobmvzmb5kfoyrph4t4/spack-src/src/image/blit_kernel.cp\r\n            p:277:9: error: 'void* memset(void*, int, size_t)' offset [0, 143] \r\n            is out of the bounds [0, 0] [-Werror=array-bounds]\r\n     547      277 |   memset(args, 0, sizeof(KernelArgs));\r\n     548          |   ~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n     549    cc1plus: all warnings being treated as errors\r\n  >> 550    make[2]: *** [CMakeFiles/hsa-runtime64.dir/image/blit_kernel.cpp.o]\r\n             Error 1\r\n     551    make[2]: *** Waiting for unfinished jobs....\r\n     552    make[2]: Leaving directory `/tmp/alexandre.sardinha/spack-stage/spa\r\n            ck-stage-hsa-rocr-dev-4.3.1-hnl55ssihd7fgaobmvzmb5kfoyrph4t4/spack-\r\n            build-hnl55ss'\r\n  >> 553    make[1]: *** [CMakeFiles/hsa-runtime64.dir/all] Error 2\r\n     554    make[1]: Leaving directory `/tmp/alexandre.sardinha/spack-stage/spa\r\n            ck-stage-hsa-rocr-dev-4.3.1-hnl55ssihd7fgaobmvzmb5kfoyrph4t4/spack-\r\n            build-hnl55ss'\r\n  >> 555    make: *** [all] Error 2\r\n\r\nSee build log for details:\r\n  /tmp/alexandre.sardinha/spack-stage/spack-stage-hsa-rocr-dev-4.3.1-hnl55ssihd7fgaobmvzmb5kfoyrph4t4/spack-build-out.txt\r\n\r\n==> Warning: Skipping build of hip-rocclr-4.3.1-jkp3oj6lvb3yuuvvxvn2njmnizpqycur since hsa-rocr-dev-4.3.1-hnl55ssihd7fgaobmvzmb5kfoyrph4t4 failed\r\n==> Warning: Skipping build of hip-4.3.1-tduxlow5qegrblcimdukwwn53a5jz4w4 since hip-rocclr-4.3.1-jkp3oj6lvb3yuuvvxvn2njmnizpqycur failed\r\n==> Warning: Skipping build of rocminfo-4.3.1-ukqu437feoz7jhjjkvquy3zbjmej7vwl since hsa-rocr-dev-4.3.1-hnl55ssihd7fgaobmvzmb5kfoyrph4t4 failed\r\n==> Error: hip-4.3.1-tduxlow5qegrblcimdukwwn53a5jz4w4: Package was not installed\r\n==> Error: Installation request failed.  Refer to reported errors for failing package(s).\r\n[+] /home/alexandre.sardinha/spack/opt/spack/linux-rhel7-cascadelake/gcc-11.2.0/mesa18-18.3.6-olyjvl5r5mliujpibwwkmxypudd3u3aj\r\n```\n\n### Information on your system\n\n```console\r\n$ spack debug report\r\n* **Spack:** 0.16.3-5071-6126395\r\n* **Python:** 2.7.5\r\n* **Platform:** linux-rhel7-cascadelake\r\n* **Concretizer:** clingo\r\n```\n\n### Additional information\n\n[spack-build-out.txt](https://github.com/spack/spack/files/7514584/spack-build-out.txt)\r\n[spack-build-env.txt](https://github.com/spack/spack/files/7514585/spack-build-env.txt)\r\n\r\nThank you, @arjun-raj-kuppala @haampie e  @srekola !\r\n \n\n### General information\n\n- [X] I have run `spack debug report` and reported the version of Spack/Python/Platform\n- [X] I have run `spack maintainers <name-of-the-package>` and **@mentioned** any maintainers\n- [X] I have uploaded the build log and environment files\n- [X] I have searched the issues of this repo and believe this is not a duplicate",
    "user": "alexandresardinha",
    "url": "https://api.github.com/repos/spack/spack/issues/27333",
    "updated_at": "2021-11-10 17:05:33",
    "created_at": "2021-11-10 17:05:33",
    "closed_at": "None",
    "state": "open",
    "title": "Installation issue: hip",
    "number": 27333,
    "milestone": null,
    "labels": [
        "build-error"
    ],
    "id": 1050086784,
    "html_url": "https://github.com/spack/spack/issues/27333",
    "assignees": [],
    "comments": 0
}