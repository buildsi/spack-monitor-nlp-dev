{
    "body": "I was installing OpenMPI and wanted to see what variants were available.  I ran `spack info openmpi`.  The relevant snippet from that output is:\r\n\r\n```\r\nVariants:\r\n    Name [Default]           Allowed values          Description\r\n    =====================    ====================    ==============================================================================\r\n\r\n    atomics [off]            on, off                 Enable built-in atomics\r\n    cuda [off]               on, off                 Enable CUDA support\r\n    cxx [off]                on, off                 Enable C++ MPI bindings\r\n    cxx_exceptions [off]     on, off                 Enable C++ Exception support\r\n    fabrics [none]           none, auto, verbs,      List of fabrics that are enabled; 'auto' lets openmpi determine\r\n                             ofi, xpmem, ucx,\r\n                             psm, cma, fca, knem,\r\n                             psm2, hcoll, mxm\r\n    gpfs [on]                on, off                 Enable GPFS support (if present)\r\n    java [off]               on, off                 Build Java support\r\n    legacylaunchers [off]    on, off                 Do not remove mpirun/mpiexec when building with slurm\r\n    lustre [off]             on, off                 Lustre filesystem library support\r\n    memchecker [off]         on, off                 Memchecker support for debugging [degrades performance]\r\n    pmi [off]                on, off                 Enable PMI support\r\n    schedulers [none]        none, auto, sge,        List of schedulers for which support is enabled; 'auto' lets openmpi determine\r\n                             lsf, slurm,\r\n                             loadleveler, tm,\r\n                             alps\r\n    singularity [off]        on, off                 Build support for the Singularity container\r\n    sqlite3 [off]            on, off                 Build SQLite3 support\r\n    static [on]              on, off                 Build static libraries\r\n    thread_multiple [off]    on, off                 Enable MPI_THREAD_MULTIPLE support\r\n    vt [on]                  on, off                 Build VampirTrace support\r\n    wrapper-rpath [on]       on, off                 Enable rpath support in the wrappers\r\n```\r\n\r\nBased on that output, the `pmi` variant has the allowed values of `on` and `off`, and so I ran `spack install openmpi pmi=on`.  That produced an error (pasted below). The correct syntax was actually `spack install openmpi pmi=true` or `spack install openmp +pmi`.  The difference in the boolean variant output in `spack info` versus the input required by `spack install` is confusing.  I think they should be the same (either info outputs `true`/`false` or the install accepts `on`/`off`).\r\n\r\n### Steps to reproduce the issue\r\n\r\n```console\r\n$ spack install openpmi pmi=on\r\n```\r\n\r\n### Error Message\r\n\r\n```console\r\n==> Error: cannot construct a BoolValuedVariant for \"pmi\" from a value that does not represent a bool\r\n```\r\n\r\nRun with debug on:\r\n\r\n```\r\n\u276f spack -d install openmpi pmi=on                                                                                                                                                                                              20:28:05 ()\r\n==> [2020-12-02-20:28:12.722104] '/bin/bash' '--norc' '--noprofile' '-lc' 'echo $CRAY_CPU_TARGET'\r\n==> [2020-12-02-20:28:12.730215] default to front-end architecture\r\n==> [2020-12-02-20:28:12.766670] Imported install from built-in commands\r\n==> [2020-12-02-20:28:12.768522] Reading config file /global/u2/h/herbein1/Repositories/spack/etc/spack/defaults/config.yaml\r\n==> [2020-12-02-20:28:12.792521] Imported install from built-in commands\r\n==> [2020-12-02-20:28:12.794153] Reading config file /global/u2/h/herbein1/Repositories/spack/etc/spack/defaults/repos.yaml\r\nTraceback (most recent call last):\r\n  File \"/global/homes/h/herbein1/Repositories/spack/bin/spack\", line 66, in <module>\r\n    sys.exit(spack.main.main())\r\n  File \"/global/u2/h/herbein1/Repositories/spack/lib/spack/spack/main.py\", line 762, in main\r\n    return _invoke_command(command, parser, args, unknown)\r\n  File \"/global/u2/h/herbein1/Repositories/spack/lib/spack/spack/main.py\", line 490, in _invoke_command\r\n    return_val = command(parser, args)\r\n  File \"/global/u2/h/herbein1/Repositories/spack/lib/spack/spack/cmd/install.py\", line 303, in install\r\n    args.spec, concretize=True, tests=tests)\r\n  File \"/global/u2/h/herbein1/Repositories/spack/lib/spack/spack/cmd/__init__.py\", line 164, in parse_specs\r\n    spec.concretize(tests=tests)  # implies normalize\r\n  File \"/global/u2/h/herbein1/Repositories/spack/lib/spack/spack/spec.py\", line 2477, in concretize\r\n    self._old_concretize(tests)\r\n  File \"/global/u2/h/herbein1/Repositories/spack/lib/spack/spack/spec.py\", line 2278, in _old_concretize\r\n    user_spec_deps=user_spec_deps),\r\n  File \"/global/u2/h/herbein1/Repositories/spack/lib/spack/spack/spec.py\", line 2805, in normalize\r\n    self.validate_or_raise()\r\n  File \"/global/u2/h/herbein1/Repositories/spack/lib/spack/spack/spec.py\", line 2871, in validate_or_raise\r\n    vt.substitute_abstract_variants(spec)\r\n  File \"/global/u2/h/herbein1/Repositories/spack/lib/spack/spack/variant.py\", line 645, in substitute_abstract_variants\r\n    new_variant = pkg_variant.make_variant(v._original_value)\r\n  File \"/global/u2/h/herbein1/Repositories/spack/lib/spack/spack/variant.py\", line 172, in make_variant\r\n    return self.variant_cls(self.name, value)\r\n  File \"/global/u2/h/herbein1/Repositories/spack/lib/spack/spack/variant.py\", line 225, in __init__\r\n    self.value = value\r\n  File \"/global/u2/h/herbein1/Repositories/spack/lib/spack/spack/variant.py\", line 262, in value\r\n    self._value_setter(value)\r\n  File \"/global/u2/h/herbein1/Repositories/spack/lib/spack/spack/variant.py\", line 467, in _value_setter\r\n    raise ValueError(msg.format(self.name))\r\nValueError: cannot construct a BoolValuedVariant for \"pmi\" from a value that does not represent a bool\r\n```\r\n\r\n### Information on your system\r\n\r\n```\r\n\u276f spack debug report\r\n* **Spack:** 0.16.0-111-bb9f5d613\r\n* **Python:** 3.6.10\r\n* **Platform:** cray-sles15-haswell\r\n* **Concretizer:** original\r\n```\r\n\r\n### Additional information\r\n\r\n<!-- These boxes can be checked by replacing [ ] with [x] or by clicking them after submitting the issue. -->\r\n- [x] I have run `spack debug report` and reported the version of Spack/Python/Platform\r\n- [x] I have searched the issues of this repo and believe this is not a duplicate\r\n- [x] I have run the failing commands in debug mode and reported the output\r\n",
    "user": "SteVwonder",
    "url": "https://api.github.com/repos/spack/spack/issues/20225",
    "updated_at": "2020-12-03 16:38:48",
    "created_at": "2020-12-03 04:31:01",
    "closed_at": "None",
    "state": "open",
    "title": "Confusing format when displaying vs inputting boolean variants",
    "number": 20225,
    "milestone": null,
    "labels": [
        "bug",
        "commands",
        "user-experience",
        "triage"
    ],
    "id": 755823705,
    "html_url": "https://github.com/spack/spack/issues/20225",
    "assignees": [],
    "comments": 0
}