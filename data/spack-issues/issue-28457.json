{
    "body": "### Steps to reproduce the issue\n\n$ spack maintainers openssh\r\n@bernhardkaindl\r\n\r\n$ spack install openssh %nvhpc@22.1 ^openssl %gcc\r\n```\r\n[+] /home2/cessenat/Softs/spack/opt/spack/linux-ubuntu20.04-zen2/nvhpc-22.1/pkgconf-1.8.0-a3kn22sdo3dikakyqkux3xsr4gcmnu5n\r\n[+] /usr (external perl-5.30.0-gmkstxoj5w7t5eemib4yd365zw3nqayk)\r\n[+] /home2/cessenat/Softs/spack/opt/spack/linux-ubuntu20.04-zen2/gcc-9.3.0/zlib-1.2.11-whj3n7mok67wqtm5dofead56i6krevxc\r\n[+] /home2/cessenat/Softs/spack/opt/spack/linux-ubuntu20.04-zen2/nvhpc-22.1/ncurses-6.2-7yglxp6sw2ajhjpdgaxfs63hu3i2dok7\r\n[+] /home2/cessenat/Softs/spack/opt/spack/linux-ubuntu20.04-zen2/gcc-9.3.0/openssl-1.1.1m-23imk2rsftvme5mwrkr6wdvhoecqq2rk\r\n[+] /home2/cessenat/Softs/spack/opt/spack/linux-ubuntu20.04-zen2/nvhpc-22.1/libedit-3.1-20210216-c5mkfnd4gab6cuceloxorgpypr565b5u\r\n==> Installing openssh-8.8p1-m6zc5n3ra3rfeg4senjydunhcsq6ub56\r\n==> No binary for openssh-8.8p1-m6zc5n3ra3rfeg4senjydunhcsq6ub56 found: installing from source\r\n==> Using cached archive: /home2/cessenat/Softs/spack/var/spack/cache/_source-cache/archive/45/4590890ea9bb9ace4f71ae331785a3a5823232435161960ed5fc86588f331fe9.tar.gz\r\n==> No patches needed for openssh\r\n==> openssh: Executing phase: 'autoreconf'\r\n==> openssh: Executing phase: 'configure'\r\n==> openssh: Executing phase: 'build'\r\n==> Error: ProcessError: Command exited with status 2:\r\n    'make' '-j6' 'V=1'\r\n\r\n2 errors found in build log:\r\n     6092    a - sshbuf-io.o\r\n     6093    ranlib libssh.a\r\n     6094    /home2/cessenat/Softs/spack/lib/spack/env/nvhpc/nvc -o ssh ssh.o readconf.o clientloop.o sshtty.o sshconnect.o sshconnect2.o mux.o ssh-sk-c\r\n             lient.o -L. -Lopenbsd-compat/  -Wl,-z,relro -Wl,-z,now -Wl,-z,noexecstack -fstack-protector-strong -pie  -lssh -lopenbsd-compat -lcrypto -l\r\n             util -lz  -lcrypt -lresolv\r\n     6095    nvc-Warning-Unknown switch: -fstack-protector-strong\r\n     6096    /usr/bin/ld: /usr/lib/gcc/x86_64-linux-gnu/9/crtbegin.o: relocation R_X86_64_32 against hidden symbol `__TMC_END__' can not be used when ma\r\n             king a PIE object\r\n     6097    /home2/cessenat/Softs/spack/lib/spack/env/nvhpc/nvc -o sshd sshd.o auth-rhosts.o auth-passwd.o audit.o audit-bsm.o audit-linux.o platform.o\r\n              sshpty.o sshlogin.o servconf.o serverloop.o auth.o auth2.o auth-options.o session.o auth2-chall.o groupaccess.o auth-bsdauth.o auth2-hostb\r\n             ased.o auth2-kbdint.o auth2-none.o auth2-passwd.o auth2-pubkey.o monitor.o monitor_wrap.o auth-krb5.o auth2-gss.o gss-serv.o gss-serv-krb5.\r\n             o loginrec.o auth-pam.o auth-shadow.o auth-sia.o md5crypt.o srclimit.o sftp-server.o sftp-common.o sandbox-null.o sandbox-rlimit.o sandbox-\r\n             systrace.o sandbox-darwin.o sandbox-seccomp-filter.o sandbox-capsicum.o sandbox-pledge.o sandbox-solaris.o uidswap.o ssh-sk-client.o -L. -L\r\n             openbsd-compat/  -Wl,-z,relro -Wl,-z,now -Wl,-z,noexecstack -fstack-protector-strong -pie  -lssh -lopenbsd-compat  -lcrypto -lutil -lz  -lc\r\n             rypt -lresolv\r\n  >> 6098    make: *** [Makefile:210: ssh] Error 2\r\n     6099    make: *** Waiting for unfinished jobs....\r\n     6100    nvc-Warning-Unknown switch: -fstack-protector-strong\r\n     6101    /usr/bin/ld: /usr/lib/gcc/x86_64-linux-gnu/9/crtbegin.o: relocation R_X86_64_32 against hidden symbol `__TMC_END__' can not be used when ma\r\n             king a PIE object\r\n  >> 6102    make: *** [Makefile:213: sshd] Error 2\r\n\r\nSee build log for details:\r\n  /tmp/cessenat/spack-stage/spack-stage-openssh-8.8p1-m6zc5n3ra3rfeg4senjydunhcsq6ub56/spack-build-out.txt\r\n\r\n```\n\n### Information on your system\n\n$ spack debug report\r\n* **Spack:** 0.17.0-856-e0f044561e\r\n* **Python:** 3.8.10\r\n* **Platform:** linux-ubuntu20.04-zen2\r\n* **Concretizer:** clingo\r\n\n\n### Additional information\n\n[spack-build-env.txt](https://github.com/spack/spack/files/7883866/spack-build-env.txt)\r\n[spack-build-out.txt](https://github.com/spack/spack/files/7883867/spack-build-out.txt)\r\n\n\n### General information\n\n- [X] I have run `spack debug report` and reported the version of Spack/Python/Platform\n- [X] I have run `spack maintainers <name-of-the-package>` and **@mentioned** any maintainers\n- [X] I have uploaded the build log and environment files\n- [X] I have searched the issues of this repo and believe this is not a duplicate",
    "user": "cessenat",
    "url": "https://api.github.com/repos/spack/spack/issues/28457",
    "updated_at": "2022-01-17 17:53:11",
    "created_at": "2022-01-17 17:53:11",
    "closed_at": "None",
    "state": "open",
    "title": "Installation issue: openssh %nvhpc",
    "number": 28457,
    "milestone": null,
    "labels": [
        "build-error"
    ],
    "id": 1106127808,
    "html_url": "https://github.com/spack/spack/issues/28457",
    "assignees": [],
    "comments": 0
}