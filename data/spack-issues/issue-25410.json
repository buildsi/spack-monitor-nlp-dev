{
    "body": "### Steps to reproduce the issue\n\n```console\r\n$ spack install python@3.8.11\r\n==> Installing python-3.8.11-q7dghfieeutuzy3bhhbh7a3aebdv6skj\r\n==> No binary for python-3.8.11-q7dghfieeutuzy3bhhbh7a3aebdv6skj found: installing from source\r\n==> Fetching https://mirror.spack.io/_source-cache/archive/b7/b77464ea80cec14581b86aeb7fb2ff02830e0abc7bcdc752b7b4bdfcd8f3e393.tgz\r\n==> Applied patch /home/john/spack/var/spack/repos/builtin/packages/python/python-3.7.4+-distutils-C++.patch\r\n==> Ran patch() for python\r\n==> python: Executing phase: 'autoreconf'\r\n==> python: Executing phase: 'configure'\r\n==> python: Executing phase: 'build'\r\n==> python: Executing phase: 'install'\r\n==> python: Successfully installed python-3.8.11-q7dghfieeutuzy3bhhbh7a3aebdv6skj\r\n  Fetch: 1.62s.  Build: 58.72s.  Total: 1m 0.34s.\r\n[+] /home/john/spack/opt/spack/linux-devuan3-skylake/gcc-8.3.0/python-3.8.11-q7dghfieeutuzy3bhhbh7a3aebdv6skj\r\njohn@db:~$ spack load python/q7dgh\r\njohn@db:~$ which python3\r\n/home/john/spack/opt/spack/linux-devuan3-skylake/gcc-8.3.0/python-3.8.11-q7dghfieeutuzy3bhhbh7a3aebdv6skj/bin/python3\r\njohn@db:~$ python3 -c 'import bz2'\r\nTraceback (most recent call last):\r\n  File \"<string>\", line 1, in <module>\r\n  File \"/home/john/spack/opt/spack/linux-devuan3-skylake/gcc-8.3.0/python-3.8.11-q7dghfieeutuzy3bhhbh7a3aebdv6skj/lib/python3.8/bz2.py\", line 19, in <module>\r\n    from _bz2 import BZ2Compressor, BZ2Decompressor\r\nModuleNotFoundError: No module named '_bz2'\r\njohn@db:~$ spack find --variants python/q7dgh\r\n==> 1 installed package\r\n-- linux-devuan3-skylake / gcc@8.3.0 ----------------------------\r\npython@3.8.11+bz2+ctypes+dbm~debug+libxml2+lzma~nis~optimizations+pic+pyexpat+pythoncmd+readline+shared+sqlite3+ssl~tix~tkinter~ucs4+uuid+zlib patches=0d98e93189bc278fbc37a50ed7f183bd8aaf249a8e1670a465f0db6bb4f8cf87\r\n```\n\n### Information on your system\n\n```console\r\njohn@db:~$ spack debug report\r\n* **Spack:** 0.16.2-3904-6cd8583165\r\n* **Python:** 3.7.3\r\n* **Platform:** linux-devuan3-skylake\r\n* **Concretizer:** original\r\njohn@db:~$ cat /etc/os-release \r\nPRETTY_NAME=\"Devuan GNU/Linux 3 (beowulf)\"\r\nNAME=\"Devuan GNU/Linux\"\r\nVERSION_ID=\"3\"\r\nVERSION=\"3 (beowulf)\"\r\nVERSION_CODENAME=beowulf\r\nID=devuan\r\nID_LIKE=debian\r\nHOME_URL=\"https://www.devuan.org/\"\r\nSUPPORT_URL=\"https://devuan.org/os/community\"\r\nBUG_REPORT_URL=\"https://bugs.devuan.org/\"\r\n```\r\n\n\n### Additional information\n\n* The problem occurs with Python 3.8.11, 3.7.11.\r\n* The problem described in this issue breaks Mercurial builds.\r\n* [spack-build-out.txt](https://github.com/spack/spack/files/6982375/spack-build-out.txt) (Python 3.8.11 build)\r\n* [spack-build-env.txt](https://github.com/spack/spack/files/6982376/spack-build-env.txt) (Python 3.8.11 build)\r\n\r\nPossibly relevant in `spack-build-out.txt`:\r\n```\r\nThe necessary bits to build these optional modules were not found:\r\n_bz2                  _lzma                 _tkinter           \r\n_uuid                                                          \r\nTo find the necessary bits, look in setup.py in detect_modules() for the module's name.\r\n```\r\n\r\n@adamjstewart @skosukhin\n\n### General information\n\n- [X] I have run `spack debug report` and reported the version of Spack/Python/Platform\n- [X] I have run `spack maintainers <name-of-the-package>` and **@mentioned** any maintainers\n- [X] I have uploaded the build log and environment files\n- [X] I have searched the issues of this repo and believe this is not a duplicate",
    "user": "christoph-conrads",
    "url": "https://api.github.com/repos/spack/spack/issues/25410",
    "updated_at": "2021-08-19 14:45:41",
    "created_at": "2021-08-13 12:32:21",
    "closed_at": "2021-08-13 14:01:41",
    "state": "closed",
    "title": "Installation issue: python bz2 module cannot be imported",
    "number": 25410,
    "milestone": null,
    "labels": [
        "build-error"
    ],
    "id": 970358362,
    "html_url": "https://github.com/spack/spack/issues/25410",
    "assignees": [],
    "comments": 7
}