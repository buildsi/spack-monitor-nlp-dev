{
    "body": "### Steps to reproduce the issue\n\n```console\r\nspack install shtools\r\n```\n\n### Information on your system\n\n```\r\n* **Spack:** 0.16.3-4915-1d1beb7\r\n* **Python:** 3.6.8\r\n* **Platform:** linux-centos7-broadwell\r\n* **Concretizer:** clingo\r\n```\n\n### Additional information\n\n\r\n[spack-build-out.txt](https://github.com/spack/spack/files/7428897/spack-build-out.txt)\r\n[spack-build-env.txt](https://github.com/spack/spack/files/7428898/spack-build-env.txt)\r\n\r\n\r\nThe problem seems to be related to libtool, even though it's installed correctly as dependency\r\n```\r\n==> Error: ProcessError: Command exited with status 2:\r\n    'make' '-j10' 'fortran' 'F95=/att/gpfsfs/briskfs01/ppl/sberton2/.spack_repo/opt/spack/linux-centos7-broadwell/gcc-11.1.0/gcc-9.3.0-edodhooi2frihm46komjn2blyd6nmatk/bin/gfortran' 'F95FLAGS=-fPIC -O3 -std=gnu -ffast-math' 'OPENMPFLAGS=-fopenmp' 'BLAS=/att/gpfsfs/briskfs01/ppl/sberton2/.spack_repo/opt/spack/linux-centos7-broadwell/gcc-9.3.0/openblas-0.3.18-3n6bxikyxyv7plf7fljswyckps73i5de/lib/libopenblas.so' 'FFTW=/att/gpfsfs/briskfs01/ppl/sberton2/.spack_repo/opt/spack/linux-centos7-broadwell/gcc-9.3.0/fftw-3.3.9-bxa3x3hvm2sgoyr4wptbl2s7fljtmgqp/lib/libfftw3.so' 'LAPACK=/att/gpfsfs/briskfs01/ppl/sberton2/.spack_repo/opt/spack/linux-centos7-broadwell/gcc-9.3.0/openblas-0.3.18-3n6bxikyxyv7plf7fljswyckps73i5de/lib/libopenblas.so' 'PREFIX=/att/gpfsfs/briskfs01/ppl/sberton2/.spack_repo/opt/spack/linux-centos7-broadwell/gcc-9.3.0/shtools-4.8-3uji7smuqkz5wxgf2x7alaii6onev5zw' 'PWD=/att/nobackup/sberton2/.tmp/spack-stage/spack-stage-shtools-4.8-3uji7smuqkz5wxgf2x7alaii6onev5zw/spack-src'\r\n\r\n2 errors found in build log:\r\n     118    /att/gpfsfs/briskfs01/ppl/sberton2/.spack_repo/opt/spack/linux-centos7-broadwell/gcc-11.1.0/gcc-9.3.0-edodhooi2frihm46komjn2blyd6nmatk/bin/gfortran -c -fPIC -O3 -std=gnu -ffast-math MakeMagGradGridD\r\n            H.f95\r\n     119    \r\n     120    --> Compilation of source files successful\r\n     121    \r\n     122    libtool -static -o /att/nobackup/sberton2/.tmp/spack-stage/spack-stage-shtools-4.8-3uji7smuqkz5wxgf2x7alaii6onev5zw/spack-src/lib/libSHTOOLS.a ftypes.o SHTOOLS.o FFTW3.o PlanetsConstants.o CilmPlus.\r\n            o CilmMinus.o ComputeDG82.o ComputeDm.o DHaj.o djpi2.o BAtoHilm.o MakeGrid2D.o GLQGridCoord.o MakeGridPoint.o MakeGridPointC.o PlBar.o PlBar_d1.o PLegendre.o PLegendre_d1.o PLegendreA.o PLegendreA_d\r\n            1.o PlmBar.o PlmBar_d1.o PlmIndex.o PlmSchmidt.o PlmSchmidt_d1.o PlSchmidt.o PlSchmidt_d1.o PreGLQ.o Random.o SHAdmitCorr.o SHBias.o SHBiasK.o SHConvertCoef.o SHFindLWin.o SHGLQ.o SHLocalizedAdmitCo\r\n            rr.o SHMultiply.o SHMultiTaperCSE.o SHMultiTaperSE.o SHPowerSpectra.o SHRead.o SHReadJPL.o SHReturnTapersM.o SHRotateCoef.o SHRotateRealCoef.o SphericalCapCoef.o Wigner3j.o DownContFilter.o SHRead2.\r\n            o MakeGeoidGrid.o MakeCircleCoord.o SHMTCouplingMatrix.o SHReturnTapers.o SHSjkPG.o PlON.o PlON_d1.o PlmON.o PlmON_d1.o SHConfidence.o SHMagPowerSpectra.o SHPowerSpectraC.o SHBiasAdmitCorr.o SHCilmT\r\n            oVector.o YilmIndexVector.o ComputeDMap.o SHReturnTapersMap.o Curve2Mask.o MakeEllipseCoord.o CilmPlusRhoH.o CilmMinusRhoH.o BAtoHilmRhoH.o NormalGravity.o SHMultiTaperMaskSE.o SHMultiTaperMaskCSE.o\r\n             SHBiasKMask.o SHRotateTapers.o SlepianCoeffs.o SlepianCoeffsToSH.o SHSCouplingMatrix.o SHMTVar.o SHSlepianVar.o SHSCouplingMatrixCap.o cWrapper.o MakeGravGridPoint.o MakeMagGridPoint.o MakeGradient\r\n            DH.o EigValSym.o EigValVecSym.o EigValVecSymTri.o SHExpandLSQ.o SHMTDebias.o SHMTVarOpt.o MakeGridDH.o MakeGridDHC.o MakeGridGLQ.o MakeGridGLQC.o SHExpandDH.o SHExpandDHC.o SHExpandGLQ.o SHExpandGLQ\r\n            C.o MakeGravGradGridDH.o MakeGravGridDH.o MakeMagGridDH.o MakeMagGradGridDH.o\r\n     123    make[1]: libtool: Command not found\r\n  >> 124    make[1]: *** [/att/nobackup/sberton2/.tmp/spack-stage/spack-stage-shtools-4.8-3uji7smuqkz5wxgf2x7alaii6onev5zw/spack-src/lib/libSHTOOLS.a] Error 127\r\n     125    make[1]: Leaving directory `/att/gpfsfs/briskfs01/ppl/sberton2/.tmp/spack-stage/spack-stage-shtools-4.8-3uji7smuqkz5wxgf2x7alaii6onev5zw/spack-src/src'\r\n  >> 126    make: *** [fortran] Error 2\r\n```\r\nI also tried different compilers (gcc@11.1.0) and versions (shtools@4.5 also ends with an error, though with a different one ). It would be great if @eschnett could have a look at this. Thanks!\n\n### General information\n\n- [X] I have run `spack debug report` and reported the version of Spack/Python/Platform\n- [X] I have run `spack maintainers <name-of-the-package>` and **@mentioned** any maintainers\n- [X] I have uploaded the build log and environment files\n- [X] I have searched the issues of this repo and believe this is not a duplicate",
    "user": "steo85it",
    "url": "https://api.github.com/repos/spack/spack/issues/26993",
    "updated_at": "2021-11-03 22:33:52",
    "created_at": "2021-10-27 19:47:40",
    "closed_at": "2021-11-03 22:33:52",
    "state": "closed",
    "title": "Installation issue: shtools",
    "number": 26993,
    "milestone": null,
    "labels": [
        "build-error"
    ],
    "id": 1037799467,
    "html_url": "https://github.com/spack/spack/issues/26993",
    "assignees": [],
    "comments": 7
}