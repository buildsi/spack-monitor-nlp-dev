{
    "body": "### Steps to reproduce\n\n```console\r\n$ echo 'packages:\r\n  all:\r\n    providers:\r\n      mpi: [mpich]' > etc/spack/packages.yaml\r\n$ spack spec -I mpi\r\n```\n\n### Error message\n\n`spack spec -I mpi` results in:\r\n```\r\n -   openmpi@4.1.1%gcc@11.2.1~atomics~cuda~cxx~cxx_exceptions+gpfs~internal-hwloc~java~legacylaunchers~lustre~memchecker~pmi~pmix~singularity~sqlite3+static~thread_multiple+vt+wrapper-rpath fabrics=none schedulers=none arch=linux-fedora34-zen2\r\n...\r\n```\r\nIt works correctly if I switch back to the old concretizer.\n\n### Information on your system\n\n* **Spack:** 0.16.3-4764-da31c7e894\r\n* **Python:** 3.9.7\r\n* **Platform:** linux-fedora34-zen2\r\n* **Concretizer:** clingo\n\n### General information\n\n- [X] I have run `spack debug report` and reported the version of Spack/Python/Platform\n- [X] I have searched the issues of this repo and believe this is not a duplicate\n- [X] I have run the failing commands in debug mode and reported the output",
    "user": "michaelkuhn",
    "url": "https://api.github.com/repos/spack/spack/issues/26598",
    "updated_at": "2021-10-12 12:15:48",
    "created_at": "2021-10-08 08:49:58",
    "closed_at": "2021-10-12 12:15:48",
    "state": "closed",
    "title": "Preferences are not taken into account when installing virtual packages from command line",
    "number": 26598,
    "milestone": null,
    "labels": [
        "bug",
        "impact-low"
    ],
    "id": 1020853377,
    "html_url": "https://github.com/spack/spack/issues/26598",
    "assignees": [
        "alalazo"
    ],
    "comments": 6
}