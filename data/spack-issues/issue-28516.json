{
    "body": "### Steps to reproduce\n\nTrying to concretize this environment:\r\n```yaml\r\nspack:\r\n  concretization: together\r\n  view: false\r\n  specs:\r\n  - nalu-wind@8200f4e659bd6c0bcf6f8a0bd0c7ae3d5708e65b+tioga\r\n  - tioga@73a690616d4ca6478a3968fb6b6de3acd92bc71b\r\n  - trilinos@527e5c342119758cf22409a69c4b2fa508c0a12c\r\n  ```\r\n  Where `nalu-wind`'s hash comes from the `master` branch, `trilinos` comes from the `develop` branch, and `tioga` comes from the `exawind` branch which is linked to the `develop` version.\r\n  \r\n  It doesn't work with either of the dependencies.  \r\n  \r\n  I'm not sure if it is related to #28294 \r\n  \r\n  Pinging @becker33 and @vsoch \n\n### Error message\n\n```console\r\n# spack -d concretize -f\r\n==> [2022-01-19-19:44:43.467151] Reading config file /Users/psakiev/soft/spack-manager/spack/etc/spack/defaults/config.yaml\r\n==> [2022-01-19-19:44:43.487790] Reading config file /Users/psakiev/soft/spack-manager/spack/etc/spack/config.yaml\r\n==> [2022-01-19-19:44:43.495971] Reading config file /Users/psakiev/soft/spack-manager/environments/exawind/snapshots/skylake/hash/spack.yaml\r\n==> [2022-01-19-19:44:43.498108] Using environment '/Users/psakiev/soft/spack-manager/environments/exawind/snapshots/skylake/hash'\r\n==> [2022-01-19-19:44:43.502374] Imported concretize from built-in commands\r\n==> [2022-01-19-19:44:43.503042] Imported concretize from built-in commands\r\n==> [2022-01-19-19:44:43.506358] Reading config file /Users/psakiev/soft/spack-manager/spack/etc/spack/defaults/repos.yaml\r\n==> [2022-01-19-19:44:43.509292] Reading config file /Users/psakiev/soft/spack-manager/spack/etc/spack/repos.yaml\r\n==> [2022-01-19-19:44:43.810562] Reading config file /Users/psakiev/soft/spack-manager/spack/etc/spack/defaults/bootstrap.yaml\r\n==> [2022-01-19-19:44:43.817061] Deactivated environment '/Users/psakiev/soft/spack-manager/environments/exawind/snapshots/skylake/hash'\r\n==> [2022-01-19-19:44:43.820122] Reading config file /Users/psakiev/soft/spack-manager/spack/etc/spack/defaults/config.yaml\r\n==> [2022-01-19-19:44:43.836216] Reading config file /Users/psakiev/soft/spack-manager/spack/etc/spack/config.yaml\r\n==> [2022-01-19-19:44:43.837783] DATABASE LOCK TIMEOUT: 3s\r\n==> [2022-01-19-19:44:43.837853] PACKAGE LOCK TIMEOUT: No timeout\r\n==> [2022-01-19-19:44:43.838258] Reading config file /Users/psakiev/soft/spack-manager/spack/etc/spack/defaults/bootstrap.yaml\r\n==> [2022-01-19-19:44:43.845916] DATABASE LOCK TIMEOUT: 3s\r\n==> [2022-01-19-19:44:43.845994] PACKAGE LOCK TIMEOUT: No timeout\r\n==> [2022-01-19-19:44:43.846077] [BOOTSTRAP CONFIG SCOPE] name=_builtin\r\n==> [2022-01-19-19:44:43.846463] [BOOTSTRAP CONFIG SCOPE] name=defaults, path=/Users/psakiev/soft/spack-manager/spack/etc/spack/defaults\r\n==> [2022-01-19-19:44:43.846514] [BOOTSTRAP CONFIG SCOPE] name=defaults/darwin, path=/Users/psakiev/soft/spack-manager/spack/etc/spack/defaults/darwin\r\n==> [2022-01-19-19:44:43.846568] [BOOTSTRAP CONFIG SCOPE] name=bootstrap, path=/Users/psakiev/.spack/bootstrap/config\r\n==> [2022-01-19-19:44:43.846631] [BOOTSTRAP CONFIG SCOPE] name=bootstrap/darwin, path=/Users/psakiev/.spack/bootstrap/config/darwin\r\n==> [2022-01-19-19:44:43.847852] Reading config file /Users/psakiev/.spack/bootstrap/config/darwin/compilers.yaml\r\n==> [2022-01-19-19:44:43.912449] [BOOTSTRAP ROOT SPEC] clingo-bootstrap@spack+python %apple-clang target=x86_64\r\n==> [2022-01-19-19:44:43.912622] [BOOTSTRAP MODULE clingo] Try importing from Python\r\n==> [2022-01-19-19:44:43.913258] Reading config file /Users/psakiev/soft/spack-manager/spack/etc/spack/defaults/bootstrap.yaml\r\n==> [2022-01-19-19:44:44.586439] Reading config file /Users/psakiev/soft/spack-manager/spack/etc/spack/defaults/config.yaml\r\n==> [2022-01-19-19:44:44.702192] [BOOTSTRAP MODULE clingo] The installed spec \"clingo-bootstrap@spack+python %apple-clang target=x86_64 ^python@3.9 /omsvlh5v6fi2saw5qyqvzsbvqpvrf5yw\" provides the \"clingo\" Python module\r\n==> [2022-01-19-19:44:44.703522] Reading config file /Users/psakiev/soft/spack-manager/spack/etc/spack/defaults/config.yaml\r\n==> [2022-01-19-19:44:44.722873] Reading config file /Users/psakiev/soft/spack-manager/spack/etc/spack/config.yaml\r\n==> [2022-01-19-19:44:44.726170] Reading config file /Users/psakiev/soft/spack-manager/environments/exawind/snapshots/skylake/hash/spack.yaml\r\n==> [2022-01-19-19:44:44.728211] Using environment '/Users/psakiev/soft/spack-manager/environments/exawind/snapshots/skylake/hash'\r\n==> [2022-01-19-19:44:47.485340] Reading config file /Users/psakiev/soft/spack-manager/spack/etc/spack/darwin/compilers.yaml\r\n==> [2022-01-19-19:44:47.503610] Reading config file /Users/psakiev/soft/spack-manager/spack/etc/spack/defaults/packages.yaml\r\n==> [2022-01-19-19:44:47.531319] Reading config file /Users/psakiev/soft/spack-manager/spack/etc/spack/defaults/darwin/packages.yaml\r\n==> [2022-01-19-19:44:57.824053] UnsatisfiableSpecError: (nalu-wind@8200f4e659bd6c0bcf6f8a0bd0c7ae3d5708e65b+tioga, tioga@73a690616d4ca6478a3968fb6b6de3acd92bc71b, trilinos@527e5c342119758cf22409a69c4b2fa508c0a12c) is unsatisfiable, errors are:\r\n  no version satisfies the given constraints\r\n\r\n    To see full clingo unsat cores, re-run with `spack --show-cores=full`\r\n    For full, subset-minimal unsat cores, re-run with `spack --show-cores=minimized\r\n    Warning: This may take (up to) hours for some specs\r\n==> [2022-01-19-19:44:57.824097] Error: (nalu-wind@8200f4e659bd6c0bcf6f8a0bd0c7ae3d5708e65b+tioga, tioga@73a690616d4ca6478a3968fb6b6de3acd92bc71b, trilinos@527e5c342119758cf22409a69c4b2fa508c0a12c) is unsatisfiable, errors are:\r\n  no version satisfies the given constraints\r\n\r\n    To see full clingo unsat cores, re-run with `spack --show-cores=full`\r\n    For full, subset-minimal unsat cores, re-run with `spack --show-cores=minimized\r\n    Warning: This may take (up to) hours for some specs\r\nTraceback (most recent call last):\r\n  File \"/Users/psakiev/soft/spack-manager/spack/lib/spack/spack/main.py\", line 900, in main\r\n    return _main(argv)\r\n  File \"/Users/psakiev/soft/spack-manager/spack/lib/spack/spack/main.py\", line 883, in _main\r\n    return _invoke_command(command, parser, args, unknown)\r\n  File \"/Users/psakiev/soft/spack-manager/spack/lib/spack/spack/main.py\", line 553, in _invoke_command\r\n    return_val = command(parser, args)\r\n  File \"/Users/psakiev/soft/spack-manager/spack/lib/spack/spack/cmd/concretize.py\", line 39, in concretize\r\n    concretized_specs = env.concretize(\r\n  File \"/Users/psakiev/soft/spack-manager/spack/lib/spack/spack/environment/environment.py\", line 1115, in concretize\r\n    return self._concretize_together(tests=tests, reuse=reuse)\r\n  File \"/Users/psakiev/soft/spack-manager/spack/lib/spack/spack/environment/environment.py\", line 1155, in _concretize_together\r\n    concrete_specs = spack.concretize.concretize_specs_together(\r\n  File \"/Users/psakiev/soft/spack-manager/spack/lib/spack/spack/concretize.py\", line 746, in concretize_specs_together\r\n    return _concretize_specs_together_new(*abstract_specs, **kwargs)\r\n  File \"/Users/psakiev/soft/spack-manager/spack/lib/spack/spack/concretize.py\", line 756, in _concretize_specs_together_new\r\n    result.raise_if_unsat()\r\n  File \"/Users/psakiev/soft/spack-manager/spack/lib/spack/spack/solver/asp.py\", line 409, in raise_if_unsat\r\n    raise UnsatisfiableSpecError(constraints, conflicts=conflicts)\r\nspack.solver.asp.UnsatisfiableSpecError: (nalu-wind@8200f4e659bd6c0bcf6f8a0bd0c7ae3d5708e65b+tioga, tioga@73a690616d4ca6478a3968fb6b6de3acd92bc71b, trilinos@527e5c342119758cf22409a69c4b2fa508c0a12c) is unsatisfiable, errors are:\r\n  no version satisfies the given constraints\r\n\r\n    To see full clingo unsat cores, re-run with `spack --show-cores=full`\r\n    For full, subset-minimal unsat cores, re-run with `spack --show-cores=minimized\r\n    Warning: This may take (up to) hours for some specs\r\n ```\n\n### Information on your system\n\n* **Spack:** 0.17.1-681-fc9bfe5317\r\n* **Python:** 3.9.5\r\n* **Platform:** darwin-catalina-skylake\r\n* **Concretizer:** clingo\n\n### General information\n\n- [X] I have run `spack debug report` and reported the version of Spack/Python/Platform\n- [X] I have searched the issues of this repo and believe this is not a duplicate\n- [X] I have run the failing commands in debug mode and reported the output",
    "user": "psakievich",
    "url": "https://api.github.com/repos/spack/spack/issues/28516",
    "updated_at": "2022-01-26 02:13:41",
    "created_at": "2022-01-20 02:47:12",
    "closed_at": "None",
    "state": "open",
    "title": "Concretization failing with Git hash",
    "number": 28516,
    "milestone": null,
    "labels": [
        "bug",
        "versions",
        "triage"
    ],
    "id": 1108775105,
    "html_url": "https://github.com/spack/spack/issues/28516",
    "assignees": [
        "becker33"
    ],
    "comments": 8
}