{
    "body": "### Steps to reproduce the issue\r\n\r\n```console\r\n$ docker run -it -w /root ubuntu:18.04\r\n# apt-get update -qq && apt-get install -yqq python3 libpython3-dev git gcc g++ gfortran make file curl wget bison\r\n# git clone --depth 1 -b develop https://github.com/spack/spack.git\r\n# export PATH=\"/root/spack/bin:$PATH\"\r\n# wget -qO- \"https://cmake.org/files/v3.20/cmake-3.20.0-linux-x86_64.tar.gz\" | tar --strip-components=1 -xz -C /usr/local\r\n# spack external find --not-buildable cmake bison\r\n# spack --debug --stacktrace solve zlib\r\n\r\nlib/spack/spack/installer.py:281 ==> [2021-03-29-13:36:58.006190] No binary for clingo-bootstrap-spack-suq7ubei4oyla73cmpnsnph5akp4omif found: installing from source\r\nlib/spack/spack/package.py:1522 ==> [2021-03-29-13:36:58.028352] Warning: Missing a source id for python@3.6\r\nlib/spack/spack/compilers/__init__.py:741 ==> [2021-03-29-13:36:58.324252] [TOOLCHAIN] MATCH Gcc\r\nlib/spack/spack/util/executable.py:182 ==> [2021-03-29-13:36:58.338027] '/usr/bin/python3.6' '-c' 'from distutils.sysconfig import get_config_var; print(get_config_var('\"'\"'prefix'\"'\"'))'\r\nTraceback (most recent call last):\r\n  File \"<string>\", line 1, in <module>\r\nModuleNotFoundError: No module named 'distutils.sysconfig'\r\nlib/spack/spack/util/executable.py:182 ==> [2021-03-29-13:36:58.365391] '/usr/bin/python3.6' '-c' 'from distutils.sysconfig import get_config_var; print(get_config_var('\"'\"'CC'\"'\"'))'\r\nTraceback (most recent call last):\r\n  File \"<string>\", line 1, in <module>\r\nModuleNotFoundError: No module named 'distutils.sysconfig'\r\nlib/spack/spack/stage.py:313 ==> [2021-03-29-13:36:58.400220] Creating stage lock spack-stage-clingo-bootstrap-spack-suq7ubei4oyla73cmpnsnph5akp4omif\r\nlib/spack/spack/error.py:55 ==> [2021-03-29-13:36:58.409111] Error: ProcessError: Command exited with status 1:\r\n    '/usr/bin/python3.6' '-c' 'from distutils.sysconfig import get_config_var; print(get_config_var('\"'\"'CC'\"'\"'))'\r\nTraceback (most recent call last):\r\n  File \"/root/spack/lib/spack/spack/build_environment.py\", line 855, in _setup_pkg_and_run\r\n    context=context)\r\n  File \"/root/spack/lib/spack/spack/build_environment.py\", line 744, in setup_package\r\n    modifications_from_dependencies(pkg.spec, context=context)\r\n  File \"/root/spack/lib/spack/spack/build_environment.py\", line 831, in modifications_from_dependencies\r\n    getattr(dpkg, method)(env, spec)\r\n  File \"/root/spack/var/spack/repos/builtin/packages/python/package.py\", line 884, in setup_dependent_build_environment\r\n    config_link = self.get_config_var(link_var)\r\n  File \"/root/spack/var/spack/repos/builtin/packages/python/package.py\", line 680, in get_config_var\r\n  File \"/root/spack/lib/spack/spack/util/executable.py\", line 218, in __call__\r\n    proc.returncode, long_msg)\r\nspack.util.executable.ProcessError: Command exited with status 1:\r\n    '/usr/bin/python3.6' '-c' 'from distutils.sysconfig import get_config_var; print(get_config_var('\"'\"'CC'\"'\"'))'\r\nlib/spack/spack/installer.py:1301 ==> [2021-03-29-13:36:58.409507] Flagging clingo-bootstrap-spack-suq7ubei4oyla73cmpnsnph5akp4omif as failed: ProcessError: Command exited with status 1:\r\n    '/usr/bin/python3.6' '-c' 'from distutils.sysconfig import get_config_var; print(get_config_var('\"'\"'CC'\"'\"'))'\r\nlib/spack/spack/stage.py:313 ==> [2021-03-29-13:36:58.412691] Creating stage lock spack-stage-clingo-bootstrap-spack-suq7ubei4oyla73cmpnsnph5akp4omif\r\nlib/spack/spack/main.py:771 ==> [2021-03-29-13:36:58.412935] ChildError: ProcessError: Command exited with status 1:\r\n    '/usr/bin/python3.6' '-c' 'from distutils.sysconfig import get_config_var; print(get_config_var('\"'\"'CC'\"'\"'))'\r\n```\r\n\r\n### Error Message\r\n\r\n```\r\nModuleNotFoundError: No module named 'distutils.sysconfig'\r\n```\r\n\r\n### Information on your system\r\n\r\n* **Spack:** 0.16.1\r\n* **Python:** 3.6.9\r\n* **Platform:** linux-ubuntu18.04-zen2\r\n* **Concretizer:** original\r\n\r\nI have to install `python3-distutils` with apt to make this work:\r\n\r\n```\r\napt-get install python3-distutils\r\n```\r\n",
    "user": "haampie",
    "url": "https://api.github.com/repos/spack/spack/issues/22606",
    "updated_at": "2021-10-25 19:55:22",
    "created_at": "2021-03-29 13:39:16",
    "closed_at": "2021-08-18 18:14:03",
    "state": "closed",
    "title": "Bootstrapping on ubuntu:18.04, python3-distutils not installed by default",
    "number": 22606,
    "milestone": null,
    "labels": [
        "bug",
        "impact-low",
        "bootstrap"
    ],
    "id": 843380892,
    "html_url": "https://github.com/spack/spack/issues/22606",
    "assignees": [
        "alalazo"
    ],
    "comments": 11
}