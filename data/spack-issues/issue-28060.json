{
    "body": "### Steps to reproduce\n\npy-xrootdpyfs is not yet in Spack, see PR https://github.com/spack/spack/pull/28058\r\n\r\n```console\r\n$ git clone https://github.com/iarspider/spack.git -b add-py-xrootdpyfs\r\n$ spack spec py-xrootdpyfs\r\n```\n\n### Error message\n\nClingo:\r\n\r\n```console\r\nInput spec\r\n--------------------------------\r\npy-xrootdpyfs\r\n\r\nConcretized\r\n--------------------------------\r\n==> Error: py-xrootdpyfs is unsatisfiable, errors are:\r\n  no version satisfies the given constraints\r\n\r\n    To see full clingo unsat cores, re-run with `spack --show-cores=full`\r\n    For full, subset-minimal unsat cores, re-run with `spack --show-cores=minimized\r\n    Warning: This may take (up to) hours for some specs\r\n```\r\n\r\nOriginal:\r\n\r\n```console\r\nInput spec\r\n--------------------------------\r\npy-xrootdpyfs\r\n\r\nConcretized\r\n--------------------------------\r\n==> Warning: the original concretizer is currently being used.\r\n        Upgrade to \"clingo\" at your earliest convenience. The original concretizer will be removed from Spack starting at v0.18.0\r\npy-xrootdpyfs@0.2.2%gcc@9.3.0 arch=linux-ubuntu20.04-skylake_avx512\r\n    ^py-fs@1%gcc@9.3.0 arch=linux-ubuntu20.04-skylake_avx512\r\n        ^py-appdirs@1.4.4%gcc@9.3.0 arch=linux-ubuntu20.04-skylake_avx512\r\n            ^py-setuptools@59.4.0%gcc@9.3.0 arch=linux-ubuntu20.04-skylake_avx512\r\n                ^python@3.8.12%gcc@9.3.0+bz2+ctypes+dbm~debug+libxml2+lzma~nis~optimizations+pic+pyexpat+pythoncmd+readline+shared+sqlite3+ssl~tix~tkinter~ucs4+uuid+zlib patches=0d98e93189bc278fbc37a50ed7f183bd8aaf249a8e1670a465f0db6bb4f8cf87,4c2457325f2b608b1b6a2c63087df8c26e07db3e3d493caf36a56f0ecf6fb768,f2fd060afc4b4618fe8104c4c5d771f36dc55b1db5a4623785a4ea707ec72fb4 arch=linux-ubuntu20.04-skylake_avx512\r\n                    ^bzip2@1.0.8%gcc@9.3.0~debug~pic+shared arch=linux-ubuntu20.04-skylake_avx512\r\n                        ^diffutils@3.8%gcc@9.3.0 arch=linux-ubuntu20.04-skylake_avx512\r\n                            ^libiconv@1.16%gcc@9.3.0 libs=shared,static arch=linux-ubuntu20.04-skylake_avx512\r\n                    ^expat@2.4.1%gcc@9.3.0+libbsd arch=linux-ubuntu20.04-skylake_avx512\r\n                        ^libbsd@0.11.3%gcc@9.3.0 arch=linux-ubuntu20.04-skylake_avx512\r\n                            ^libmd@1.0.3%gcc@9.3.0 arch=linux-ubuntu20.04-skylake_avx512\r\n                    ^gdbm@1.19%gcc@9.3.0 arch=linux-ubuntu20.04-skylake_avx512\r\n                        ^readline@8.1%gcc@9.3.0 arch=linux-ubuntu20.04-skylake_avx512\r\n                            ^ncurses@6.2%gcc@9.3.0~symlinks+termlib abi=none arch=linux-ubuntu20.04-skylake_avx512\r\n                                ^pkgconf@1.8.0%gcc@9.3.0 arch=linux-ubuntu20.04-skylake_avx512\r\n                    ^gettext@0.21%gcc@9.3.0+bzip2+curses+git~libunistring+libxml2+tar+xz arch=linux-ubuntu20.04-skylake_avx512\r\n                        ^libxml2@2.9.12%gcc@9.3.0~python arch=linux-ubuntu20.04-skylake_avx512\r\n                            ^xz@5.2.5%gcc@9.3.0~pic libs=shared,static arch=linux-ubuntu20.04-skylake_avx512\r\n                            ^zlib@1.2.11%gcc@9.3.0+optimize+pic+shared arch=linux-ubuntu20.04-skylake_avx512\r\n                        ^tar@1.34%gcc@9.3.0 arch=linux-ubuntu20.04-skylake_avx512\r\n                    ^libffi@3.3%gcc@9.3.0 patches=26f26c6f29a7ce9bf370ad3ab2610f99365b4bdd7b82e7c31df41a3370d685c0 arch=linux-ubuntu20.04-skylake_avx512\r\n                    ^openssl@1.1.1l%gcc@9.3.0~docs certs=system arch=linux-ubuntu20.04-skylake_avx512\r\n                        ^perl@5.34.0%gcc@9.3.0+cpanm+shared+threads arch=linux-ubuntu20.04-skylake_avx512\r\n                            ^berkeley-db@18.1.40%gcc@9.3.0+cxx~docs+stl patches=b231fcc4d5cff05e5c3a4814f6a5af0e9a966428dc2176540d2c05aff41de522 arch=linux-ubuntu20.04-skylake_avx512\r\n                    ^sqlite@3.36.0%gcc@9.3.0+column_metadata+fts~functions~rtree arch=linux-ubuntu20.04-skylake_avx512\r\n                    ^util-linux-uuid@2.36.2%gcc@9.3.0 arch=linux-ubuntu20.04-skylake_avx512\r\n        ^py-pytz@2021.1%gcc@9.3.0 arch=linux-ubuntu20.04-skylake_avx512\r\n        ^py-six@1.16.0%gcc@9.3.0 arch=linux-ubuntu20.04-skylake_avx512\r\n    ^xrootd@4.12.6%gcc@9.3.0+http~ipo~krb5+python+readline build_type=RelWithDebInfo cxxstd=11 patches=0860cb804d7c67f67f1143049ed52568425add94368a124d60f3e7f21077ad1b arch=linux-ubuntu20.04-skylake_avx512\r\n        ^cmake@3.21.4%gcc@9.3.0~doc+ncurses+openssl+ownlibs~qt build_type=Release arch=linux-ubuntu20.04-skylake_avx512\r\n        ^curl@7.80.0%gcc@9.3.0~gssapi~ldap~libidn2~librtmp~libssh~libssh2~nghttp2 tls=openssl arch=linux-ubuntu20.04-skylake_avx512\r\n        ^json-c@0.15%gcc@9.3.0~ipo build_type=RelWithDebInfo arch=linux-ubuntu20.04-skylake_avx512\r\n```\n\n### Information on your system\n\n* **Spack:** 0.13.2-11102-d4bff0b9f5\r\n* **Python:** 3.8.10\r\n* **Platform:** linux-ubuntu20.04-skylake_avx512\r\n* **Concretizer:** clingo\r\n\r\n```console\r\n$ spack -d spec py-xrootdpyfs\r\nspack -d -c config:concretizer:clingo spec py-xrootdpyfs\r\n==> [2021-12-16-23:28:08.582023] Imported spec from built-in commands\r\n==> [2021-12-16-23:28:08.582907] Imported spec from built-in commands\r\nInput spec\r\n--------------------------------\r\npy-xrootdpyfs\r\n\r\nConcretized\r\n--------------------------------\r\n==> [2021-12-16-23:28:08.584710] Reading config file /root/spack/etc/spack/defaults/config.yaml\r\n==> [2021-12-16-23:28:08.610279] Reading config file /root/spack/etc/spack/defaults/bootstrap.yaml\r\n==> [2021-12-16-23:28:08.622917] Reading config file /root/spack/etc/spack/defaults/config.yaml\r\n==> [2021-12-16-23:28:08.648458] DATABASE LOCK TIMEOUT: 3s\r\n==> [2021-12-16-23:28:08.648566] PACKAGE LOCK TIMEOUT: No timeout\r\n==> [2021-12-16-23:28:08.649034] Reading config file /root/spack/etc/spack/defaults/bootstrap.yaml\r\n==> [2021-12-16-23:28:08.659645] DATABASE LOCK TIMEOUT: 3s\r\n==> [2021-12-16-23:28:08.659756] PACKAGE LOCK TIMEOUT: No timeout\r\n==> [2021-12-16-23:28:08.659885] [BOOTSTRAP CONFIG SCOPE] name=_builtin\r\n==> [2021-12-16-23:28:08.660348] [BOOTSTRAP CONFIG SCOPE] name=defaults, path=/root/spack/etc/spack/defaults\r\n==> [2021-12-16-23:28:08.660437] [BOOTSTRAP CONFIG SCOPE] name=defaults/linux, path=/root/spack/etc/spack/defaults/linux\r\n==> [2021-12-16-23:28:08.660494] [BOOTSTRAP CONFIG SCOPE] name=bootstrap, path=/root/.spack/bootstrap/config\r\n==> [2021-12-16-23:28:08.660539] [BOOTSTRAP CONFIG SCOPE] name=bootstrap/linux, path=/root/.spack/bootstrap/config/linux\r\n==> [2021-12-16-23:28:08.660968] Reading config file /root/.spack/bootstrap/config/linux/compilers.yaml\r\n==> [2021-12-16-23:28:08.692511] [BOOTSTRAP ROOT SPEC] clingo-bootstrap@spack+python %gcc target=x86_64\r\n==> [2021-12-16-23:28:08.692618] [BOOTSTRAP MODULE clingo] Try importing from Python\r\n==> [2021-12-16-23:28:08.692915] Reading config file /root/spack/etc/spack/defaults/bootstrap.yaml\r\n==> [2021-12-16-23:28:08.804050] Reading config file /root/spack/etc/spack/defaults/config.yaml\r\n==> [2021-12-16-23:28:08.922652] [BOOTSTRAP MODULE clingo] The installed spec \"clingo-bootstrap@spack+python %gcc target=x86_64 ^python@3.8 /kt74l7kjzrlp3cgtj2576o33mhsrgyrw\" provides the \"clingo\" Python module\r\n==> [2021-12-16-23:28:08.923070] Reading config file /root/spack/etc/spack/defaults/repos.yaml\r\n==> [2021-12-16-23:28:10.323952] Reading config file /root/.spack/linux/compilers.yaml\r\n==> [2021-12-16-23:28:10.333728] Reading config file /root/spack/etc/spack/defaults/config.yaml\r\n==> [2021-12-16-23:28:10.359001] Reading config file /root/spack/etc/spack/defaults/packages.yaml\r\n==> [2021-12-16-23:28:18.358031] UnsatisfiableSpecError: py-xrootdpyfs is unsatisfiable, errors are:\r\n  no version satisfies the given constraints\r\n\r\n    To see full clingo unsat cores, re-run with `spack --show-cores=full`\r\n    For full, subset-minimal unsat cores, re-run with `spack --show-cores=minimized\r\n    Warning: This may take (up to) hours for some specs\r\n==> [2021-12-16-23:28:18.358164] Error: py-xrootdpyfs is unsatisfiable, errors are:\r\n  no version satisfies the given constraints\r\n\r\n    To see full clingo unsat cores, re-run with `spack --show-cores=full`\r\n    For full, subset-minimal unsat cores, re-run with `spack --show-cores=minimized\r\n    Warning: This may take (up to) hours for some specs\r\nTraceback (most recent call last):\r\n  File \"/root/spack/lib/spack/spack/main.py\", line 900, in main\r\n    return _main(argv)\r\n  File \"/root/spack/lib/spack/spack/main.py\", line 883, in _main\r\n    return _invoke_command(command, parser, args, unknown)\r\n  File \"/root/spack/lib/spack/spack/main.py\", line 553, in _invoke_command\r\n    return_val = command(parser, args)\r\n  File \"/root/spack/lib/spack/spack/cmd/spec.py\", line 114, in spec\r\n    spec.concretize(**concretize_kwargs)\r\n  File \"/root/spack/lib/spack/spack/spec.py\", line 2648, in concretize\r\n    self._new_concretize(tests, reuse=reuse)\r\n  File \"/root/spack/lib/spack/spack/spec.py\", line 2620, in _new_concretize\r\n    result.raise_if_unsat()\r\n  File \"/root/spack/lib/spack/spack/solver/asp.py\", line 409, in raise_if_unsat\r\n    raise UnsatisfiableSpecError(constraints, conflicts=conflicts)\r\nspack.solver.asp.UnsatisfiableSpecError: py-xrootdpyfs is unsatisfiable, errors are:\r\n  no version satisfies the given constraints\r\n\r\n    To see full clingo unsat cores, re-run with `spack --show-cores=full`\r\n    For full, subset-minimal unsat cores, re-run with `spack --show-cores=minimized\r\n    Warning: This may take (up to) hours for some specs\r\n```\r\n\r\nI have started concretization with `--show-cores=minimized`, but probably won't get the output until tomorrow.\n\n### General information\n\n- [X] I have run `spack debug report` and reported the version of Spack/Python/Platform\n- [X] I have searched the issues of this repo and believe this is not a duplicate\n- [X] I have run the failing commands in debug mode and reported the output",
    "user": "iarspider",
    "url": "https://api.github.com/repos/spack/spack/issues/28060",
    "updated_at": "2021-12-17 08:43:21",
    "created_at": "2021-12-16 22:55:42",
    "closed_at": "2021-12-17 08:43:21",
    "state": "closed",
    "title": "Package py-xrootdpyfs does not concretize with clingo, does with original",
    "number": 28060,
    "milestone": null,
    "labels": [
        "bug",
        "concretization",
        "triage"
    ],
    "id": 1082711908,
    "html_url": "https://github.com/spack/spack/issues/28060",
    "assignees": [],
    "comments": 1
}