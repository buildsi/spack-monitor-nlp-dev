{
    "body": "@eugeneswalker @becker33 @wspear \r\n\r\nI can confirm this error is showing up in several packages and I have started building packages of `spack@develop` and i can confirm this error exists with develop branch.\r\n\r\nYou can check out the prototype of spack infrastructure at https://software.nersc.gov/NERSC/spack-infrastructure with pipelines running for different use-cases. \r\n\r\nSee https://software.nersc.gov/NERSC/spack-infrastructure/-/jobs/123884 for latest run for spack@develop on Perlmutter\r\n \r\n### Steps to reproduce the issue\r\n\r\nThis is an issue with building spack on perlmutter using e4s-21.11 branch\r\n\r\n```\r\n#!/bin/bash\r\nspack_root=/global/common/software/spackecp/perlmutter/e4s-21.11/spack\r\nrm -rf $spack_root\r\ngit clone git@github.com:spack/spack.git -b e4s-21.11 $spack_root\r\ncd $spack_root\r\n```\r\n\r\nThen use a spack environment to install some specs \r\n\r\n```\r\nspack:\r\n  view: false\r\n  config:\r\n    install_tree:\r\n      concretizer: clingo\r\n      root: /global/common/software/spackecp/perlmutter/e4s-21.11/software\r\n    module_roots:\r\n      tcl: /global/common/software/spackecp/perlmutter/e4s-21.11/modules/tcl\r\n      lmod: /global/common/software/spackecp/perlmutter/e4s-21.11/modules/lmod\r\n    build_stage: $tempdir/spack-stage\r\n    misc_cache: $tempdir/misc_cache\r\n  mirrors:\r\n    perlmutter-e4s-21.11: /global/common/software/spackecp/mirrors/perlmutter-e4s-21.11\r\n  compilers:\r\n  - compiler:\r\n      spec: gcc@9.3.0\r\n      paths:\r\n        cc: cc\r\n        cxx: CC\r\n        f77: ftn\r\n        fc: ftn\r\n      flags: {}\r\n      operating_system: sles15\r\n      target: any\r\n      modules:\r\n      - PrgEnv-gnu\r\n      - gcc/9.3.0\r\n      - craype-x86-rome\r\n      - libfabric\r\n      - cudatoolkit/21.9_11.4\r\n  - compiler:\r\n      spec: gcc@7.5.0\r\n      paths:\r\n        cc: /usr/bin/gcc\r\n        cxx: /usr/bin/g++\r\n        f77: /usr/bin/gfortran\r\n        fc: /usr/bin/gfortran\r\n      flags: {}\r\n      operating_system: sles15\r\n      target: any\r\n  - compiler:\r\n      spec: nvhpc@21.9\r\n      paths:\r\n        cc: cc\r\n        cxx: CC\r\n        f77: ftn\r\n        fc: ftn\r\n      operating_system: sles15\r\n      modules:\r\n      - cpe-cuda\r\n      - PrgEnv-nvidia\r\n      - nvidia/21.9\r\n      - craype-x86-rome\r\n      - libfabric\r\n      environment:\r\n        append_path:\r\n          LD_LIBRARY_PATH: /opt/nvidia/hpc_sdk/Linux_x86_64/21.9/cuda/11.4/lib64\r\n  modules:\r\n    default:\r\n      enable:\r\n      - lmod\r\n      lmod:\r\n        blacklist_implicits: true\r\n        hash_length: 0\r\n        core_compilers:\r\n        - gcc@7.5.0\r\n        hierarchy:\r\n        - mpi\r\n        all:\r\n          autoload: direct\r\n          environment:\r\n            set:\r\n              '{name}_ROOT': '{prefix}'\r\n          suffixes:\r\n            ^cuda: cuda\r\n        boost:\r\n          suffixes:\r\n            boost cxxstd=98: cxx98\r\n            boost cxxstd=17: cxx17\r\n            boost cxxstd=98 visibility=global: global\r\n        kokkos:\r\n          suffixes:\r\n            kokkos +openmp: openmp\r\n        py-warpx:\r\n          suffixes:\r\n            warpx dims=2: dims-2\r\n            warpx dims=3: dims-3\r\n            warpx dims=rz: dims-rz\r\n        warpx:\r\n          suffixes:\r\n            warpx dims=2: dims-2\r\n            warpx dims=3: dims-3\r\n            warpx dims=rz: dims-rz\r\n        defaults:\r\n        - amrex%gcc+mpi~cuda\r\n        - ginkgo%gcc~cuda\r\n        - heffte%gcc~cuda\r\n        - hypre%gcc~cuda\r\n        - magma%gcc\r\n        - mfem%gcc~cuda\r\n        - parsec%gcc~cuda\r\n        - petsc%gcc~cuda\r\n        - slate%gcc~cuda\r\n        - sundials%gcc~cuda\r\n        - superlu-dist%gcc~cuda\r\n        - tasmanian%gcc~cuda\r\n        - umpire%gcc~cuda\r\n        - upcxx%gcc\r\n        - zfp%gcc~cuda\r\n        whitelist:\r\n        - boost\r\n        - butterflypack\r\n        - cmake ~openssl arch=cray-sles15-zen2\r\n        - lua\r\n        - metis\r\n        - openblas\r\n        - parmetis\r\n        - tcl\r\n        - warpx\r\n        projections:\r\n          all: '{name}/{version}'\r\n    tcl:\r\n      hash_length: 0\r\n      naming_scheme: '{name}/{version}-{compiler.name}-{compiler.version}'\r\n      blacklist_implicits: true\r\n      defaults:\r\n      - amrex%gcc+mpi~cuda\r\n      - ginkgo%gcc~cuda\r\n      - heffte%gcc~cuda\r\n      - hypre%gcc~cuda\r\n      - magma%gcc\r\n      - mfem%gcc~cuda\r\n      - parsec%gcc~cuda\r\n      - petsc%gcc~cuda\r\n      - slate%gcc~cuda\r\n      - sundials%gcc~cuda\r\n      - superlu-dist%gcc~cuda\r\n      - tasmanian%gcc~cuda\r\n      - umpire%gcc~cuda\r\n      - upcxx%gcc\r\n      - zfp%gcc~cuda\r\n      all:\r\n        autoload: direct\r\n        conflict:\r\n        - '{name}'\r\n        environment:\r\n          set:\r\n            '{name}_ROOT': '{prefix}'\r\n        suffixes:\r\n          ^cray-mpich: mpi\r\n          ^cuda: cuda\r\n      boost:\r\n        suffixes:\r\n          boost cxxstd=98: cxx98\r\n          boost cxxstd=17: cxx17\r\n          boost cxxstd=98 visibility=global: global\r\n      kokkos:\r\n        suffixes:\r\n          kokkos +openmp: openmp\r\n      py-warpx:\r\n        suffixes:\r\n          warpx dims=2: dims-2\r\n          warpx dims=3: dims-3\r\n          warpx dims=rz: dims-rz\r\n      warpx:\r\n        suffixes:\r\n          warpx dims=2: dims-2\r\n          warpx dims=3: dims-3\r\n          warpx dims=rz: dims-rz\r\n      whitelist:\r\n      - boost\r\n      - butterflypack\r\n      - cmake ~openssl\r\n      - lua\r\n      - metis\r\n      - openblas\r\n      - parmetis\r\n      - tcl\r\n      - warpx\r\n      blacklist:\r\n      - gcc\r\n      - nvhpc\r\n      - cray-mpich\r\n  definitions:\r\n  - compilers: [gcc@9.3.0, nvhpc@21.9]\r\n  - mpis: [cray-mpich@8.1.11 %gcc@9.3.0, cray-mpich@8.1.11 %nvhpc@21.9]\r\n  - nvhpc_specs:\r\n    - amrex@21.11 +cuda cuda_arch=80 %nvhpc\r\n    - heffte@2.2.0 +cuda cuda_arch=80 %nvhpc\r\n    - hypre@2.23.0 +cuda cuda_arch=80 %nvhpc ^openblas%gcc\r\n    - magma@2.6.1 +cuda cuda_arch=80 %nvhpc ^openblas%gcc\r\n    - mfem@4.3.0 +cuda cuda_arch=80 %nvhpc ^openblas%gcc\r\n    - parsec@3.0.2012 +cuda cuda_arch=80 %nvhpc\r\n    - sundials@5.8.0 +cuda cuda_arch=80 %nvhpc\r\n    - superlu-dist@7.1.1 +cuda cuda_arch=80 %nvhpc\r\n    - tasmanian@7.7 +cuda cuda_arch=80 %nvhpc\r\n    - umpire@6.0.0 ~shared +cuda cuda_arch=80 %nvhpc\r\n    - upcxx@2021.9.0 +cuda %nvhpc\r\n    - zfp@0.5.5 +cuda cuda_arch=80 %nvhpc\r\n   #- ascent ~shared +cuda cuda_arch=80\r\n   #- axom +cuda cuda_arch=80 ^umpire ~shared\r\n   #- caliper@2.7.0 +cuda cuda_arch=80\r\n   #- chai@2.4.0 ~benchmarks ~tests +cuda cuda_arch=80 ^umpire ~shared\r\n   #- dealii +cuda cuda_arch=80 # gmsh\r\n   #- flecsi@2.1.0 +cuda cuda_arch=80 %nvhpc\r\n   #- ginkgo@1.4.0 +cuda cuda_arch=80\r\n   #- hpx@1.7.1 +cuda cuda_arch=80\r\n   #- kokkos-kernels@3.4.01 +cuda cuda_arch=80 ^kokkos +wrapper +cuda cuda_arch=80\r\n   #- kokkos@3.4.01 +wrapper +cuda cuda_arch=80\r\n   #- paraview +cuda cuda_arch=80\r\n   #- petsc@3.16.1 +cuda cuda_arch=80 %nvhpc\r\n   #- raja@0.14.0 +cuda cuda_arch=80\r\n   #- slate@2021.05.02 +cuda cuda_arch=80\r\n   #- slepc@3.16.0 +cuda cuda_arch=80 %nvhpc\r\n   #- strumpack@6.1.0 ~slate +cuda cuda_arch=80\r\n   #- trilinos@13.2.0 +cuda cuda_arch=80 %nvhpc\r\n   #- vtk-m@1.6.0 +cuda cuda_arch=80 %nvhpc\r\n  - cuda_specs:\r\n    - amrex@21.11 +cuda cuda_arch=80\r\n    - caliper@2.7.0 +cuda cuda_arch=80\r\n    - flecsi@2.1.0 +cuda cuda_arch=80\r\n    - ginkgo@1.4.0 +cuda cuda_arch=80\r\n    - heffte@2.2.0 +cuda cuda_arch=80\r\n    - hpx@1.7.1 +cuda cuda_arch=80\r\n    - hypre@2.23.0 +cuda cuda_arch=80\r\n    - kokkos-kernels@3.4.01 +cuda cuda_arch=80 ^kokkos +wrapper +cuda cuda_arch=80\r\n    - kokkos@3.4.01 +wrapper +cuda cuda_arch=80\r\n    - mfem@4.3.0 +cuda cuda_arch=80\r\n    - parsec@3.0.2012 +cuda cuda_arch=80\r\n    - petsc@3.16.1 +cuda cuda_arch=80\r\n    - slate@2021.05.02 +cuda cuda_arch=80\r\n    - slepc@3.16.0 +cuda cuda_arch=80\r\n    - strumpack@6.1.0 ~slate +cuda cuda_arch=80\r\n    - sundials@5.8.0 +cuda cuda_arch=80\r\n    - superlu-dist@7.1.1 +cuda cuda_arch=80\r\n    - tasmanian@7.7 +cuda cuda_arch=80\r\n    - umpire@6.0.0 ~shared +cuda cuda_arch=80\r\n    - upcxx@2021.9.0 +cuda\r\n    - vtk-m@1.6.0 +cuda cuda_arch=80\r\n    - zfp@0.5.5 +cuda cuda_arch=80\r\n   #- ascent ~shared +cuda cuda_arch=80\r\n   #- axom +cuda cuda_arch=80 ^umpire ~shared\r\n   #- chai@2.4.0 ~benchmarks ~tests +cuda cuda_arch=80 ^umpire ~shared\r\n   #- dealii +cuda cuda_arch=80 # gmsh\r\n   #- paraview +cuda cuda_arch=80\r\n   #- raja@0.14.0 +cuda cuda_arch=80\r\n   #- trilinos@13.2.0 +cuda cuda_arch=80\r\n   #\r\n  - cpu_specs:\r\n    - adios@1.13.1\r\n    - adios2@2.7.1\r\n    - aml@0.1.0\r\n    - amrex@21.11\r\n    - arborx@1.1\r\n    - argobots@1.1\r\n    - bolt@2.0\r\n    - caliper@2.7.0\r\n    - chai@2.4.0 ~benchmarks ~tests\r\n    - conduit@0.7.2\r\n    - darshan-runtime@3.3.1\r\n    - darshan-util@3.3.1\r\n    - datatransferkit@3.1-rc3\r\n    - dyninst@11.0.1\r\n    - exaworks@0.1.0\r\n    - faodel@1.2108.1\r\n    - flecsi@1.4.2\r\n    - flit@2.1.0\r\n    - fortrilinos@2.0.0\r\n    - gasnet@2021.9.0\r\n    - ginkgo@1.4.0\r\n    - globalarrays@5.8\r\n    - gmp@6.2.1\r\n    - gotcha@1.0.3\r\n    - hdf5@1.12.1\r\n    - heffte@2.2.0 +fftw\r\n    - hpctoolkit@2021.10.15\r\n    - hpx@1.7.1\r\n    - hypre@2.23.0\r\n    - kokkos@3.4.01 +openmp\r\n    - kokkos-kernels@3.4.01 +openmp\r\n    - legion@21.03.0\r\n    - libquo@1.3.1\r\n    - libunwind@1.5.0\r\n    - loki@0.1.7\r\n    - mercury@2.0.1\r\n    - metall@0.17\r\n    - mfem@4.3.0\r\n    - mpark-variant@1.4.0\r\n    - mpifileutils@0.11 ~xattr\r\n    - netlib-scalapack@2.1.0\r\n    - ninja@1.10.2\r\n    - omega-h@9.34.1\r\n    - openmpi@4.1.1\r\n    - openpmd-api@0.14.3 ^hdf5@1.12.0 +fortran +shared +hl api=default\r\n    - papi@6.0.0.1\r\n    - papyrus@1.0.1\r\n    - parallel-netcdf@1.12.2\r\n    - paraview@5.9.1\r\n    - parsec@3.0.2012 ~cuda\r\n    - pdt@3.25.1\r\n    - petsc@3.16.1\r\n    - phist@1.9.5\r\n    - precice@2.3.0\r\n    - pumi@2.2.6\r\n    - py-jupyterhub@1.4.1\r\n    - py-petsc4py@3.16.1\r\n    - py-warpx@21.11 ^warpx dims=2 ^hdf5@1.12.0 +fortran +shared +hl api=default\r\n    - py-warpx@21.11 ^warpx dims=3 ^hdf5@1.12.0 +fortran +shared +hl api=default\r\n    - py-warpx@21.11 ^warpx dims=rz ^hdf5@1.12.0 +fortran +shared +hl api=default\r\n    - qthreads@1.16 scheduler=distrib\r\n    - raja@0.14.0\r\n    - rempi@1.1.0\r\n    - scr@3.0rc2\r\n    - slate@2021.05.02 ~cuda\r\n    - slepc@3.16.0\r\n    - stc@0.9.0\r\n    - strumpack@6.1.0 ~slate\r\n    - sundials@5.8.0\r\n    - superlu@5.3.0 %gcc@9.3.0\r\n    - superlu-dist@7.1.1\r\n    - swig@4.0.2\r\n    - swig@4.0.2-fortran\r\n    - sz@2.1.12\r\n    - tasmanian@7.7\r\n    - tau@2.31 +mpi +python\r\n    - trilinos@13.0.1 +amesos +amesos2 +anasazi +aztec +belos +boost +epetra +epetraext\r\n      +ifpack +ifpack2 +intrepid +intrepid2 +isorropia +kokkos +ml +minitensor +muelu\r\n      +nox +piro +phalanx +rol +rythmos +sacado +stk +shards +shylu +stokhos +stratimikos\r\n      +teko +tempus +tpetra +trilinoscouplings +zoltan +zoltan2 +superlu-dist gotype=long_long\r\n    - turbine@1.3.0\r\n    - umap@2.1.0\r\n    - umpire\r\n    - unifyfs@0.9.1\r\n    - veloc@1.5\r\n    - vtk-m@1.6.0\r\n    - zfp@0.5.5\r\n    #- archer # https://github.com/spack/spack/issues/25050\r\n    #- ascent@0.7.1\r\n    #- axom@0.5.0\r\n    #- cabana@0.4.0\r\n    #- charliecloud@0.25\r\n    #- dealii\r\n    #- flux-core@0.30.0\r\n    #- geopm\r\n    #- libnrm@0.1.0\r\n    #- llvm@13.0.0 +all_targets +clang +compiler-rt +libcxx +lld +lldb +llvm_dylib +flang ~cuda\r\n    #- nvhpc@21.9\r\n    #- nrm@0.1.0\r\n    #- plasma@21.8.29\r\n    #- py-libensemble@0.8.0\r\n    #- qt\r\n    #- qwt\r\n    #- stat\r\n    #- upcxx@2021.9.0\r\n    #- variorum\r\n  specs:\r\n  - $mpis\r\n  - $nvhpc_specs\r\n  - $cpu_specs\r\n  - $cuda_specs\r\n  - matrix:\r\n    - [$compilers]\r\n    - ['%gcc@7.5.0']\r\n  - magma@2.6.1%gcc@9.3.0 +cuda cuda_arch=80\r\n  packages:\r\n    all:\r\n      compiler: [gcc@9.3.0, nvhpc@21.9]\r\n      providers:\r\n        blas: [openblas]\r\n        mpi: [cray-mpich]\r\n    bzip2:\r\n      version: [1.0.6]\r\n      buildable: false\r\n      externals:\r\n      - spec: bzip2@1.0.6\r\n        prefix: /usr\r\n    cray-mpich:\r\n      buildable: false\r\n      externals:\r\n      - spec: cray-mpich@8.1.11 %nvhpc@21.9\r\n        prefix: /opt/cray/pe/mpich/8.1.11/ofi/nvidia/20.7\r\n        modules:\r\n        - cray-mpich/8.1.11\r\n        - cudatoolkit/21.9_11.4\r\n      - spec: cray-mpich@8.1.11 %gcc@9.3.0\r\n        prefix: /opt/cray/pe/mpich/8.1.11/ofi/gnu/9.1\r\n        modules:\r\n        - cray-mpich/8.1.11\r\n        - cudatoolkit/21.9_11.4\r\n    cuda:\r\n      buildable: false\r\n      version: [11.4]\r\n      externals:\r\n      - spec: cuda@11.4\r\n        prefix: /opt/nvidia/hpc_sdk/Linux_x86_64/21.9/cuda/11.4\r\n        modules:\r\n        - cudatoolkit/21.9_11.4\r\n    diffutils:\r\n      version: [3.6]\r\n      buildable: false\r\n      externals:\r\n      - spec: diffutils@3.6\r\n        prefix: /usr\r\n    elfutils:\r\n      variants: +bzip2 ~nls +xz\r\n    fftw:\r\n      variants: +openmp\r\n    hdf5:\r\n      variants: +fortran +hl +shared api=v18\r\n      version: [1.12.1]\r\n    git:\r\n      version: [2.26.2]\r\n      buildable: false\r\n      externals:\r\n      - spec: git@2.26.2\r\n        prefix: /usr\r\n    gcc:\r\n      buildable: false\r\n      externals:\r\n      - spec: gcc@9.3.0 %gcc@7.5.0\r\n        modules:\r\n        - PrgEnv-gnu\r\n        - gcc/9.3.0\r\n        - craype-x86-rome\r\n        - cudatoolkit/21.9_11.4\r\n        - libfabric\r\n    libfabric:\r\n      buildable: false\r\n      variants: fabrics=sockets,tcp,udp,rxm\r\n      externals:\r\n      - spec: libfabric@1.11.0.4.75\r\n        prefix: /opt/cray/libfabric/1.11.0.4.75\r\n    libunwind:\r\n      variants: +pic +xz\r\n    mercury:\r\n      variants: ~bmi\r\n    mesa:\r\n      variants: ~llvm\r\n    mesa18:\r\n      variants: ~llvm\r\n    m4:\r\n      buildable: false\r\n      externals:\r\n      - spec: m4@1.4.18\r\n        prefix: /usr\r\n    mpich:\r\n      variants: ~wrapperrpath\r\n    ncurses:\r\n      variants: +termlib\r\n    nvhpc:\r\n      buildable: false\r\n      externals:\r\n      - spec: nvhpc@21.9 %gcc@7.5.0\r\n        modules:\r\n        - cpe-cuda\r\n        - PrgEnv-nvidia\r\n        - nvidia/21.9\r\n        - craype-x86-rome\r\n        - libfabric\r\n        - cudatoolkit/21.9_11.4\r\n    openssl:\r\n      version: [1.1.0i]\r\n      buildable: false\r\n      externals:\r\n      - spec: openssl@1.1.0i\r\n        prefix: /usr\r\n    openssh:\r\n      version: [7.9p1]\r\n      buildable: false\r\n      externals:\r\n      - spec: openssh@7.9p1\r\n        prefix: /usr\r\n    openblas:\r\n      variants: threads=openmp\r\n    openmpi:\r\n      version: [4.1.1]\r\n      variants: +cxx schedulers=slurm +pmix\r\n    pdsh:\r\n      buildable: false\r\n      externals:\r\n      - spec: pdsh@2.34\r\n        prefix: /usr\r\n    slurm:\r\n      buildable: false\r\n      version: [20-11-8-1]\r\n      externals:\r\n      - spec: slurm@20-11-8-1\r\n        prefix: /usr\r\n    tar:\r\n      version: [1.3]\r\n      buildable: false\r\n      externals:\r\n      - spec: tar@1.30\r\n        prefix: /usr\r\n    trilinos:\r\n      variants: +amesos +amesos2 +anasazi +aztec +belos +boost +epetra +epetraext\r\n        +ifpack +ifpack2 +intrepid +intrepid2 +isorropia +kokkos +ml +minitensor +muelu\r\n        +nox +piro +phalanx +rol +rythmos +sacado +stk +shards +shylu +stokhos +stratimikos\r\n        +teko +tempus +tpetra +trilinoscouplings +zoltan +zoltan2 +superlu-dist gotype=long_long\r\n    unzip:\r\n      version: [6.0]\r\n      buildable: false\r\n      externals:\r\n      - spec: unzip@6.0\r\n        prefix: /usr\r\n    xz:\r\n      variants: +pic\r\n    zsh:\r\n      version: [5.6]\r\n      buildable: false\r\n      externals:\r\n      - spec: zsh@5.6\r\n        prefix: /usr\r\n```\r\n\r\nMost packages were building but a handful of packages were failing at the same location\r\n\r\nsundials:  @gardner48 \r\n```\r\n=> Installing sundials-5.8.0-2qeczlrfc6yxo2cmganbudfhukymwwzp\r\n==> No binary for sundials-5.8.0-2qeczlrfc6yxo2cmganbudfhukymwwzp found: installing from source\r\n==> Error: TypeError: expected str, bytes or os.PathLike object, not NoneType\r\n\r\n/global/common/software/spackecp/perlmutter/e4s-21.11/spack/lib/spack/spack/build_environment.py:1044, in _setup_pkg_and_run:\r\n       1041        tb_string = traceback.format_exc()\r\n       1042\r\n       1043        # build up some context from the offending package so we can\r\n  >>   1044        # show that, too.\r\n       1045        package_context = get_package_context(tb)\r\n       1046\r\n       1047        logfile = None\r\n```\r\n\r\namrex: @etpalmer63 @WeiqunZhang @ax3l \r\n```\r\n==> Installing amrex-21.11-smjaubqhorstjhbgblfonk4a4t7bonae\r\n==> No binary for amrex-21.11-smjaubqhorstjhbgblfonk4a4t7bonae found: installing from source\r\n==> Error: TypeError: expected str, bytes or os.PathLike object, not NoneType\r\n\r\n/global/common/software/spackecp/perlmutter/e4s-21.11/spack/lib/spack/spack/build_environment.py:1044, in _setup_pkg_and_run:\r\n       1041        tb_string = traceback.format_exc()\r\n       1042\r\n       1043        # build up some context from the offending package so we can\r\n  >>   1044        # show that, too.\r\n       1045        package_context = get_package_context(tb)\r\n       1046\r\n       1047        logfile = None\r\n\r\n```\r\n\r\ntasmanian: @mkstoyanov\r\n\r\n```\r\n==> Installing tasmanian-7.7-owvqx2dnfomy6q7p4og63ctnrrz6tnyl\r\n==> No binary for tasmanian-7.7-owvqx2dnfomy6q7p4og63ctnrrz6tnyl found: installing from source\r\n==> Error: TypeError: expected str, bytes or os.PathLike object, not NoneType\r\n\r\n/global/common/software/spackecp/perlmutter/e4s-21.11/spack/lib/spack/spack/build_environment.py:1044, in _setup_pkg_and_run:\r\n       1041        tb_string = traceback.format_exc()\r\n       1042\r\n       1043        # build up some context from the offending package so we can\r\n  >>   1044        # show that, too.\r\n       1045        package_context = get_package_context(tb)\r\n       1046\r\n       1047        logfile = None\r\n```\r\n\r\nSome related issues i found regarding this error\r\n- https://github.com/spack/spack/issues/22268\r\n- https://github.com/spack/spack/issues/27984\r\n\r\nI make sure to remove my `~/.spack` and i also use `export SPACK_DISABLE_LOCAL_CONFIG=true` when i build my packages.\r\n\r\n### Information on your system\r\n\r\nsiddiq90@login16> vi spack.yaml \r\nsiddiq90@login16> spack debug report\r\n* **Spack:** 0.17.0-2-80412b23ae\r\n* **Python:** 3.6.13\r\n* **Platform:** cray-sles15-zen3\r\n* **Concretizer:** clingo\r\n\r\n\r\n### Additional information\r\n\r\n_No response_\r\n\r\n### General information\r\n\r\n- [X] I have run `spack debug report` and reported the version of Spack/Python/Platform\r\n- [X] I have run `spack maintainers <name-of-the-package>` and **@mentioned** any maintainers\r\n- [X] I have uploaded the build log and environment files\r\n- [X] I have searched the issues of this repo and believe this is not a duplicate",
    "user": "shahzebsiddiqui",
    "url": "https://api.github.com/repos/spack/spack/issues/28006",
    "updated_at": "2022-01-17 15:44:11",
    "created_at": "2021-12-14 19:20:26",
    "closed_at": "2022-01-17 15:44:11",
    "state": "closed",
    "title": "Installation issue: several spack packages affected by error: TypeError: expected str, bytes or os.PathLike object, not NoneType",
    "number": 28006,
    "milestone": null,
    "labels": [
        "cray",
        "build-error",
        "e4s"
    ],
    "id": 1080127108,
    "html_url": "https://github.com/spack/spack/issues/28006",
    "assignees": [],
    "comments": 9
}