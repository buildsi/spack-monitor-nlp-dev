{
    "body": "I am having a trouble to set up compilers on ORNL Titan.\r\n\r\nHere is my module environment.\r\n```shell\r\ntitan-ext1 teranish/spack> module list\r\nCurrently Loaded Modulefiles:\r\n  1) eswrap/1.3.3-1.020200.1278.0          11) hsi/5.0.2.p1                          21) alps/5.2.4-2.0502.9774.31.12.gem\r\n  2) craype-network-gemini                 12) DefApps                               22) rca/1.0.0-2.0502.60530.1.63.gem\r\n  3) gcc/5.3.0                             13) cray-libsci/16.11.1                   23) atp/2.0.5\r\n  4) craype/2.5.9                          14) udreg/2.3.2-1.0502.10518.2.17.gem     24) PrgEnv-gnu/5.2.82\r\n  5) cray-mpich/7.5.2                      15) ugni/6.0-1.0502.10863.8.28.gem        25) modules/3.2.10.5\r\n  6) craype-interlagos                     16) pmi/5.0.11                            26) cmake3/3.6.1\r\n  7) lustredu/1.4                          17) dmapp/7.0.1-1.0502.11080.8.74.gem     27) cray-hdf5-parallel/1.8.14\r\n  8) xalt/0.7.5                            18) gni-headers/4.0-1.0502.10859.7.8.gem  28) mercurial/2.6.3\r\n  9) module_msg/0.1                        19) xpmem/0.1-2.0502.64982.5.3.gem\r\n 10) modulator/1.2.0                       20) dvs/2.5_0.9.0-1.0502.2188.1.113.gem\r\n```\r\nThen, \r\n```shell\r\ntitan-ext1 teranish/spack> ./bin/spack -vd install libelf%gcc@5.3.0\r\n==> Reading config file /autofs/nccs-svm1_home1/teranish/spack/etc/spack/defaults/packages.yaml\r\n==> Reading config file /ccs/home/teranish/.spack/cray/packages.yaml\r\n==> READ LOCK: /ccs/home/teranish/.spack/cache/providers/.builtin-index.yaml.lock[0:0] [Acquiring]\r\n==> READ LOCK: /ccs/home/teranish/.spack/cache/providers/.builtin-index.yaml.lock[0:0] [Released]\r\n==> '/opt/cray/craype/2.5.9/bin/cc' '-V'\r\n==> '/usr/bin/cc' '-V'\r\n==> '/usr/bin/cc' '-V'\r\n==> '/opt/cray/craype/2.5.9/bin/ftn' '-V'\r\n==> Couldn't get version for compiler /usr/bin/cc\r\n  Command exited with status 1:\r\n    '/usr/bin/cc' '-V'\r\n==> '/opt/cray/craype/2.5.9/bin/CC' '-V'\r\n==> Couldn't get version for compiler /usr/bin/cc\r\n  Command exited with status 1:\r\n    '/usr/bin/cc' '-V'\r\n==> '/opt/cray/craype/2.5.9/bin/ftn' '-V'\r\n==> '/opt/gcc/5.3.0/bin/gcc' '--version'\r\n==> '/usr/bin/gcc-4.3' '--version'\r\n==> '/usr/bin/gcc-4.7' '--version'\r\n==> '/usr/bin/gcc' '--version'\r\n==> '/usr/bin/gcc-4.3' '--version'\r\n==> '/usr/bin/gcc-4.7' '--version'\r\n==> '/usr/bin/gcc' '--version'\r\n==> '/usr/bin/gcc-4.3' '-dumpversion'\r\n==> '/usr/bin/gcc-4.7' '-dumpversion'\r\n==> '/usr/bin/gcc-4.3' '-dumpversion'\r\n==> '/usr/bin/gcc' '-dumpversion'\r\n==> '/usr/bin/gcc-4.7' '-dumpversion'\r\n==> '/opt/gcc/5.3.0/bin/g++' '--version'\r\n==> '/usr/bin/gcc' '-dumpversion'\r\n==> '/usr/bin/g++' '--version'\r\n==> '/opt/gcc/5.3.0/bin/gcc' '-dumpversion'\r\n==> '/usr/bin/g++-4.3' '--version'\r\n==> Couldn't get version for compiler /opt/cray/craype/2.5.9/bin/cc\r\n  Command exited with status 1:\r\n    '/opt/cray/craype/2.5.9/bin/cc' '-V'\r\n==> '/usr/bin/g++-4.7' '--version'\r\n==> '/usr/bin/g++' '--version'\r\n==> '/usr/bin/g++-4.3' '--version'\r\n==> '/usr/bin/g++-4.7' '--version'\r\n==> '/usr/bin/g++' '-dumpversion'\r\n==> '/usr/bin/g++-4.3' '-dumpversion'\r\n==> Couldn't get version for compiler /opt/cray/craype/2.5.9/bin/ftn\r\n  Command exited with status 1:\r\n    '/opt/cray/craype/2.5.9/bin/ftn' '-V'\r\n==> '/usr/bin/g++-4.7' '-dumpversion'\r\n==> '/usr/bin/g++' '-dumpversion'\r\n==> '/opt/gcc/5.3.0/bin/g++' '-dumpversion'\r\n==> '/usr/bin/g++-4.3' '-dumpversion'\r\n==> '/opt/gcc/5.3.0/bin/gfortran' '-dumpversion'\r\n==> '/usr/bin/g++-4.7' '-dumpversion'\r\n==> Couldn't get version for compiler /opt/cray/craype/2.5.9/bin/CC\r\n  Command exited with status 1:\r\n    '/opt/cray/craype/2.5.9/bin/CC' '-V'\r\n==> '/usr/bin/gfortran-4.3' '-dumpversion'\r\n==> '/usr/bin/gfortran' '-dumpversion'\r\n==> '/usr/bin/gfortran-4.3' '-dumpversion'\r\n==> '/usr/bin/gfortran' '-dumpversion'\r\n==> Couldn't get version for compiler /opt/cray/craype/2.5.9/bin/ftn\r\n  Command exited with status 1:\r\n    '/opt/cray/craype/2.5.9/bin/ftn' '-V'\r\n==> '/opt/gcc/5.3.0/bin/gfortran' '-dumpversion'\r\n==> '/usr/bin/gfortran-4.3' '-dumpversion'\r\n==> '/usr/bin/gfortran' '-dumpversion'\r\n==> '/usr/bin/gfortran-4.3' '-dumpversion'\r\n==> '/usr/bin/gfortran' '-dumpversion'\r\n==> '/opt/modules/3.2.10.5/bin/modulecmd' 'python' 'avail' 'cce'\r\n==> '/opt/modules/3.2.10.5/bin/modulecmd' 'python' 'avail' 'gcc'\r\n==> '/opt/modules/3.2.10.5/bin/modulecmd' 'python' 'avail' 'intel'\r\n==> '/opt/modules/3.2.10.5/bin/modulecmd' 'python' 'avail' 'pgi'\r\nProcess Process-9:\r\nTraceback (most recent call last):\r\n  File \"/usr/lib64/python2.6/multiprocessing/process.py\", line 232, in _bootstrap\r\n    self.run()\r\n  File \"/usr/lib64/python2.6/multiprocessing/process.py\", line 88, in run\r\n    self._target(*self._args, **self._kwargs)\r\n  File \"/autofs/nccs-svm1_home1/teranish/spack/lib/spack/spack/util/multiproc.py\", line 37, in fun\r\n    pipe.send(f(x))\r\n  File \"/autofs/nccs-svm1_home1/teranish/spack/lib/spack/spack/operating_systems/cnl.py\", line 53, in <lambda>\r\nProcess Process-11:\r\nTraceback (most recent call last):\r\n  File \"/usr/lib64/python2.6/multiprocessing/process.py\", line 232, in _bootstrap\r\n    self.run()\r\n  File \"/usr/lib64/python2.6/multiprocessing/process.py\", line 88, in run\r\n    self._target(*self._args, **self._kwargs)\r\n  File \"/autofs/nccs-svm1_home1/teranish/spack/lib/spack/spack/util/multiproc.py\", line 37, in fun\r\n    lambda cmp_cls: self.find_compiler(cmp_cls, *paths), types)\r\n  File \"/autofs/nccs-svm1_home1/teranish/spack/lib/spack/spack/operating_systems/cnl.py\", line 76, in find_compiler\r\n    spack.spec.CompilerSpec(name + '@' + v),\r\n  File \"/autofs/nccs-svm1_home1/teranish/spack/lib/spack/spack/spec.py\", line 475, in __init__\r\n    pipe.send(f(x))\r\n  File \"/autofs/nccs-svm1_home1/teranish/spack/lib/spack/spack/operating_systems/cnl.py\", line 53, in <lambda>\r\n    lambda cmp_cls: self.find_compiler(cmp_cls, *paths), types)\r\n  File \"/autofs/nccs-svm1_home1/teranish/spack/lib/spack/spack/operating_systems/cnl.py\", line 76, in find_compiler\r\n    spack.spec.CompilerSpec(name + '@' + v),\r\n  File \"/autofs/nccs-svm1_home1/teranish/spack/lib/spack/spack/spec.py\", line 475, in __init__\r\n    c = SpecParser().parse_compiler(arg)\r\n  File \"/autofs/nccs-svm1_home1/teranish/spack/lib/spack/spack/spec.py\", line 3039, in parse_compiler\r\n    self.setup(text)\r\n  File \"/autofs/nccs-svm1_home1/teranish/spack/lib/spack/spack/parse.py\", line 166, in setup\r\n    self.push_tokens(self.lexer.lex(text))\r\n  File \"/autofs/nccs-svm1_home1/teranish/spack/lib/spack/spack/parse.py\", line 104, in lex\r\n    tokens = self.lex_word(word)\r\n  File \"/autofs/nccs-svm1_home1/teranish/spack/lib/spack/spack/parse.py\", line 97, in lex_word\r\n    raise LexError(\"Invalid character\", word, word.index(remainder))\r\nLexError: Invalid character\r\n    c = SpecParser().parse_compiler(arg)\r\n  File \"/autofs/nccs-svm1_home1/teranish/spack/lib/spack/spack/spec.py\", line 3039, in parse_compiler\r\n    self.setup(text)\r\n  File \"/autofs/nccs-svm1_home1/teranish/spack/lib/spack/spack/parse.py\", line 166, in setup\r\n    self.push_tokens(self.lexer.lex(text))\r\n  File \"/autofs/nccs-svm1_home1/teranish/spack/lib/spack/spack/parse.py\", line 104, in lex\r\n    tokens = self.lex_word(word)\r\n  File \"/autofs/nccs-svm1_home1/teranish/spack/lib/spack/spack/parse.py\", line 97, in lex_word\r\n    raise LexError(\"Invalid character\", word, word.index(remainder))\r\nLexError: Invalid character\r\nProcess Process-14:\r\nTraceback (most recent call last):\r\n  File \"/usr/lib64/python2.6/multiprocessing/process.py\", line 232, in _bootstrap\r\n    self.run()\r\n  File \"/usr/lib64/python2.6/multiprocessing/process.py\", line 88, in run\r\n    self._target(*self._args, **self._kwargs)\r\n  File \"/autofs/nccs-svm1_home1/teranish/spack/lib/spack/spack/util/multiproc.py\", line 37, in fun\r\n    pipe.send(f(x))\r\n  File \"/autofs/nccs-svm1_home1/teranish/spack/lib/spack/spack/operating_systems/cnl.py\", line 53, in <lambda>\r\n    lambda cmp_cls: self.find_compiler(cmp_cls, *paths), types)\r\n  File \"/autofs/nccs-svm1_home1/teranish/spack/lib/spack/spack/operating_systems/cnl.py\", line 76, in find_compiler\r\n    spack.spec.CompilerSpec(name + '@' + v),\r\n  File \"/autofs/nccs-svm1_home1/teranish/spack/lib/spack/spack/spec.py\", line 475, in __init__\r\n    c = SpecParser().parse_compiler(arg)\r\n  File \"/autofs/nccs-svm1_home1/teranish/spack/lib/spack/spack/spec.py\", line 3039, in parse_compiler\r\n    self.setup(text)\r\n  File \"/autofs/nccs-svm1_home1/teranish/spack/lib/spack/spack/parse.py\", line 166, in setup\r\n    self.push_tokens(self.lexer.lex(text))\r\n  File \"/autofs/nccs-svm1_home1/teranish/spack/lib/spack/spack/parse.py\", line 104, in lex\r\n    tokens = self.lex_word(word)\r\n  File \"/autofs/nccs-svm1_home1/teranish/spack/lib/spack/spack/parse.py\", line 97, in lex_word\r\n    raise LexError(\"Invalid character\", word, word.index(remainder))\r\nLexError: Invalid character\r\nProcess Process-12:\r\nTraceback (most recent call last):\r\n  File \"/usr/lib64/python2.6/multiprocessing/process.py\", line 232, in _bootstrap\r\n    self.run()\r\n  File \"/usr/lib64/python2.6/multiprocessing/process.py\", line 88, in run\r\n    self._target(*self._args, **self._kwargs)\r\n  File \"/autofs/nccs-svm1_home1/teranish/spack/lib/spack/spack/util/multiproc.py\", line 37, in fun\r\n    pipe.send(f(x))\r\n  File \"/autofs/nccs-svm1_home1/teranish/spack/lib/spack/spack/operating_systems/cnl.py\", line 53, in <lambda>\r\n    lambda cmp_cls: self.find_compiler(cmp_cls, *paths), types)\r\n  File \"/autofs/nccs-svm1_home1/teranish/spack/lib/spack/spack/operating_systems/cnl.py\", line 76, in find_compiler\r\n    spack.spec.CompilerSpec(name + '@' + v),\r\n  File \"/autofs/nccs-svm1_home1/teranish/spack/lib/spack/spack/spec.py\", line 475, in __init__\r\n    c = SpecParser().parse_compiler(arg)\r\n  File \"/autofs/nccs-svm1_home1/teranish/spack/lib/spack/spack/spec.py\", line 3039, in parse_compiler\r\n    self.setup(text)\r\n  File \"/autofs/nccs-svm1_home1/teranish/spack/lib/spack/spack/parse.py\", line 166, in setup\r\n    self.push_tokens(self.lexer.lex(text))\r\n  File \"/autofs/nccs-svm1_home1/teranish/spack/lib/spack/spack/parse.py\", line 104, in lex\r\n    tokens = self.lex_word(word)\r\n  File \"/autofs/nccs-svm1_home1/teranish/spack/lib/spack/spack/parse.py\", line 97, in lex_word\r\n    raise LexError(\"Invalid character\", word, word.index(remainder))\r\nLexError: Invalid character\r\n```\r\n",
    "user": "keitat",
    "url": "https://api.github.com/repos/spack/spack/issues/4513",
    "updated_at": "2020-08-23 18:33:38",
    "created_at": "2017-06-15 05:56:44",
    "closed_at": "None",
    "state": "open",
    "title": "Failing to configure compilers on ORNL Titan",
    "number": 4513,
    "milestone": null,
    "labels": [
        "cray",
        "compilers"
    ],
    "id": 236084874,
    "html_url": "https://github.com/spack/spack/issues/4513",
    "assignees": [
        "becker33"
    ],
    "comments": 5
}