{
    "body": "Building kokkos on Summit without the CMake build dependency explicitly specified resulted in the failure listed below. \r\n\r\nThis PR adds the cmake build dependency.  CMake 3.10 was specified as that is the minimum version required in the [master](\r\nhttps://github.com/kokkos/kokkos/blob/785d19f23ed4ba43354f9ecd7ef67cd5976ca4c8/CMakeLists.txt#L67) and [develop](\r\nhttps://github.com/kokkos/kokkos/blob/3b1fe5c6d92ea6c8325d9f313f809a19d1199592/CMakeLists.txt#L67) versions of kokkos when not building within Trilinos.\r\n\r\nI used [packages.yaml](https://github.com/wdmapp/wdmapp-config/blob/d64c9f004f515beaaf10c53c95f9c0e5bc714de9/summit/spack/packages.yaml) and [compilers.yaml](https://github.com/wdmapp/wdmapp-config/blob/d64c9f004f515beaaf10c53c95f9c0e5bc714de9/summit/spack/compilers.yaml) for the build.\r\n\r\n```\r\n=> 22086: Installing kokkos\r\n==> Cloning git repository: https://github.com/kokkos/kokkos.git on branch develop\r\n==> No checksum needed when fetching with git\r\n==> Already staged spack-stage-kokkos-develop-kjlyfthuo3ngfa5mxitzeehks3m7tcgt in /gpfs/alpine/fus123/scratch/cwsmith/spack-stage/spack-stage-kokkos-develop-kjlyfthuo3ngfa5mxitzeehks3m7tcgt\r\n==> No patches needed for kokkos\r\n==> 22086: kokkos: Building kokkos [Package]\r\n==> 22086: kokkos: Executing phase: 'install'\r\n==> Error: ProcessError: Command exited with status 127:\r\n    '/gpfs/alpine/fus123/scratch/cwsmith/spack-stage/spack-stage-kokkos-develop-kjlyfthuo3ngfa5mxitzeehks3m7tcgt/spack-src/generate_makefile.bash' '--prefix=/autofs/nccs-svm1_home1/cwsmith/develop/wdmapp/spack/opt/spack/linux-rhel7-power9le/gcc-8.1.1/kokkos-develop-kjlyfthuo3ngfa5mxitzeehks3m7tcgt' '--with-hwloc=/autofs/nccs-svm1_home1/cwsmith/develop/wdmapp/spack/opt/spack/linux-rhel7-power9le/gcc-8.1.1/hwloc-1.11.11-viiiqb6v4qru5rbfm4jskc7hl3f6477a' '--with-serial'\r\nSee build log for details:\r\n  /gpfs/alpine/fus123/scratch/cwsmith/spack-stage/spack-stage-kokkos-develop-kjlyfthuo3ngfa5mxitzeehks3m7tcgt/spack-build-out.txt\r\n\r\n==> Error: Failed to install kokkos due to ChildError: ProcessError: Command exited with status 127:\r\n    '/gpfs/alpine/fus123/scratch/cwsmith/spack-stage/spack-stage-kokkos-develop-kjlyfthuo3ngfa5mxitzeehks3m7tcgt/spack-src/generate_makefile.bash' '--prefix=/autofs/nccs-svm1_home1/cwsmith/develop/wdmapp/spack/opt/spack/linux-rhel7-power9le/gcc-8.1.1/kokkos-develop-kjlyfthuo3ngfa5mxitzeehks3m7tcgt' '--with-hwloc=/autofs/nccs-svm1_home1/cwsmith/develop/wdmapp/spack/opt/spack/linux-rhel7-power9le/gcc-8.1.1/hwloc-1.11.11-viiiqb6v4qru5rbfm4jskc7hl3f6477a' '--with-serial'See build log for details:\r\n  /gpfs/alpine/fus123/scratch/cwsmith/spack-stage/spack-stage-kokkos-develop-kjlyfthuo3ngfa5mxitzeehks3m7tcgt/spack-build-out.txt\r\nTraceback (most recent call last):\r\n  File \"/autofs/nccs-svm1_home1/cwsmith/develop/wdmapp/spack/lib/spack/spack/build_environment.py\", line 801, in child_process\r\n    return_value = function()\r\n  File \"/autofs/nccs-svm1_home1/cwsmith/develop/wdmapp/spack/lib/spack/spack/installer.py\", line 1034, in build_process\r\n    phase(pkg.spec, pkg.prefix)\r\n  File \"/autofs/nccs-svm1_home1/cwsmith/develop/wdmapp/spack/lib/spack/spack/package.py\", line 105, in phase_wrapper\r\n    phase(spec, prefix)\r\n  File \"/autofs/nccs-svm1_home1/cwsmith/develop/wdmapp/spack/var/spack/repos/builtin/packages/kokkos/package.py\", line 226, in install\r\n    make()\r\n  File \"/autofs/nccs-svm1_home1/cwsmith/develop/wdmapp/spack/lib/spack/spack/util/executable.py\", line 189, in __call__\r\n    proc.returncode, long_msg)\r\nProcessError: Command exited with status 127:\r\n    '/gpfs/alpine/fus123/scratch/cwsmith/spack-stage/spack-stage-kokkos-develop-kjlyfthuo3ngfa5mxitzeehks3m7tcgt/spack-src/generate_makefile.bash' '--prefix=/autofs/nccs-svm1_home1/cwsmith/develop/wdmapp/spack/opt/spack/linux-rhel7-power9le/gcc-8.1.1/kokkos-develop-kjlyfthuo3ngfa5mxitzeehks3m7tcgt' '--with-hwloc=/autofs/nccs-svm1_home1/cwsmith/develop/wdmapp/spack/opt/spack/linux-rhel7-power9le/gcc-8.1.1/hwloc-1.11.11-viiiqb6v4qru5rbfm4jskc7hl3f6477a' '--with-serial'\r\n\r\n==> Warning: Skipping build of coupler since kokkos failed\r\n\r\n```",
    "user": "cwsmith",
    "url": "https://api.github.com/repos/spack/spack/issues/16237",
    "updated_at": "2020-04-22 16:11:56",
    "created_at": "2020-04-22 14:46:32",
    "closed_at": "2020-04-22 16:11:56",
    "state": "closed",
    "title": "kokkos: cmake dependency needed for generate_makefile.bash",
    "number": 16237,
    "milestone": null,
    "labels": [
        "dependencies"
    ],
    "id": 604817357,
    "html_url": "https://github.com/spack/spack/pull/16237",
    "assignees": [],
    "comments": 0
}