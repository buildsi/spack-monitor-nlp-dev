{
    "body": "### Steps to reproduce the issue\n\n```console\r\n$ spack install --only package amber %gcc@9.4.0 ^/dnfeuuv ^/sncup57 ^/gmzpu3o ^/ac5i4dj ^/qj65ixk \r\n```\r\n\r\nI'm trying to amber and ambertools with gcc 9.4.0. But during the build stage the compilation fails with relocation against symbol error.\r\n\r\n```console\r\n/usr/bin/ld: readline/libreadline.a(termcap.o)(.text+0x343): unresolvable R_X86_64_32S relocation against symbol `ospeed'\r\n/usr/bin/ld: final link failed: Nonrepresentable section on output\r\n```\r\n My concretised specs are\r\n```console\r\namber@20%gcc@9.4.0~cuda+mpi~openmp~update~x11 patches=10780cb91a022b49ffdd7b1e2bf4a572fa4edb7745f0fc4e5d93b158d6168e42,143b6a09f774aeae8b002afffb00839212020139a11873a3a1a34d4a63fa995d,5ce6b534bab869b1e9bfefa353d7f578750e54fa72c8c9d74ddf129d993e78cf,8cf9707b3d08ad9242326f02d1861831ad782c9bfb0c46e7b1f0d4640571d5c1,8e46d5be28c002f560050a71f4851b01ef45a3eb66ac90d7e23553fae1370e68,9c973e3f8f33a271d60787e8862901e8f69e94e7d80cda1695f7fad7bc396093,a6fc6d5c8ba0aad3a8afe44d1539cc299ef78ab53721e28244198fd5425d14ad,acb359dc9b1bcff7e0f1965baa9f3f3dc18eeae99c49f1103c1e2986c0bbeed8,fd93c74f5ec80689023648cdd12b2c5fb21a3898c81ebc3fa256ef244932562a arch=linux-centos8-zen2\r\n    ^bison@3.8.2%gcc@9.4.0 cppflags=\"-fPIC\"  arch=linux-centos8-zen2\r\n        ^m4@1.4.18%gcc@9.4.0 cppflags=\"-fPIC\" +sigsegv patches=3877ab548f88597ab2327a2230ee048d2d07ace1062efe81fc92e91b7f39cd00,fc9b61654a3ba1a8d6cd78ce087e7c96366c290bc8d2c299f09828d793b853c8 arch=linux-centos8-zen2\r\n    ^bzip2@1.0.6%gcc@9.4.0~debug~pic+shared arch=linux-centos8-zen2\r\n    ^flex@2.6.3%gcc@9.4.0 cppflags=\"-fPIC\" +lex~nls arch=linux-centos8-zen2\r\n    ^netcdf-fortran@4.5.3%gcc@9.4.0 cppflags=\"-fPIC\" ~doc+pic+shared arch=linux-centos8-zen2\r\n        ^netcdf-c@4.8.1%gcc@9.4.0 cppflags=\"-fPIC\" ~dap~fsync~hdf4~jna+mpi~parallel-netcdf+pic+shared arch=linux-centos8-zen2\r\n            ^hdf5@1.10.7%gcc@9.4.0 cppflags=\"-fPIC\" +cxx+fortran+hl~ipo~java+mpi+shared~szip~threadsafe+tools api=default build_type=RelWithDebInfo arch=linux-centos8-zen2\r\n                ^numactl@2.0.14%gcc@9.4.0 cppflags=\"-fPIC\"  patches=4e1d78cbbb85de625bad28705e748856033eaafab92a66dffd383a3d7e00cc94,62fc8a8bf7665a60e8f4c93ebbd535647cebf74198f7afafec4c085a8825c006,ff37630df599cfabf0740518b91ec8daaf18e8f288b19adaae5364dc1f6b2296 arch=linux-centos8-zen2\r\n                ^openmpi@4.1.2%gcc@9.4.0 cppflags=\"-fPIC\" ~atomics~cuda~cxx~cxx_exceptions+gpfs~internal-hwloc~java~legacylaunchers+lustre~memchecker+pmi~pmix~singularity~sqlite3+static+thread_multiple+vt+wrapper-rpath fabrics=ucx schedulers=slurm arch=linux-centos8-zen2\r\n                    ^hwloc@2.6.0%gcc@9.4.0 cppflags=\"-fPIC\" ~cairo~cuda~gl~libudev+libxml2~netloc~nvml~opencl+pci~rocm+shared arch=linux-centos8-zen2\r\n                        ^libpciaccess@0.16%gcc@9.4.0 cppflags=\"-fPIC\"  arch=linux-centos8-zen2\r\n                        ^libxml2@2.9.12%gcc@9.4.0 cppflags=\"-fPIC\" ~python arch=linux-centos8-zen2\r\n                            ^libiconv@1.16%gcc@9.4.0 cppflags=\"-fPIC\"  libs=shared,static arch=linux-centos8-zen2\r\n                            ^xz@5.2.5%gcc@9.4.0 cppflags=\"-fPIC\" ~pic libs=shared,static arch=linux-centos8-zen2\r\n                            ^zlib@1.2.11%gcc@9.4.0 cppflags=\"-fPIC\" +optimize+pic+shared arch=linux-centos8-zen2\r\n                        ^ncurses@6.1.20180224%gcc@9.4.0 cppflags=\"-fPIC\" ~symlinks+termlib abi=6 arch=linux-centos8-zen2\r\n                    ^libevent@2.1.12%gcc@9.4.0 cppflags=\"-fPIC\" +openssl arch=linux-centos8-zen2\r\n                        ^openssl@1.1.1l%gcc@9.4.0 cppflags=\"-fPIC\" ~docs certs=system arch=linux-centos8-zen2\r\n                    ^lustre@2.12.7%gcc@9.4.0 cppflags=\"-fPIC\"  arch=linux-centos8-zen2\r\n                    ^openssh@8.0p1%gcc@9.4.0 cppflags=\"-fPIC\"  arch=linux-centos8-zen2\r\n                    ^slurm@21-08-0%gcc@9.4.0 cppflags=\"-fPIC\" ~gtk~hdf5~hwloc~mariadb~pmix+readline~restd sysconfdir=PREFIX/etc arch=linux-centos8-zen2\r\n                    ^ucx@1.11.2%gcc@9.4.0 cppflags=\"-fPIC\" ~assertions~cm~cma~cuda~dc~debug~dm~gdrcopy~ib-hw-tm~java~knem~logging+mlx5-dv+optimizations~parameter_checking+pic~rc~rocm+thread_multiple~ud~xpmem arch=linux-centos8-zen2\r\n                        ^rdma-core@34.0%gcc@9.4.0 cppflags=\"-fPIC\" ~ipo build_type=RelWithDebInfo arch=linux-centos8-zen2\r\n                            ^libnl@3.3.0%gcc@9.4.0 cppflags=\"-fPIC\"  arch=linux-centos8-zen2\r\n                ^pkgconf@1.8.0%gcc@9.4.0 cppflags=\"-fPIC\"  arch=linux-centos8-zen2\r\n```\r\n\r\nWhile the symbol `ospeed` is provided by ncurses library I have passed the `-fPIC` flag while compiling it to make sure it generates PIC code but unsure as to why it still throwing an error.\r\n\r\nAny help would be appreciated.\n\n### Information on your system\n\n* **Spack:** 0.17.0-354-645a7dc14c\r\n* **Python:** 3.6.8\r\n* **Platform:** linux-centos8-zen2\r\n* **Concretizer:** clingo\n\n### Additional information\n\n[spack-build-env.txt](https://github.com/spack/spack/files/7633319/spack-build-env.txt)\r\n[spack-build-out.txt](https://github.com/spack/spack/files/7633320/spack-build-out.txt)\r\n\r\n@hseara\n\n### General information\n\n- [X] I have run `spack debug report` and reported the version of Spack/Python/Platform\n- [X] I have run `spack maintainers <name-of-the-package>` and **@mentioned** any maintainers\n- [X] I have uploaded the build log and environment files\n- [X] I have searched the issues of this repo and believe this is not a duplicate",
    "user": "Nischay-Pro",
    "url": "https://api.github.com/repos/spack/spack/issues/27757",
    "updated_at": "2021-12-02 05:14:26",
    "created_at": "2021-12-02 05:14:26",
    "closed_at": "None",
    "state": "open",
    "title": "Installation issue: amber installation fails with unresolvable R_X86_64_32S relocation against symbol `ospeed'",
    "number": 27757,
    "milestone": null,
    "labels": [
        "build-error"
    ],
    "id": 1069139429,
    "html_url": "https://github.com/spack/spack/issues/27757",
    "assignees": [],
    "comments": 0
}