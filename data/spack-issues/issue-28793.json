{
    "body": "### Steps to reproduce\n\nWhen I am trying to install in an environment, the packages all build successfully, but when generating the view, I get ``Package conflict detected`` errors on the same package, I wonder whether this is a bug or something is wrong in my spec?\n\n### Error message\n\n```console\r\nlib/spack/spack/filesystem_view.py:643 ==> [2022-02-05-17:03:01.659629] Error: [/mnt/nfs4/node2/home/jiych/env/.spack-env/._view/bv3kugkyftl6fvchzphtznr2yruyq52j] Package conflict detected:\r\n   (Linked) numactl@2.0.14%gcc@10.3.0 patches=4e1d78cbbb85de625bad28705e748856033eaafab92a66dffd383a3d7e00cc94,62fc8a8bf7665a60e8f4c93ebbd535647cebf74198f7afafec4c085a8825c006,ff37630df599cfabf0740518b91ec8daaf18e8f288b19adaae5364dc1f6b2296 arch=linux-ubuntu20.04-zen2/v2t24i2\r\n(Specified) numactl@2.0.14%gcc@10.3.0 patches=4e1d78cbbb85de625bad28705e748856033eaafab92a66dffd383a3d7e00cc94,62fc8a8bf7665a60e8f4c93ebbd535647cebf74198f7afafec4c085a8825c006,ff37630df599cfabf0740518b91ec8daaf18e8f288b19adaae5364dc1f6b2296 arch=linux-ubuntu20.04-zen2/v2t24i2\r\nlib/spack/spack/filesystem_view.py:643 ==> [2022-02-05-17:03:01.660184] Error: [/mnt/nfs4/node2/home/jiych/env/.spack-env/._view/bv3kugkyftl6fvchzphtznr2yruyq52j] Package conflict detected:\r\n   (Linked) hwloc@2.7.0%gcc@10.3.0~cairo+cuda~gl~libudev+libxml2~netloc~nvml~opencl+pci~rocm+shared arch=linux-ubuntu20.04-zen2/y7nme4r\r\n(Specified) hwloc@2.7.0%gcc@10.3.0~cairo+cuda~gl~libudev+libxml2~netloc~nvml~opencl+pci~rocm+shared arch=linux-ubuntu20.04-zen2/y7nme4r\r\nlib/spack/spack/filesystem_view.py:643 ==> [2022-02-05-17:03:01.660653] Error: [/mnt/nfs4/node2/home/jiych/env/.spack-env/._view/bv3kugkyftl6fvchzphtznr2yruyq52j] Package conflict detected:\r\n   (Linked) hdf5@1.10.8%gcc@10.3.0~cxx~fortran+hl~ipo~java+mpi+shared~szip~threadsafe+tools api=default build_type=RelWithDebInfo arch=linux-ubuntu20.04-zen2/tncmghc\r\n(Specified) hdf5@1.10.8%gcc@10.3.0~cxx~fortran+hl~ipo~java+mpi+shared~szip~threadsafe+tools api=default build_type=RelWithDebInfo arch=linux-ubuntu20.04-zen2/tncmghc\r\nlib/spack/spack/filesystem_view.py:643 ==> [2022-02-05-17:03:01.661055] Error: [/mnt/nfs4/node2/home/jiych/env/.spack-env/._view/bv3kugkyftl6fvchzphtznr2yruyq52j] Package conflict detected:\r\n   (Linked) libnl@3.3.0%gcc@10.3.0 arch=linux-ubuntu20.04-zen2/3ap2aad\r\n(Specified) libnl@3.3.0%gcc@10.3.0 arch=linux-ubuntu20.04-zen2/3ap2aad\r\nlib/spack/spack/filesystem_view.py:643 ==> [2022-02-05-17:03:01.661447] Error: [/mnt/nfs4/node2/home/jiych/env/.spack-env/._view/bv3kugkyftl6fvchzphtznr2yruyq52j] Package conflict detected:\r\n   (Linked) libpciaccess@0.16%gcc@10.3.0 arch=linux-ubuntu20.04-zen2/pj3lkza\r\n(Specified) libpciaccess@0.16%gcc@10.3.0 arch=linux-ubuntu20.04-zen2/pj3lkza\r\nlib/spack/spack/filesystem_view.py:643 ==> [2022-02-05-17:03:01.661878] Error: [/mnt/nfs4/node2/home/jiych/env/.spack-env/._view/bv3kugkyftl6fvchzphtznr2yruyq52j] Package conflict detected:\r\n   (Linked) protobuf@3.12.3%gcc@10.3.0+shared build_type=Release arch=linux-ubuntu20.04-zen2/6lemm5n\r\n(Specified) protobuf@3.12.3%gcc@10.3.0+shared build_type=Release arch=linux-ubuntu20.04-zen2/6lemm5n\r\nlib/spack/spack/filesystem_view.py:643 ==> [2022-02-05-17:03:01.662314] Error: [/mnt/nfs4/node2/home/jiych/env/.spack-env/._view/bv3kugkyftl6fvchzphtznr2yruyq52j] Package conflict detected:\r\n   (Linked) re2@2021-06-01%gcc@10.3.0~ipo+pic+shared build_type=RelWithDebInfo arch=linux-ubuntu20.04-zen2/fytmuks\r\n(Specified) re2@2021-06-01%gcc@10.3.0~ipo+pic+shared build_type=RelWithDebInfo arch=linux-ubuntu20.04-zen2/fytmuks\r\nlib/spack/spack/filesystem_view.py:643 ==> [2022-02-05-17:03:01.662703] Error: [/mnt/nfs4/node2/home/jiych/env/.spack-env/._view/bv3kugkyftl6fvchzphtznr2yruyq52j] Package conflict detected:\r\n   (Linked) util-linux-uuid@2.36.2%gcc@10.3.0 arch=linux-ubuntu20.04-zen2/grghggy\r\n(Specified) util-linux-uuid@2.36.2%gcc@10.3.0 arch=linux-ubuntu20.04-zen2/grghggy\r\nlib/spack/spack/filesystem_view.py:643 ==> [2022-02-05-17:03:01.663126] Error: [/mnt/nfs4/node2/home/jiych/env/.spack-env/._view/bv3kugkyftl6fvchzphtznr2yruyq52j] Package conflict detected:\r\n   (Linked) libxml2@2.9.12%gcc@10.3.0~python arch=linux-ubuntu20.04-zen2/4hrlnlv\r\n(Specified) libxml2@2.9.12%gcc@10.3.0~python arch=linux-ubuntu20.04-zen2/4hrlnlv\r\nlib/spack/spack/filesystem_view.py:643 ==> [2022-02-05-17:03:01.663576] Error: [/mnt/nfs4/node2/home/jiych/env/.spack-env/._view/bv3kugkyftl6fvchzphtznr2yruyq52j] Package conflict detected:\r\n   (Linked) openblas@0.3.19%gcc@10.3.0~bignuma~consistent_fpcsr~ilp64+locking+pic+shared symbol_suffix=none threads=none arch=linux-ubuntu20.04-zen2/ixyrqkw\r\n(Specified) openblas@0.3.19%gcc@10.3.0~bignuma~consistent_fpcsr~ilp64+locking+pic+shared symbol_suffix=none threads=none arch=linux-ubuntu20.04-zen2/ixyrqkw\r\nlib/spack/spack/filesystem_view.py:643 ==> [2022-02-05-17:03:01.664064] Error: [/mnt/nfs4/node2/home/jiych/env/.spack-env/._view/bv3kugkyftl6fvchzphtznr2yruyq52j] Package conflict detected:\r\n   (Linked) openmpi@4.1.2%gcc@10.3.0~atomics+cuda+cxx~cxx_exceptions+gpfs~internal-hwloc~java~legacylaunchers~lustre~memchecker~pmi~pmix+romio~singularity~sqlite3+static+thread_multiple+vt+wrapper-rpath fabrics=hcoll,knem,ucx,xpmem schedulers=none arch=linux-ubuntu20.04-zen2/edxqazp\r\n(Specified) openmpi@4.1.2%gcc@10.3.0~atomics+cuda+cxx~cxx_exceptions+gpfs~internal-hwloc~java~legacylaunchers~lustre~memchecker~pmi~pmix+romio~singularity~sqlite3+static+thread_multiple+vt+wrapper-rpath fabrics=hcoll,knem,ucx,xpmem schedulers=none arch=linux-ubuntu20.04-zen2/edxqazp\r\nlib/spack/spack/filesystem_view.py:643 ==> [2022-02-05-17:03:01.664502] Error: [/mnt/nfs4/node2/home/jiych/env/.spack-env/._view/bv3kugkyftl6fvchzphtznr2yruyq52j] Package conflict detected:\r\n   (Linked) openssl@1.1.1m%gcc@10.3.0~docs certs=system arch=linux-ubuntu20.04-zen2/bwsnth4\r\n(Specified) openssl@1.1.1m%gcc@10.3.0~docs certs=system arch=linux-ubuntu20.04-zen2/bwsnth4\r\nlib/spack/spack/filesystem_view.py:643 ==> [2022-02-05-17:03:01.664980] Error: [/mnt/nfs4/node2/home/jiych/env/.spack-env/._view/bv3kugkyftl6fvchzphtznr2yruyq52j] Package conflict detected:\r\n   (Linked) python@3.9.9%gcc@10.3.0+bz2+ctypes+dbm~debug+ensurepip+libxml2+lzma~nis~optimizations+pic+pyexpat+pythoncmd+readline+shared+sqlite3+ssl~tix~tkinter~ucs4+uuid+zlib patches=0d98e93189bc278fbc37a50ed7f183bd8aaf249a8e1670a465f0db6bb4f8cf87,4c2457325f2b608b1b6a2c63087df8c26e07db3e3d493caf36a56f0ecf6fb768,f2fd060afc4b4618fe8104c4c5d771f36dc55b1db5a4623785a4ea707ec72fb4 arch=linux-ubuntu20.04-zen2/ffvrbtf\r\n(Specified) python@3.9.9%gcc@10.3.0+bz2+ctypes+dbm~debug+ensurepip+libxml2+lzma~nis~optimizations+pic+pyexpat+pythoncmd+readline+shared+sqlite3+ssl~tix~tkinter~ucs4+uuid+zlib patches=0d98e93189bc278fbc37a50ed7f183bd8aaf249a8e1670a465f0db6bb4f8cf87,4c2457325f2b608b1b6a2c63087df8c26e07db3e3d493caf36a56f0ecf6fb768,f2fd060afc4b4618fe8104c4c5d771f36dc55b1db5a4623785a4ea707ec72fb4 arch=linux-ubuntu20.04-zen2/ffvrbtf\r\nlib/spack/spack/filesystem_view.py:643 ==> [2022-02-05-17:03:01.665403] Error: [/mnt/nfs4/node2/home/jiych/env/.spack-env/._view/bv3kugkyftl6fvchzphtznr2yruyq52j] Package conflict detected:\r\n   (Linked) rdma-core@34.0%gcc@10.3.0~ipo build_type=RelWithDebInfo arch=linux-ubuntu20.04-zen2/ladyvja\r\n(Specified) rdma-core@34.0%gcc@10.3.0~ipo build_type=RelWithDebInfo arch=linux-ubuntu20.04-zen2/ladyvja\r\n```\n\n### Information on your system\n\n* **Spack:** 0.17.1-1066-932408ac2b\r\n* **Python:** 3.8.10\r\n* **Platform:** linux-ubuntu20.04-zen2\r\n* **Concretizer:** clingo\n\n### General information\n\n- [X] I have run `spack debug report` and reported the version of Spack/Python/Platform\n- [X] I have searched the issues of this repo and believe this is not a duplicate\n- [X] I have run the failing commands in debug mode and reported the output",
    "user": "asesidaa",
    "url": "https://api.github.com/repos/spack/spack/issues/28793",
    "updated_at": "2022-02-26 11:11:03",
    "created_at": "2022-02-05 09:06:14",
    "closed_at": "None",
    "state": "open",
    "title": "Package conflict detected on the same package/Package merge blocked by file",
    "number": 28793,
    "milestone": null,
    "labels": [
        "bug",
        "triage"
    ],
    "id": 1124877474,
    "html_url": "https://github.com/spack/spack/issues/28793",
    "assignees": [],
    "comments": 5
}