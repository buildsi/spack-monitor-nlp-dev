{
    "body": "Please let me know if you have ever heard of this problem, or have any clue of what I can do to figure this one out:\r\n\r\nOur HPC's default shell is tcsh.  Spack only works for us if we set our default path to bash.  I have already installed some software by just temporarily changing to bash and it has probably saved me 6 months worth of work in just one week, but that is sort of an embarrassing hack on our part.  I get an selinux error, but it does not create any record of that in the system error logs.  \r\n\r\nHere is the main error.  It is during an attempt to install netcdf-fortran, just the first package that I tried.  Below that is the output of the entire install attempt that includes the pieces that were successful:\r\n```console\r\n==> Created stage in /myhome/spack/var/spack/stage/m4-1.4.18-hhsvnbbpgbjmyko773df2mzmp5knybru\r\n/usr/bin/patch: setting attribute security.selinux for security.selinux: Permission denied\r\n==> Patch /myhome/spack/var/spack/repos/builtin/packages/m4/secure_snprintf.patch failed.\r\n==> Error: ProcessError: Command exited with status 2:\r\n    '/usr/bin/patch' '-s' '-p' '1' '-i' '/myhome/spack/var/spack/repos/builtin/packages/m4/secure_snprintf.patch' '-d' '.'\r\n```\r\nHere is from the beginning:\r\n```console\r\n$ ./spack install netcdf-fortran\r\n==> Installing libsigsegv\r\n==> Searching for binary cache of libsigsegv\r\n==> Warning: No Spack mirrors are currently configured\r\n==> No binary for libsigsegv found: installing from source\r\n==> Warning: A dependency has updated CPATH, this may lead pkg-config to assume that the package is part of the system includes and omit it when invoked with '--cflags'.\r\n==> Fetching https://ftpmirror.gnu.org/libsigsegv/libsigsegv-2.11.tar.gz\r\n######################################################################## 100.0%\r\n==> Staging archive: /myhome/spack/var/spack/stage/libsigsegv-2.11-qpmaxx6z62df4s4hwyehdwptv6kmrfhf/libsigsegv-2.11.tar.gz\r\n==> Created stage in /myhome/spack/var/spack/stage/libsigsegv-2.11-qpmaxx6z62df4s4hwyehdwptv6kmrfhf\r\n==> No patches needed for libsigsegv\r\n==> Building libsigsegv [AutotoolsPackage]\r\n==> Executing phase: 'autoreconf'\r\n==> Executing phase: 'configure'\r\n==> Executing phase: 'build'\r\n==> Executing phase: 'install'\r\n==> Successfully installed libsigsegv\r\n  Fetch: 0.89s.  Build: 11.22s.  Total: 12.11s.\r\n[+] /myhome/spack/opt/spack/linux-centos7-x86_64/gcc-4.8.5/libsigsegv-2.11-qpmaxx6z62df4s4hwyehdwptv6kmrfhf\r\n==> Installing m4\r\n==> Searching for binary cache of m4\r\n==> Warning: No Spack mirrors are currently configured\r\n==> No binary for m4 found: installing from source\r\n==> Warning: A dependency has updated CPATH, this may lead pkg-config to assume that the package is part of the system includes and omit it when invoked with '--cflags'.\r\n==> Fetching https://ftpmirror.gnu.org/m4/m4-1.4.18.tar.gz\r\n######################################################################## 100.0%\r\n==> Fetching https://src.fedoraproject.org/rpms/m4/raw/5d147168d4b93f38a4833f5dd1d650ad88af5a8a/f/m4-1.4.18-glibc-change-work-around.patch\r\n######################################################################## 100.0%\r\n==> Staging archive: /myhome/spack/var/spack/stage/m4-1.4.18-hhsvnbbpgbjmyko773df2mzmp5knybru/m4-1.4.18.tar.gz\r\n==> Created stage in /myhome/spack/var/spack/stage/m4-1.4.18-hhsvnbbpgbjmyko773df2mzmp5knybru\r\n/usr/bin/patch: setting attribute security.selinux for security.selinux: Permission denied\r\n==> Patch /myhome/spack/var/spack/repos/builtin/packages/m4/secure_snprintf.patch failed.\r\n==> Error: ProcessError: Command exited with status 2:\r\n    '/usr/bin/patch' '-s' '-p' '1' '-i' '/myhome/spack/var/spack/repos/builtin/packages/m4/secure_snprintf.patch' '-d' '.'\r\n```",
    "user": "lisalenorelowe",
    "url": "https://api.github.com/repos/spack/spack/issues/10849",
    "updated_at": "2020-08-23 19:39:37",
    "created_at": "2019-03-11 14:09:09",
    "closed_at": "2020-08-23 19:33:16",
    "state": "closed",
    "title": "Weird shell dependency:  Spack and SELinux and patch",
    "number": 10849,
    "milestone": null,
    "labels": [
        "shell-support",
        "patch"
    ],
    "id": 419489030,
    "html_url": "https://github.com/spack/spack/issues/10849",
    "assignees": [],
    "comments": 4
}