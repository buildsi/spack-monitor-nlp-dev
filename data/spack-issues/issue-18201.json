{
    "body": "The package/application flecsi fails to build on Ascent (ORNL) with gcc/6.4.0. This is part of the E4S project.\r\nflecsi apparently needs stdc++17 features and it seems from what I could tell gcc/6.4.0 doesn't support those features.  It builds with gcc/7.4.0 and above.   Bringing this to the attention of the flecsi developers for their advice on any workarounds for the gcc/6.4.0 build.\r\n\r\nTo recreate the original problem:\r\nspack -e . install --no-cache\r\nwith this spack.yaml file in your spack top-level directory:\r\n```\r\nspack:\r\n  packages:\r\n    all:\r\n      providers:\r\n        mpi: [spectrum-mpi]\r\n      target: [ppc64le]\r\n      buildable: true\r\n      version: []\r\n      paths: {}\r\n      modules: {}\r\n      compiler: []\r\n    cuda:\r\n      buildable: false\r\n      version: [10.1.243]\r\n      modules:\r\n        cuda@10.1.243: cuda/10.1.243\r\n      target: []\r\n      providers: {}\r\n      paths: {}\r\n      compiler: []\r\n    spectrum-mpi:\r\n      buildable: false\r\n      version:\r\n      - 10.3.1.2\r\n      modules:\r\n        spectrum-mpi@10.3.1.2: spectrum-mpi/10.3.1.2-20200121\r\n      target: []\r\n      providers: {}\r\n      paths: {}\r\n      compiler: []\r\n    gcc:\r\n      version:\r\n      - 6.4.0\r\n      buildable: true\r\n      target: []\r\n      providers: {}\r\n      paths: {}\r\n      modules: {}\r\n      compiler: []\r\n  specs:\r\n#  - aml\r\n#  - faodel\r\n  - flecsi+cinch\r\n#  - petsc\r\n#  - turbine\r\n#  - unifyfs\r\n  config:\r\n    misc_cache: $spack/cache\r\n    install_tree: $spack/$padding:512\r\n  view: false\r\n  concretization: separately\r\n```\r\n\r\nOutput from spack build:\r\n```\r\n[+] /autofs/nccsopen-svm1_home/jgalarowicz/luke_assignment/spack/opt/spack/linux-rhel7-power9le/gcc-6.4.0/parmetis-4.0.3-yy267qlytwjxllqn33rww3a3s56dlxh5\r\n==> Installing flecsi\r\n==> No binary for flecsi found: installing from source\r\n==> flecsi: Executing phase: 'cmake'\r\n==> flecsi: Executing phase: 'build'\r\n==> Error: ProcessError: Command exited with status 2:\r\n    'make' '-j16'\r\n\r\n148 errors found in build log:\r\n     150    /autofs/nccsopen-svm1_home/jgalarowicz/luke_assignment/spack/lib/sp\r\n            ack/env/gcc/g++ -DFleCSI_EXPORTS -I/ccsopen/home/jgalarowicz/tempsp\r\n            ack/spack-stage/spack-stage-flecsi-1-qx467zgzaqyzv33phjwc5tcihw2tty\r\n            eo/spack-src -I/autofs/nccsopen-svm1_home/jgalarowicz/tempspack/spa\r\n            ck-stage/spack-stage-flecsi-1-qx467zgzaqyzv33phjwc5tcihw2ttyeo/spac\r\n            k-build -I/autofs/nccsopen-svm1_home/jgalarowicz/luke_assignment/sp\r\n            ack/opt/spack/linux-rhel7-power9le/gcc-6.4.0/cinch-master-uek7agqzp\r\n            i4fncsmb6c5oywbfyqgscnj/logging -I/autofs/nccsopen-svm1_home/jgalar\r\n            owicz/luke_assignment/spack/opt/spack/linux-rhel7-power9le/gcc-6.4.\r\n            0/metis-5.1.0-agilkedb5lwhhmh7x56oxi5t6klvqs6t/include -I/autofs/nc\r\n            csopen-svm1_home/jgalarowicz/luke_assignment/spack/opt/spack/linux-\r\n            rhel7-power9le/gcc-6.4.0/parmetis-4.0.3-yy267qlytwjxllqn33rww3a3s56\r\n            dlxh5/include -I/ccsopen/home/jgalarowicz/tempspack/spack-stage/spa\r\n            ck-stage-flecsi-1-qx467zgzaqyzv33phjwc5tcihw2ttyeo/spack-src/flecsi\r\n             -I/autofs/nccsopen-svm1_home/jgalarowicz/tempspack/spack-stage/spa\r\n            ck-stage-flecsi-1-qx467zgzaqyzv33phjwc5tcihw2ttyeo/spack-build/flec\r\n            si -I/ccsopen/home/jgalarowicz/tempspack/spack-stage/spack-stage-fl\r\n            ecsi-1-qx467zgzaqyzv33phjwc5tcihw2ttyeo/spack-src/flecsi/.. -I/auto\r\n            fs/nccsopen-svm1_home/jgalarowicz/tempspack/spack-stage/spack-stage\r\n            -flecsi-1-qx467zgzaqyzv33phjwc5tcihw2ttyeo/spack-build/flecsi/.. -i\r\n            system /autofs/nccsopen-svm1_sw/ascent/.swci/1-compute/opt/spack/20\r\n            180914/linux-rhel7-ppc64le/gcc-8.1.1/spectrum-mpi-10.3.1.2-20200121\r\n            -chae23sgwacfeot7vxkpfboz6wao2c33/include -fopenmp -O3 -DNDEBUG -fP\r\n            IC -pthread -std=gnu++1z -o CMakeFiles/FleCSI.dir/flecsi/utils/dema\r\n            ngle.cc.o -c /ccsopen/home/jgalarowicz/tempspack/spack-stage/spack-\r\n            stage-flecsi-1-qx467zgzaqyzv33phjwc5tcihw2ttyeo/spack-src/flecsi/ut\r\n            ils/demangle.cc\r\n     151    In file included from /ccsopen/home/jgalarowicz/tempspack/spack-sta\r\n            ge/spack-stage-flecsi-1-qx467zgzaqyzv33phjwc5tcihw2ttyeo/spack-src/\r\n            flecsi/control/phase_walker.h:19:0,\r\n     152                     from /ccsopen/home/jgalarowicz/tempspack/spack-sta\r\n            ge/spack-stage-flecsi-1-qx467zgzaqyzv33phjwc5tcihw2ttyeo/spack-src/\r\n            flecsi/control/control.h:18,\r\n     153                     from /ccsopen/home/jgalarowicz/tempspack/spack-sta\r\n            ge/spack-stage-flecsi-1-qx467zgzaqyzv33phjwc5tcihw2ttyeo/spack-src/\r\n            flecsi/control/test/policy.h:18,\r\n     154                     from /ccsopen/home/jgalarowicz/tempspack/spack-sta\r\n            ge/spack-stage-flecsi-1-qx467zgzaqyzv33phjwc5tcihw2ttyeo/spack-src/\r\n            flecsi/control/test/runtime_model.cc:16:\r\n     155    /ccsopen/home/jgalarowicz/tempspack/spack-stage/spack-stage-flecsi-\r\n            1-qx467zgzaqyzv33phjwc5tcihw2ttyeo/spack-src/flecsi/utils/tuple_wal\r\n            ker.h: In member function 'void flecsi::utils::tuple_walker_u<CRTP_\r\n            TYPE>::walk_impl(TUPLE_TYPE&)':\r\n  >> 156    /ccsopen/home/jgalarowicz/tempspack/spack-stage/spack-stage-flecsi-\r\n            1-qx467zgzaqyzv33phjwc5tcihw2ttyeo/spack-src/flecsi/utils/tuple_wal\r\n            ker.h:49:8: error: expected '(' before 'constexpr'\r\n     157         if constexpr(index < std::tuple_size<TUPLE_TYPE>::value) {\r\n     158            ^~~~~~~~~\r\n     159    /ccsopen/home/jgalarowicz/tempspack/spack-stage/spack-stage-flecsi-\r\n            1-qx467zgzaqyzv33phjwc5tcihw2ttyeo/spack-src/flecsi/utils/tuple_wal\r\n            ker.h: In member function 'void flecsi::utils::tuple_walker_u<CRTP_\r\n            TYPE>::walk_types_impl()':\r\n  >> 160    /ccsopen/home/jgalarowicz/tempspack/spack-stage/spack-stage-flecsi-\r\n            1-qx467zgzaqyzv33phjwc5tcihw2ttyeo/spack-src/flecsi/utils/tuple_wal\r\n            ker.h:57:8: error: expected '(' before 'constexpr'\r\n     161         if constexpr(index < std::tuple_size<TUPLE_TYPE>::value) {\r\n     162            ^~~~~~~~~\r\n     163    In file included from /ccsopen/home/jgalarowicz/tempspack/spack-sta\r\n            ge/spack-stage-flecsi-1-qx467zgzaqyzv33phjwc5tcihw2ttyeo/spack-src/\r\n            flecsi/control/control.h:18:0,\r\n     164                     from /ccsopen/home/jgalarowicz/tempspack/spack-sta\r\n            ge/spack-stage-flecsi-1-qx467zgzaqyzv33phjwc5tcihw2ttyeo/spack-src/\r\n            flecsi/control/test/policy.h:18,\r\n     165                     from /ccsopen/home/jgalarowicz/tempspack/spack-sta\r\n            ge/spack-stage-flecsi-1-qx467zgzaqyzv33phjwc5tcihw2ttyeo/spack-src/\r\n            flecsi/control/test/runtime_model.cc:16:\r\n     166    /ccsopen/home/jgalarowicz/tempspack/spack-stage/spack-stage-flecsi-\r\n            1-qx467zgzaqyzv33phjwc5tcihw2ttyeo/spack-src/flecsi/control/phase_w\r\n            alker.h: In member function 'void flecsi::control::phase_walker_u<C\r\n            ONTROL_POLICY>::handle_type()':\r\n  >> 167    /ccsopen/home/jgalarowicz/tempspack/spack-stage/spack-stage-flecsi-\r\n            1-qx467zgzaqyzv33phjwc5tcihw2ttyeo/spack-src/flecsi/control/phase_w\r\n            alker.h:87:8: error: expected '(' before 'constexpr'\r\n     168         if constexpr(std::is_same<typename PHASE_TYPE::TYPE, size_t>::\r\n            value) {\r\n     169            ^~~~~~~~~\r\n  >> 170    /ccsopen/home/jgalarowicz/tempspack/spack-stage/spack-stage-flecsi-\r\n            1-qx467zgzaqyzv33phjwc5tcihw2ttyeo/spack-src/flecsi/control/phase_w\r\n            alker.h:106:3: error: expected '}' at end of input\r\n     171       } // handle_type\r\n     172       ^\r\n```\r\n\r\n@ktsai7 @JulienLoiseau ",
    "user": "jgalarowicz",
    "url": "https://api.github.com/repos/spack/spack/issues/18201",
    "updated_at": "2020-10-14 19:15:17",
    "created_at": "2020-08-20 20:17:49",
    "closed_at": "None",
    "state": "open",
    "title": "Installation issue: E4S project: flecsi+cinch will not install on Ascent (ORNL) with gcc/6.4.0 ",
    "number": 18201,
    "milestone": null,
    "labels": [
        "question",
        "build-error",
        "ecp",
        "e4s",
        "olcf"
    ],
    "id": 683069518,
    "html_url": "https://github.com/spack/spack/issues/18201",
    "assignees": [
        "jgalarowicz",
        "eugeneswalker"
    ],
    "comments": 4
}