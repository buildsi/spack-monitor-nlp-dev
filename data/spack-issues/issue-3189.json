{
    "body": "Hi everybody,\r\nDuring the installation of the installation of Openblas with Spack I get this error\r\n```\r\n==> Error: ProcessError: Command exited with status 2:\r\n    'make' 'CC=/home/reza/spack/lib/spack/env/gcc/gcc' 'FC=/home/reza/spack/lib/spack/env/gcc/gfortran' 'MAKE_NO_J=1' 'libs' 'netlib' 'shared'\r\n/home/reza/spack/lib/spack/spack/build_systems/makefile.py:94, in build:\r\n     89       def build(self, spec, prefix):\r\n     90           \"\"\"Calls make, passing :py:attr:`~.MakefilePackage.build_targets`\r\n     91           as targets.\r\n     92           \"\"\"\r\n     93           with working_dir(self.build_directory):\r\n  >> 94               inspect.getmodule(self).make(*self.build_targets)\r\n\r\nSee build log for details:\r\n  /tmp/reza/spack-stage/spack-stage-H6xYgt/OpenBLAS-0.2.19/spack-build.out\r\n```\r\nwhereas the log says\r\n```\r\n==> Using default implementation: skipping edit phase.\r\n==> 'make' 'CC=/home/reza/spack/lib/spack/env/gcc/gcc' 'FC=/home/reza/spack/lib/spack/env/gcc/gfortran' 'MAKE_NO_J=1' 'libs' 'netlib' 'shared'\r\ngetarch_2nd.c: In function \u2018main\u2019:\r\ngetarch_2nd.c:12:35: error: \u2018SGEMM_DEFAULT_UNROLL_M\u2019 undeclared (first use in this function)\r\n     printf(\"SGEMM_UNROLL_M=%d\\n\", SGEMM_DEFAULT_UNROLL_M);\r\n                                   ^\r\ngetarch_2nd.c:12:35: note: each undeclared identifier is reported only once for each function it appears in\r\ngetarch_2nd.c:13:35: error: \u2018SGEMM_DEFAULT_UNROLL_N\u2019 undeclared (first use in this function)\r\n     printf(\"SGEMM_UNROLL_N=%d\\n\", SGEMM_DEFAULT_UNROLL_N);\r\n                                   ^\r\ngetarch_2nd.c:14:35: error: \u2018DGEMM_DEFAULT_UNROLL_M\u2019 undeclared (first use in this function)\r\n     printf(\"DGEMM_UNROLL_M=%d\\n\", DGEMM_DEFAULT_UNROLL_M);\r\n                                   ^\r\ngetarch_2nd.c:15:35: error: \u2018DGEMM_DEFAULT_UNROLL_N\u2019 undeclared (first use in this function)\r\n     printf(\"DGEMM_UNROLL_N=%d\\n\", DGEMM_DEFAULT_UNROLL_N);\r\n                                   ^\r\ngetarch_2nd.c:19:35: error: \u2018CGEMM_DEFAULT_UNROLL_M\u2019 undeclared (first use in this function)\r\n     printf(\"CGEMM_UNROLL_M=%d\\n\", CGEMM_DEFAULT_UNROLL_M);\r\n                                   ^\r\ngetarch_2nd.c:20:35: error: \u2018CGEMM_DEFAULT_UNROLL_N\u2019 undeclared (first use in this function)\r\n     printf(\"CGEMM_UNROLL_N=%d\\n\", CGEMM_DEFAULT_UNROLL_N);\r\n                                   ^\r\ngetarch_2nd.c:21:35: error: \u2018ZGEMM_DEFAULT_UNROLL_M\u2019 undeclared (first use in this function)\r\n     printf(\"ZGEMM_UNROLL_M=%d\\n\", ZGEMM_DEFAULT_UNROLL_M);\r\n                                   ^\r\ngetarch_2nd.c:22:35: error: \u2018ZGEMM_DEFAULT_UNROLL_N\u2019 undeclared (first use in this function)\r\n     printf(\"ZGEMM_UNROLL_N=%d\\n\", ZGEMM_DEFAULT_UNROLL_N);\r\n                                   ^\r\ngetarch_2nd.c:69:50: error: \u2018SGEMM_DEFAULT_Q\u2019 undeclared (first use in this function)\r\n     printf(\"#define SLOCAL_BUFFER_SIZE\\t%ld\\n\", (SGEMM_DEFAULT_Q * SGEMM_DEFAULT_UNROLL_N * 4 * 1 *  sizeof(float)));\r\n                                                  ^\r\ngetarch_2nd.c:70:50: error: \u2018DGEMM_DEFAULT_Q\u2019 undeclared (first use in this function)\r\n     printf(\"#define DLOCAL_BUFFER_SIZE\\t%ld\\n\", (DGEMM_DEFAULT_Q * DGEMM_DEFAULT_UNROLL_N * 2 * 1 *  sizeof(double)));\r\n                                                  ^\r\ngetarch_2nd.c:71:50: error: \u2018CGEMM_DEFAULT_Q\u2019 undeclared (first use in this function)\r\n     printf(\"#define CLOCAL_BUFFER_SIZE\\t%ld\\n\", (CGEMM_DEFAULT_Q * CGEMM_DEFAULT_UNROLL_N * 4 * 2 *  sizeof(float)));\r\n                                                  ^\r\ngetarch_2nd.c:72:50: error: \u2018ZGEMM_DEFAULT_Q\u2019 undeclared (first use in this function)\r\n     printf(\"#define ZLOCAL_BUFFER_SIZE\\t%ld\\n\", (ZGEMM_DEFAULT_Q * ZGEMM_DEFAULT_UNROLL_N * 2 * 2 *  sizeof(double)));\r\n                                                  ^\r\nmake: *** [getarch_2nd] Error 1\r\nMakefile:123: *** OpenBLAS: Detecting CPU failed. Please set TARGET explicitly, e.g. make TARGET=your_cpu_target. Please read README for the detail..  Stop.\r\n```",
    "user": "RezaLTM",
    "url": "https://api.github.com/repos/spack/spack/issues/3189",
    "updated_at": "2017-02-21 10:05:31",
    "created_at": "2017-02-20 13:45:36",
    "closed_at": "2017-02-20 23:40:47",
    "state": "closed",
    "title": "OpenBLAS: Detecting CPU failed.( Intel Kabylake 7700HQ CPU)",
    "number": 3189,
    "milestone": null,
    "labels": [
        "build-error",
        "blas-lapack-scalapack"
    ],
    "id": 208883994,
    "html_url": "https://github.com/spack/spack/issues/3189",
    "assignees": [],
    "comments": 9
}