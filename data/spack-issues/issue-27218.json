{
    "body": "### Steps to reproduce\n\nSeems to work fine with a checkout before 78c08fccd56d\r\n\r\nDownload spack with git and run:\r\n\r\n```\r\nspack -d solve zlib\r\n```\r\nUsed same dnf packages as \r\n\r\nhttps://github.com/spack/spack/blob/develop/.github/workflows/bootstrap.yml#L28-L31\n\n### Error message\n\n```console\r\n[spack@cdd985727477 ~]$ spack -d solve zlib\r\n==> [2021-11-04-15:21:32.681260] Imported solve from built-in commands\r\n==> [2021-11-04-15:21:32.681762] Imported solve from built-in commands\r\n==> [2021-11-04-15:21:32.682054] Reading config file /home/spack/spack/etc/spack/defaults/bootstrap.yaml\r\n==> [2021-11-04-15:21:32.686327] Reading config file /home/spack/spack/etc/spack/defaults/config.yaml\r\n==> [2021-11-04-15:21:32.696214] Reading config file /home/spack/spack/etc/spack/defaults/config.yaml\r\n==> [2021-11-04-15:21:32.705032] DATABASE LOCK TIMEOUT: 3s\r\n==> [2021-11-04-15:21:32.705058] PACKAGE LOCK TIMEOUT: No timeout\r\n==> [2021-11-04-15:21:32.705232] Reading config file /home/spack/spack/etc/spack/defaults/bootstrap.yaml\r\n==> [2021-11-04-15:21:32.708827] DATABASE LOCK TIMEOUT: 3s\r\n==> [2021-11-04-15:21:32.708852] PACKAGE LOCK TIMEOUT: No timeout\r\n==> [2021-11-04-15:21:32.708883] [BOOTSTRAP CONFIG SCOPE] name=_builtin\r\n==> [2021-11-04-15:21:32.709058] [BOOTSTRAP CONFIG SCOPE] name=defaults, path=/home/spack/spack/etc/spack/defaults\r\n==> [2021-11-04-15:21:32.709079] [BOOTSTRAP CONFIG SCOPE] name=defaults/linux, path=/home/spack/spack/etc/spack/defaults/linux\r\n==> [2021-11-04-15:21:32.709097] [BOOTSTRAP CONFIG SCOPE] name=bootstrap, path=/home/spack/.spack/bootstrap/config\r\n==> [2021-11-04-15:21:32.709114] [BOOTSTRAP CONFIG SCOPE] name=bootstrap/linux, path=/home/spack/.spack/bootstrap/config/linux\r\n==> [2021-11-04-15:21:32.709246] Reading config file /home/spack/.spack/bootstrap/config/linux/compilers.yaml\r\n==> [2021-11-04-15:21:32.719913] [BOOTSTRAP ROOT SPEC] clingo-bootstrap@spack+python %gcc target=x86_64\r\n==> [2021-11-04-15:21:32.719941] [BOOTSTRAP MODULE clingo] Try importing from Python\r\n==> [2021-11-04-15:21:32.720057] Reading config file /home/spack/spack/etc/spack/defaults/bootstrap.yaml\r\n==> [2021-11-04-15:21:32.723749] Bootstrapping clingo from pre-built binaries\r\n==> [2021-11-04-15:21:32.724358] Reading config file /home/spack/spack/etc/spack/defaults/config.yaml\r\n==> [2021-11-04-15:21:32.733600] DATABASE LOCK TIMEOUT: 3s\r\n==> [2021-11-04-15:21:32.733625] PACKAGE LOCK TIMEOUT: No timeout\r\n==> [2021-11-04-15:21:32.741278] Reading config file /home/spack/spack/etc/spack/defaults/mirrors.yaml\r\n==> [2021-11-04-15:21:32.855561] Cached index for https://mirror.spack.io/bootstrap/github-actions/v0.1 already up to date\r\n==> [2021-11-04-15:21:32.861080] Bootstrapping clingo from sources\r\n==> [2021-11-04-15:21:32.878400] '/bin/cmake' '--version'\r\n==> [2021-11-04-15:21:32.882315] no bin/ dir found in /bin. Cannot add it as a Spack package\r\n==> [2021-11-04-15:21:32.882407] '/usr/bin/cmake' '--version'\r\n==> [2021-11-04-15:21:32.885946] '/bin/bison' '--version'\r\n==> [2021-11-04-15:21:32.886541] no bin/ dir found in /bin. Cannot add it as a Spack package\r\n==> [2021-11-04-15:21:32.886611] '/usr/bin/bison' '--version'\r\n==> [2021-11-04-15:21:32.887353] '/bin/gawk' '--version'\r\n==> [2021-11-04-15:21:32.888446] no bin/ dir found in /bin. Cannot add it as a Spack package\r\n==> [2021-11-04-15:21:32.888513] '/usr/bin/gawk' '--version'\r\n==> [2021-11-04-15:21:32.889544] Reading config file /home/spack/spack/etc/spack/defaults/packages.yaml\r\n==> [2021-11-04-15:21:32.908512] [BOOTSTRAP MODULE clingo] Unexpected error \"Invalid config scope: 'bootstrap'.  Must be one of odict_keys(['_builtin', 'defaults', 'defaults/linux', 'bootstrap/linux', 'disable_modules', 'overrides-0'])\"\r\n==> [2021-11-04-15:21:32.908857] Reading config file /home/spack/spack/etc/spack/defaults/config.yaml\r\nTraceback (most recent call last):\r\n  File \"/home/spack/spack/bin/spack\", line 100, in <module>\r\n    sys.exit(spack.main.main())\r\n  File \"/home/spack/spack/lib/spack/spack/main.py\", line 876, in main\r\n    return _main(argv)\r\n  File \"/home/spack/spack/lib/spack/spack/main.py\", line 859, in _main\r\n    return _invoke_command(command, parser, args, unknown)\r\n  File \"/home/spack/spack/lib/spack/spack/main.py\", line 529, in _invoke_command\r\n    return_val = command(parser, args)\r\n  File \"/home/spack/spack/lib/spack/spack/cmd/solve.py\", line 105, in solve\r\n    result = asp.solve(\r\n  File \"/home/spack/spack/lib/spack/spack/solver/asp.py\", line 1814, in solve\r\n    driver = PyclingoDriver()\r\n  File \"/home/spack/spack/lib/spack/spack/solver/asp.py\", line 401, in __init__\r\n    bootstrap_clingo()\r\n  File \"/home/spack/spack/lib/spack/spack/solver/asp.py\", line 380, in bootstrap_clingo\r\n    spack.bootstrap.ensure_clingo_importable_or_raise()\r\n  File \"/home/spack/spack/lib/spack/spack/bootstrap.py\", line 774, in ensure_clingo_importable_or_raise\r\n    ensure_module_importable_or_raise(\r\n  File \"/home/spack/spack/lib/spack/spack/bootstrap.py\", line 517, in ensure_module_importable_or_raise\r\n    raise ImportError(msg)\r\nImportError: cannot bootstrap the \"clingo\" Python module from spec \"clingo-bootstrap@spack+python %gcc target=x86_64\" due to the following failures:\r\n    'spack-install' raised ValueError: Invalid config scope: 'bootstrap'.  Must be one of odict_keys(['_builtin', 'defaults', 'defaults/linux', 'bootstrap/linux', 'disable_modules', 'overrides-0'])\r\n    Please run `spack -d spec zlib` for more verbose error messages\r\n```\n\n### Information on your system\n\npodman image ls\r\nREPOSITORY                         TAG         IMAGE ID      CREATED       SIZE\r\nregistry.fedoraproject.org/fedora  latest      1b52edb08181  23 hours ago  159 MB\r\n\r\n[spack@cdd985727477 ~]$ spack debug report\r\n* **Spack:** 0.16.3-5234-f6ed8b6150\r\n* **Python:** 3.10.0\r\n* **Platform:** linux-fedora35-zen3\r\n* **Concretizer:** clingo\n\n### General information\n\n- [X] I have run `spack debug report` and reported the version of Spack/Python/Platform\n- [X] I have searched the issues of this repo and believe this is not a duplicate\n- [X] I have run the failing commands in debug mode and reported the output",
    "user": "wortiz",
    "url": "https://api.github.com/repos/spack/spack/issues/27218",
    "updated_at": "2021-11-05 21:51:33",
    "created_at": "2021-11-04 15:28:33",
    "closed_at": "2021-11-05 21:51:33",
    "state": "closed",
    "title": "Spack fails to bootstrap clingo fedora 35",
    "number": 27218,
    "milestone": null,
    "labels": [
        "bug",
        "triage"
    ],
    "id": 1044890199,
    "html_url": "https://github.com/spack/spack/issues/27218",
    "assignees": [],
    "comments": 1
}