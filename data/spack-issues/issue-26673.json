{
    "body": "### Steps to reproduce the issue\n\n```console\r\n$ spack install neovim\r\n```\n\n### Information on your system\n\n* **Spack:** 0.16.3-4806-532ba03d60\r\n* **Python:** 3.8.2\r\n* **Platform:** darwin-bigsur-m1\r\n* **Concretizer:** clingo\n\n### Additional information\n\n```\r\n==> Installing libluv-1.36.0-0-d4tbvgqbrm27bvnluo4u7mbbfkmfofgi\r\n==> No binary for libluv-1.36.0-0-d4tbvgqbrm27bvnluo4u7mbbfkmfofgi found: installing from source\r\n==> Using cached archive: /Users/certik/repos/spack/var/spack/cache/_source-cache/archive/f2/f2e7eb372574f25c6978c1dc74280d22efdcd7df2dda4a286c7fe7dceda26445.tar.gz\r\n==> No patches needed for libluv\r\n==> libluv: Executing phase: 'cmake'\r\n==> libluv: Executing phase: 'build'\r\n==> Error: ProcessError: Command exited with status 2:\r\n    'make' '-j8'\r\n\r\n4 errors found in build log:\r\n     82     /Users/certik/repos/spack/opt/spack/darwin-bigsur-m1/apple-clang-12\r\n            .0.5/cmake-3.21.3-gkfoksq2k2e7znnilapooa5jsili7ag3/bin/cmake -E cma\r\n            ke_link_script CMakeFiles/libluv_a.dir/link.txt --verbose=1\r\n     83     /Users/certik/repos/spack/lib/spack/env/clang/clang -O2 -g -DNDEBUG\r\n             -arch arm64 -isysroot /Library/Developer/CommandLineTools/SDKs/Mac\r\n            OSX.sdk -dynamiclib -Wl,-headerpad_max_install_names -compatibility\r\n            _version 1.0.0 -current_version 1.36.0 -o libluv.1.36.0.dylib -inst\r\n            all_name /private/var/folders/43/nspmtcpj5r589x58n_spl6jm000fsc/T/c\r\n            ertik/spack-stage/spack-stage-libluv-1.36.0-0-d4tbvgqbrm27bvnluo4u7\r\n            mbbfkmfofgi/spack-build-d4tbvgq/libluv.1.dylib CMakeFiles/libluv.di\r\n            r/src/luv.c.o  /Users/certik/repos/spack/opt/spack/darwin-bigsur-m1\r\n            /apple-clang-12.0.5/libuv-1.42.0-h4obvdsf3c3s4k467tfgicahwwpdejlt/l\r\n            ib/libuv.dylib\r\n     84     /usr/bin/ar qc libluv_a.a CMakeFiles/libluv_a.dir/src/luv.c.o\r\n     85     /usr/bin/ranlib libluv_a.a\r\n     86     make[2]: Leaving directory '/private/var/folders/43/nspmtcpj5r589x5\r\n            8n_spl6jm000fsc/T/certik/spack-stage/spack-stage-libluv-1.36.0-0-d4\r\n            tbvgqbrm27bvnluo4u7mbbfkmfofgi/spack-build-d4tbvgq'\r\n     87     make[2]: Leaving directory '/private/var/folders/43/nspmtcpj5r589x5\r\n            8n_spl6jm000fsc/T/certik/spack-stage/spack-stage-libluv-1.36.0-0-d4\r\n            tbvgqbrm27bvnluo4u7mbbfkmfofgi/spack-build-d4tbvgq'\r\n  >> 88     Undefined symbols for architecture arm64:\r\n     89       \"_luaL_argerror\", referenced from:\r\n     90           _luv_cancel in luv.c.o\r\n     91           _luv_timer_start in luv.c.o\r\n     92           _luv_timer_stop in luv.c.o\r\n     93           _luv_timer_again in luv.c.o\r\n     94           _luv_timer_set_repeat in luv.c.o\r\n\r\n     ...\r\n\r\n     480          _luv_thread_arg_set in luv.c.o\r\n     481          _luv_check_bufs in luv.c.o\r\n     482          _luv_prep_bufs in luv.c.o\r\n     483          _luv_check_bufs_noref in luv.c.o\r\n     484          ...\r\n     485    ld: symbol(s) not found for architecture arm64\r\n  >> 486    clang: error: linker command failed with exit code 1 (use -v to see\r\n             invocation)\r\n  >> 487    make[2]: *** [CMakeFiles/libluv.dir/build.make:101: libluv.1.36.0.d\r\n            ylib] Error 1\r\n     488    make[2]: Leaving directory '/private/var/folders/43/nspmtcpj5r589x5\r\n            8n_spl6jm000fsc/T/certik/spack-stage/spack-stage-libluv-1.36.0-0-d4\r\n            tbvgqbrm27bvnluo4u7mbbfkmfofgi/spack-build-d4tbvgq'\r\n  >> 489    make[1]: *** [CMakeFiles/Makefile2:90: CMakeFiles/libluv.dir/all] E\r\n            rror 2\r\n     490    make[1]: *** Waiting for unfinished jobs....\r\n     491    [100%] Built target libluv_a\r\n     492    [100%] Built target luv\r\n     493    make[1]: Leaving directory '/private/var/folders/43/nspmtcpj5r589x5\r\n            8n_spl6jm000fsc/T/certik/spack-stage/spack-stage-libluv-1.36.0-0-d4\r\n            tbvgqbrm27bvnluo4u7mbbfkmfofgi/spack-build-d4tbvgq'\r\n     494    make: *** [Makefile:139: all] Error 2\r\n\r\nSee build log for details:\r\n  /var/folders/43/nspmtcpj5r589x58n_spl6jm000fsc/T/certik/spack-stage/spack-stage-libluv-1.36.0-0-d4tbvgqbrm27bvnluo4u7mbbfkmfofgi/spack-build-out.txt\r\n\r\n==> Error: neovim-0.4.4-x46l5tptdaqrfscympfl7artkpfpyncf: Package was not installed\r\n==> Error: Installation request failed.  Refer to reported errors for failing package(s).\r\n```\n\n### General information\n\n- [X] I have run `spack debug report` and reported the version of Spack/Python/Platform\n- [X] I have run `spack maintainers <name-of-the-package>` and **@mentioned** any maintainers\n- [X] I have uploaded the build log and environment files\n- [X] I have searched the issues of this repo and believe this is not a duplicate",
    "user": "certik",
    "url": "https://api.github.com/repos/spack/spack/issues/26673",
    "updated_at": "2022-02-26 17:11:53",
    "created_at": "2021-10-12 03:55:41",
    "closed_at": "2022-02-26 17:11:53",
    "state": "closed",
    "title": "Installation issue: libluv",
    "number": 26673,
    "milestone": null,
    "labels": [
        "build-error"
    ],
    "id": 1023330834,
    "html_url": "https://github.com/spack/spack/issues/26673",
    "assignees": [],
    "comments": 8
}