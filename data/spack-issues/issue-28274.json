{
    "body": "### Steps to reproduce\r\n\r\n1. Create a packages.yaml that defines an external python (that doesn't have dev libraries installed?)\r\n2. `spack install exodusii`\r\n\r\n### Error message\r\n\r\n```==> Installing exodusii-2021-04-05-7z43vabdqjnmbdrgwpkv6qjrwgai2hwt\r\n==> No binary for exodusii-2021-04-05-7z43vabdqjnmbdrgwpkv6qjrwgai2hwt found: installing from source\r\n==> Error: KeyError: 'LIBDIR'\r\n\r\n/home/user/spack/var/spack/repos/builtin/packages/python/package.py:795, in libs:\r\n        792        # installs them into lib64. If the user is using an externally\r\n        793        # installed package, it may be in either lib or lib64, so we need\r\n        794        # to ask Python where its LIBDIR is.\r\n        795        libdir = self.config_vars['LIBDIR']\r\n        796\r\n        797        # In Ubuntu 16.04.6 and python 2.7.12 from the system, lib could be\r\n        798        # in LBPL```\r\n\r\n### Information on your system\r\n\r\n```\r\n* **Spack:** 0.17.1\r\n* **Python:** 3.9.5\r\n* **Platform:** linux-centos8-haswell\r\n* **Concretizer:** clingo\r\n```\r\n\r\n### General information\r\n\r\n- [X] I have run `spack debug report` and reported the version of Spack/Python/Platform\r\n- [X] I have searched the issues of this repo and believe this is not a duplicate\r\n- [X] I have run the failing commands in debug mode and reported the output",
    "user": "benpm",
    "url": "https://api.github.com/repos/spack/spack/issues/28274",
    "updated_at": "2022-01-10 18:00:07",
    "created_at": "2022-01-05 23:41:21",
    "closed_at": "2022-01-10 18:00:06",
    "state": "closed",
    "title": "\"Error: KeyError: 'LIBDIR'\" when an external python is used",
    "number": 28274,
    "milestone": null,
    "labels": [
        "bug",
        "triage"
    ],
    "id": 1094832596,
    "html_url": "https://github.com/spack/spack/issues/28274",
    "assignees": [
        "adamjstewart"
    ],
    "comments": 5
}