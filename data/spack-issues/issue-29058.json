{
    "body": "### Steps to reproduce the issue\n\nSpack uses mpicc instead of mpiicc by default. I have successfully compiled elpa manually. To compile its MPI version, I need to set some parameters: CC = mpiicc cxx = mpiicpc FC = mpiifort fcflags = \"- MKL = cluster\" -- enable OpenMP. I tried to modify the value of CC in the script, but failed, prompting that mpiicc cannot be found. In fact, mpicc and mpiicc are in the same level directory\n\n### Error message\n\n```console\r\n[yeesuan001@spack ~]$ spack install elpa@2016.05.004%intel@19.0.5.281 ^intel-mpi@2019.5.281 ^int=openmp\r\n[+] /es01/jnist/software/common/linux-centos7-cascadelake/intel-19.0.5.281/cpio-2.13-f7wax3werfh\r\n[+] /es01/jnist/software/common/linux-centos7-cascadelake/intel-19.0.5.281/intel-mpi-2019.5.281-\r\n[+] /es01/jnist/software/common/linux-centos7-cascadelake/intel-19.0.5.281/libsigsegv-2.13-y35w5\r\n[+] /es01/jnist/software/common/linux-centos7-cascadelake/intel-19.0.5.281/libiconv-1.16-htdg6yl\r\n[+] /es01/jnist/software/common/linux-centos7-cascadelake/intel-19.0.5.281/libmd-1.0.3-ren2ecswz\r\n[+] /es01/jnist/software/common/linux-centos7-cascadelake/intel-19.0.5.281/pkgconf-1.8.0-aily2ya\r\n[+] /es01/jnist/software/common/linux-centos7-cascadelake/intel-19.0.5.281/xz-5.2.5-mqofmxsdhhtb\r\n[+] /es01/jnist/software/common/linux-centos7-cascadelake/intel-19.0.5.281/zlib-1.2.11-mhbwpmmon\r\n[+] /es01/jnist/software/common/linux-centos7-cascadelake/intel-19.0.5.281/libffi-3.3-7j6hnninfq\r\n[+] /es01/jnist/software/common/linux-centos7-cascadelake/intel-19.0.5.281/berkeley-db-18.1.40-n\r\n[+] /es01/jnist/software/common/linux-centos7-haswell/gcc-4.8.5/util-linux-uuid-2.36.2-psepywix7l util-linux-uuid-2.36.2-bodrm7qe46orjt7mgnrytkjffbkat7bm)\r\n[+] /es01/jnist/software/common/linux-centos7-cascadelake/intel-19.0.5.281/intel-mkl-2019.5.281-\r\n[+] /es01/jnist/software/common/linux-centos7-cascadelake/intel-19.0.5.281/m4-1.4.19-agiqneuphj4\r\n[+] /es01/jnist/software/common/linux-centos7-cascadelake/intel-19.0.5.281/diffutils-3.8-itsfmer\r\n[+] /es01/jnist/software/common/linux-centos7-cascadelake/intel-19.0.5.281/tar-1.34-kjmd4be3gcsx\r\n[+] /es01/jnist/software/common/linux-centos7-cascadelake/intel-19.0.5.281/libbsd-0.11.3-vbttcba\r\n[+] /es01/jnist/software/common/linux-centos7-cascadelake/intel-19.0.5.281/ncurses-6.2-jqlhdvk36\r\n[+] /es01/jnist/software/common/linux-centos7-cascadelake/intel-19.0.5.281/libxml2-2.9.12-fwpmtk\r\n[+] /es01/jnist/software/common/linux-centos7-cascadelake/intel-19.0.5.281/libtool-2.4.6-k6szcxz\r\n[+] /es01/jnist/software/common/linux-centos7-cascadelake/intel-19.0.5.281/bzip2-1.0.8-ldk7g42aa\r\n[+] /es01/jnist/software/common/linux-centos7-cascadelake/intel-19.0.5.281/expat-2.4.1-ke2jayafj\r\n[+] /es01/jnist/software/common/linux-centos7-cascadelake/intel-19.0.5.281/readline-8.1-gnoggs5x\r\n[+] /es01/jnist/software/common/linux-centos7-cascadelake/intel-19.0.5.281/gettext-0.21-2wq6f4o4\r\n[+] /es01/jnist/software/common/linux-centos7-cascadelake/intel-19.0.5.281/gdbm-1.19-vomgdjymayr\r\n[+] /es01/jnist/software/common/linux-centos7-cascadelake/intel-19.0.5.281/sqlite-3.36.0-vdmezzf\r\n[+] /es01/jnist/software/common/linux-centos7-cascadelake/intel-19.0.5.281/perl-5.34.0-5lywygznf\r\n[+] /es01/jnist/software/common/linux-centos7-cascadelake/intel-19.0.5.281/openssl-1.1.1l-lduc5k\r\n[+] /es01/jnist/software/common/linux-centos7-cascadelake/intel-19.0.5.281/python-2.7.18-ina7oso\r\n==> Installing elpa-2016.05.004-gj5zi35izfnysoufmu4y7g4m2bzdxbp2\r\n==> No binary for elpa-2016.05.004-gj5zi35izfnysoufmu4y7g4m2bzdxbp2 found: installing from sourc\r\n==> Using cached archive: /es01/jnist/spack/var/spack/cache/_source-cache/archive/08/08c59dc9da48d6dcf114ca5fbbe46c58.tar.gz\r\n==> No patches needed for elpa\r\n==> elpa: Executing phase: 'autoreconf'\r\n==> elpa: Executing phase: 'configure'\r\n==> Error: AttributeError: 'Spec' object has no attribute 'mpiicc'\r\n\r\n/es01/jnist/spack/var/spack/repos/builtin/packages/elpa/package.py:156, in configure_args:\r\n        153\r\n        154        if '+mpi' in self.spec:\r\n        155            options += [\r\n  >>    156                'CC={0}'.format(spec['mpi'].mpiicc),\r\n        157                'CXX={0}'.format(spec['mpi'].mpiicpc),\r\n        158                'FC={0}'.format(spec['mpi'].mpiifort),\r\n        159                'FCFLAGS=-mkl=cluster',\r\n\r\nSee build log for details:\r\n  /tmp/yeesuan001/spack-stage/spack-stage-elpa-2016.05.004-gj5zi35izfnysoufmu4y7g4m2bzdxbp2/spac\r\n```\r\n\n\n### Information on your system\n\n* **Spack:** 0.17.1\r\n* **Python:** 3.6.8\r\n* **Platform:** linux-centos7-cascadelake\r\n* **Concretizer:** clingo\r\n\n\n### Additional information\n\n...\n\n### General information\n\n- [X] I have run `spack debug report` and reported the version of Spack/Python/Platform\n- [X] I have run `spack maintainers <name-of-the-package>` and **@mentioned** any maintainers\n- [X] I have uploaded the build log and environment files\n- [X] I have searched the issues of this repo and believe this is not a duplicate",
    "user": "Bitllion",
    "url": "https://api.github.com/repos/spack/spack/issues/29058",
    "updated_at": "2022-02-18 08:32:00",
    "created_at": "2022-02-18 08:32:00",
    "closed_at": "None",
    "state": "open",
    "title": "Installation issue: How to use mpiicc compiler software?",
    "number": 29058,
    "milestone": null,
    "labels": [
        "build-error"
    ],
    "id": 1142626808,
    "html_url": "https://github.com/spack/spack/issues/29058",
    "assignees": [],
    "comments": 0
}