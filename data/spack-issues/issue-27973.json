{
    "body": "This is run with spack develop.\r\n\r\n```bash\r\n$ spack test run qthreads\r\n==> Spack test qad6zizad2yex4vauuu43wnml26hu43u\r\n==> Testing package qthreads-1.16-xjekt73\r\n==> Error: TestFailure: 2 tests failed.\r\n\r\n\r\nCommand exited with status 1:\r\n    './hello_world_multi'\r\nQTHREADS ERROR: attempted to use 8 workers per shepherd with scheduler that only supports 1 worker per shepherd.\r\n\r\n\r\n\r\n1 error found in test log:\r\n     6     ==> [2021-12-13-16:54:30.240542] test:hello_world: Checking ability to link to the library.\r\n     7     ==> [2021-12-13-16:54:30.240794] '/home/vanessa/Desktop/Code/spack-vsoch/lib/spack/env/cc' '-I/home/vanessa/Desktop/Code/spack-vsoch/opt/spack/\r\n           linux-ubuntu20.04-skylake/gcc-9.3.0/qthreads-1.16-xjekt73chhmdain4xvlupje7d3gofrsu/include' '-I/home/vanessa/Desktop/Code/spack-vsoch/opt/spack\r\n           /linux-ubuntu20.04-skylake/gcc-9.3.0/qthreads-1.16-xjekt73chhmdain4xvlupje7d3gofrsu/.spack/test/test' '/home/vanessa/Desktop/Code/spack-vsoch/o\r\n           pt/spack/linux-ubuntu20.04-skylake/gcc-9.3.0/qthreads-1.16-xjekt73chhmdain4xvlupje7d3gofrsu/.spack/test/test/basics/hello_world.c' '-o' 'hello_\r\n           world' '-L/home/vanessa/Desktop/Code/spack-vsoch/opt/spack/linux-ubuntu20.04-skylake/gcc-9.3.0/qthreads-1.16-xjekt73chhmdain4xvlupje7d3gofrsu/l\r\n           ib' '-lqthread' '-Wl,-rpath,/home/vanessa/Desktop/Code/spack-vsoch/opt/spack/linux-ubuntu20.04-skylake/gcc-9.3.0/qthreads-1.16-xjekt73chhmdain4\r\n           xvlupje7d3gofrsu/lib'\r\n     8     PASSED\r\n     9     ==> [2021-12-13-16:54:30.291583] test:hello_world_multi: Checking ability to execute.\r\n     10    ==> [2021-12-13-16:54:30.291815] './hello_world_multi'\r\n     11    QTHREADS ERROR: attempted to use 8 workers per shepherd with scheduler that only supports 1 worker per shepherd.\r\n  >> 12    FAILED: Command exited with status 1:\r\n     13        './hello_world_multi'\r\n     14    QTHREADS ERROR: attempted to use 8 workers per shepherd with scheduler that only supports 1 worker per shepherd.\r\n     15    \r\n     16      File \"/home/vanessa/Desktop/Code/spack-vsoch/bin/spack\", line 98, in <module>\r\n\r\n\r\n\r\nCommand exited with status 1:\r\n    './hello_world'\r\nQTHREADS ERROR: attempted to use 8 workers per shepherd with scheduler that only supports 1 worker per shepherd.\r\n\r\n\r\n\r\n1 error found in test log:\r\n     53        self.run_tests()\r\n     54      File \"/home/vanessa/Desktop/Code/spack-vsoch/var/spack/repos/builtin/packages/qthreads/package.py\", line 136, in run_tests\r\n     55        self.run_test(test, [], purpose=reason)\r\n     56    ==> [2021-12-13-16:54:30.311001] test:hello_world: Checking ability to execute.\r\n     57    ==> [2021-12-13-16:54:30.311198] './hello_world'\r\n     58    QTHREADS ERROR: attempted to use 8 workers per shepherd with scheduler that only supports 1 worker per shepherd.\r\n  >> 59    FAILED: Command exited with status 1:\r\n     60        './hello_world'\r\n     61    QTHREADS ERROR: attempted to use 8 workers per shepherd with scheduler that only supports 1 worker per shepherd.\r\n     62    \r\n     63      File \"/home/vanessa/Desktop/Code/spack-vsoch/bin/spack\", line 98, in <module>\r\n\r\n\r\n\r\n/home/vanessa/Desktop/Code/spack-vsoch/lib/spack/spack/build_environment.py:1051, in _setup_pkg_and_run:\r\n       1048        tb_string = traceback.format_exc()\r\n       1049\r\n       1050        # build up some context from the offending package so we can\r\n  >>   1051        # show that, too.\r\n       1052        package_context = get_package_context(tb)\r\n       1053\r\n       1054        logfile = None\r\n\r\nSee test log for details:\r\n  /home/vanessa/.spack/test/qad6zizad2yex4vauuu43wnml26hu43u/qthreads-1.16-xjekt73-test-out.txt\r\n\r\n==> Error: 1 test(s) in the suite failed.\r\n```",
    "user": "vsoch",
    "url": "https://api.github.com/repos/spack/spack/issues/27973",
    "updated_at": "2021-12-14 00:09:33",
    "created_at": "2021-12-13 23:59:48",
    "closed_at": "None",
    "state": "open",
    "title": "spack test run qthreads \"attempted to use 8 workers\" fails",
    "number": 27973,
    "milestone": null,
    "labels": [
        "bug",
        "stand-alone-tests"
    ],
    "id": 1079153869,
    "html_url": "https://github.com/spack/spack/issues/27973",
    "assignees": [],
    "comments": 0
}