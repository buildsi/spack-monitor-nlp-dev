{
    "body": "I upgraded my Mac to MacOS Catalina (10.15) and Spack stopped working due to the `module` command not being found. I tried to reinstall Spack and reinstall tmux, but it didn't change anything. (Note, this isn't unique to tmux, my other installations also didn't work with the same error message.)\r\n\r\n\r\n### Steps to reproduce the issue\r\n1. Upgrade from MacOS Mojave to MacOS Catalina\r\n```console\r\n\r\n$ spack load ...\r\n-bash: module: command not found\r\n```\r\n\r\n### Error Message\r\n \r\nAs shown above, I get the error: `module: command not found`. \r\nIf Spack reported an error, provide the error message. If it did not report an error\r\nbut the output appears incorrect, provide the incorrect output. If there was no error\r\nmessage and no output but the result is incorrect, describe how it does not match\r\nwhat you expect. To provide more information you might re-run the commands with \r\nthe additional -d/--stacktrace flags:\r\n```console\r\n$ spack -d --stacktrace load tmux\r\nlib/spack/spack/config.py:683 ==> [2020-01-06-16:48:57.091950] Reading config file /Users/jlconlin/spack/etc/spack/defaults/modules.yaml\r\nlib/spack/spack/config.py:683 ==> [2020-01-06-16:48:57.100733] Reading config file /Users/jlconlin/spack/etc/spack/defaults/darwin/modules.yaml\r\nlib/spack/spack/config.py:683 ==> [2020-01-06-16:48:57.104597] Reading config file /Users/jlconlin/spack/etc/spack/defaults/config.yaml\r\nlib/spack/spack/config.py:683 ==> [2020-01-06-16:48:57.116660] Reading config file /Users/jlconlin/.spack/config.yaml\r\nlib/spack/spack/cmd/__init__.py:98 ==> [2020-01-06-16:48:57.122577] Imported module from built-in commands\r\nlib/spack/spack/cmd/__init__.py:98 ==> [2020-01-06-16:48:57.133432] Imported module from built-in commands\r\nlib/spack/spack/database.py:214 ==> [2020-01-06-16:48:57.152617] DATABASE LOCK TIMEOUT: 120s\r\nlib/spack/spack/database.py:218 ==> [2020-01-06-16:48:57.153285] PACKAGE LOCK TIMEOUT: No timeout\r\nlib/spack/llnl/util/lock.py:334 ==> [2020-01-06-16:48:57.154775] READ LOCK: /Users/jlconlin/spack/opt/spack/.spack-db/lock[0:0] [Acquiring]\r\nlib/spack/llnl/util/lock.py:334 ==> [2020-01-06-16:48:57.155778] READ LOCK: /Users/jlconlin/spack/opt/spack/.spack-db/lock[0:0] [Acquired]\r\nlib/spack/spack/config.py:683 ==> [2020-01-06-16:48:57.185369] Reading config file /Users/jlconlin/spack/etc/spack/defaults/repos.yaml\r\nlib/spack/llnl/util/lock.py:334 ==> [2020-01-06-16:48:57.392742] READ LOCK: /Users/jlconlin/spack/opt/spack/.spack-db/lock[0:0] [Released]\r\nlib/spack/llnl/util/lock.py:334 ==> [2020-01-06-16:48:57.405821] READ LOCK: /Users/jlconlin/spack/opt/spack/.spack-db/lock[0:0] [Acquiring]\r\nlib/spack/llnl/util/lock.py:334 ==> [2020-01-06-16:48:57.406916] READ LOCK: /Users/jlconlin/spack/opt/spack/.spack-db/lock[0:0] [Acquired]\r\nlib/spack/llnl/util/lock.py:334 ==> [2020-01-06-16:48:57.424567] READ LOCK: /Users/jlconlin/spack/opt/spack/.spack-db/lock[0:0] [Released]\r\n-bash: module: command not found\r\n```\r\n\r\n### Information on your system\r\n\r\nThis includes:\r\n\r\n 1. which platform you are using\r\n     MacOS Catalina (10.15.2)\r\n 2. any relevant configuration detail (custom `packages.yaml` or `modules.yaml`, etc.)\r\n\r\n~/.spack/darwin/compilers.yaml\r\n```yaml\r\ncompilers:\r\n- compiler:\r\n    spec: clang@10.0.0-apple\r\n    paths:\r\n      cc: /usr/bin/clang\r\n      cxx: /usr/bin/clang++\r\n      f77:\r\n      fc:\r\n    flags: {}\r\n    operating_system: catalina\r\n    target: x86_64\r\n    modules: []\r\n    environment: {}\r\n    extra_rpaths: []\r\n```\r\n\r\n",
    "user": "jlconlin",
    "url": "https://api.github.com/repos/spack/spack/issues/14407",
    "updated_at": "2020-01-07 19:02:16",
    "created_at": "2020-01-06 23:53:45",
    "closed_at": "2020-01-07 18:49:21",
    "state": "closed",
    "title": "Upgrade to MacOS Catalina",
    "number": 14407,
    "milestone": null,
    "labels": [
        "bug"
    ],
    "id": 546001129,
    "html_url": "https://github.com/spack/spack/issues/14407",
    "assignees": [],
    "comments": 7
}