{
    "body": "### Steps to reproduce\n\n```\r\nspack mirror rm --scope defaults spack-public\r\nspack install pythia6\r\n```\n\n### Error message\n\n```\r\n$ spack -d install pythia6\r\n==> [2021-08-13-12:37:56.134480] Imported install from built-in commands\r\n==> [2021-08-13-12:37:56.139746] Reading config file /scratch/gartung/srcs/spack/etc/spack/defaults/config.yaml\r\n==> [2021-08-13-12:37:56.191788] Imported install from built-in commands\r\n==> [2021-08-13-12:37:56.193601] Reading config file /scratch/gartung/srcs/spack/etc/spack/defaults/repos.yaml\r\n==> [2021-08-13-12:37:56.237078] pythia6 applying constraint cmake\r\n==> [2021-08-13-12:37:56.237715] Reading config file /scratch/gartung/srcs/spack/etc/spack/defaults/packages.yaml\r\n==> [2021-08-13-12:37:56.287690] Reading config file /scratch/gartung/srcs/spack/etc/spack/packages.yaml\r\n==> [2021-08-13-12:37:56.314418] Reading config file /home/gartung/.spack/packages.yaml\r\n==> [2021-08-13-12:37:56.323339] pythia6 applying constraint cmake\r\n==> [2021-08-13-12:37:56.343533] Reading config file /scratch/gartung/srcs/spack/etc/spack/compilers.yaml\r\n==> [2021-08-13-12:37:56.385056] pythia6 applying constraint cmake\r\n==> [2021-08-13-12:37:56.388918] Ordered hashes [pythia6]: pythia6/0/d0817529347cbe70a4cac0da49410e5bf84f84d39f5e46810d8e278993e6e943\r\n==> [2021-08-13-12:37:56.390575] Reading config file /scratch/gartung/srcs/spack/etc/spack/defaults/bootstrap.yaml\r\n==> [2021-08-13-12:37:56.393743] DATABASE LOCK TIMEOUT: 3s\r\n==> [2021-08-13-12:37:56.393831] PACKAGE LOCK TIMEOUT: No timeout\r\n==> [2021-08-13-12:37:56.401552] Initializing the build queue from the build requests\r\n==> [2021-08-13-12:37:56.401643] Initializing the build queue for pythia6\r\n==> [2021-08-13-12:37:56.402070] Processing dependencies for pythia6-6.4.28-hkqkvacwuf23zvd67rwq3s2b3lksgihw: ('build', 'link', 'run')\r\n==> [2021-08-13-12:37:56.402250] Pkg id cmake-2.8.12.2-lfytfr3hr7w4o77fixjwxzrka5di5rqf has the following dependents:\r\n==> [2021-08-13-12:37:56.402312] - pythia6-6.4.28-hkqkvacwuf23zvd67rwq3s2b3lksgihw\r\n==> [2021-08-13-12:37:56.573344] Removing failure marking for pythia6\r\n==> [2021-08-13-12:37:56.573612] Pkg id pythia6-6.4.28-hkqkvacwuf23zvd67rwq3s2b3lksgihw has the following dependents:\r\n==> [2021-08-13-12:37:56.574034] Ensure all dependencies know all dependents across specs\r\n==> [2021-08-13-12:37:56.576252] cmake@2.8.12.2 : externally installed in /usr\r\n==> [2021-08-13-12:37:56.576345] cmake@2.8.12.2 : already registered in DB\r\n[+] /usr (external cmake-2.8.12.2-lfytfr3hr7w4o77fixjwxzrka5di5rqf)\r\n==> [2021-08-13-12:37:56.576482] Flagging cmake-2.8.12.2-lfytfr3hr7w4o77fixjwxzrka5di5rqf as installed\r\n==> [2021-08-13-12:37:56.576536] Removing cmake-2.8.12.2-lfytfr3hr7w4o77fixjwxzrka5di5rqf from pythia6-6.4.28-hkqkvacwuf23zvd67rwq3s2b3lksgihw's uninstalled dependencies.\r\n==> [2021-08-13-12:37:56.576627] pythia6-6.4.28-hkqkvacwuf23zvd67rwq3s2b3lksgihw: Removed cmake-2.8.12.2-lfytfr3hr7w4o77fixjwxzrka5di5rqf from uninstalled deps list: set()\r\n==> [2021-08-13-12:37:56.577099] Acquiring a write lock on pythia6-6.4.28-hkqkvacwuf23zvd67rwq3s2b3lksgihw with timeout 1e-09\r\n==> [2021-08-13-12:37:56.580252] Creating stage lock spack-stage-pythia6-6.4.28-hkqkvacwuf23zvd67rwq3s2b3lksgihw\r\n==> [2021-08-13-12:37:56.580435] Creating stage lock resource-update_notes-6.4.28.txt-hkqkvacwuf23zvd67rwq3s2b3lksgihw\r\n==> [2021-08-13-12:37:56.580570] Creating stage lock resource-lutp0613man2.pdf-hkqkvacwuf23zvd67rwq3s2b3lksgihw\r\n==> [2021-08-13-12:37:56.580693] Creating stage lock resource-pythia6-announcement.txt-hkqkvacwuf23zvd67rwq3s2b3lksgihw\r\n==> [2021-08-13-12:37:56.580813] Creating stage lock resource-main60.f-hkqkvacwuf23zvd67rwq3s2b3lksgihw\r\n==> [2021-08-13-12:37:56.580929] Creating stage lock resource-main61.f-hkqkvacwuf23zvd67rwq3s2b3lksgihw\r\n==> [2021-08-13-12:37:56.581044] Creating stage lock resource-main62.f-hkqkvacwuf23zvd67rwq3s2b3lksgihw\r\n==> [2021-08-13-12:37:56.581157] Creating stage lock resource-main63.f-hkqkvacwuf23zvd67rwq3s2b3lksgihw\r\n==> [2021-08-13-12:37:56.581278] Creating stage lock resource-main64.f-hkqkvacwuf23zvd67rwq3s2b3lksgihw\r\n==> [2021-08-13-12:37:56.581391] Creating stage lock resource-main65.f-hkqkvacwuf23zvd67rwq3s2b3lksgihw\r\n==> [2021-08-13-12:37:56.581503] Creating stage lock resource-main66.f-hkqkvacwuf23zvd67rwq3s2b3lksgihw\r\n==> [2021-08-13-12:37:56.581616] Creating stage lock resource-main67.f-hkqkvacwuf23zvd67rwq3s2b3lksgihw\r\n==> [2021-08-13-12:37:56.581728] Creating stage lock resource-main68.f-hkqkvacwuf23zvd67rwq3s2b3lksgihw\r\n==> [2021-08-13-12:37:56.581840] Creating stage lock resource-main69.f-hkqkvacwuf23zvd67rwq3s2b3lksgihw\r\n==> [2021-08-13-12:37:56.581951] Creating stage lock resource-main71.f-hkqkvacwuf23zvd67rwq3s2b3lksgihw\r\n==> [2021-08-13-12:37:56.582061] Creating stage lock resource-main72.f-hkqkvacwuf23zvd67rwq3s2b3lksgihw\r\n==> [2021-08-13-12:37:56.582169] Creating stage lock resource-main73.f-hkqkvacwuf23zvd67rwq3s2b3lksgihw\r\n==> [2021-08-13-12:37:56.582285] Creating stage lock resource-main75.f-hkqkvacwuf23zvd67rwq3s2b3lksgihw\r\n==> [2021-08-13-12:37:56.582396] Creating stage lock resource-main77.f-hkqkvacwuf23zvd67rwq3s2b3lksgihw\r\n==> [2021-08-13-12:37:56.582506] Creating stage lock resource-main78.f-hkqkvacwuf23zvd67rwq3s2b3lksgihw\r\n==> [2021-08-13-12:37:56.582616] Creating stage lock resource-main79.f-hkqkvacwuf23zvd67rwq3s2b3lksgihw\r\n==> [2021-08-13-12:37:56.582726] Creating stage lock resource-main81.f-hkqkvacwuf23zvd67rwq3s2b3lksgihw\r\n==> [2021-08-13-12:37:56.582838] Creating stage lock resource-ttbar.lhe-hkqkvacwuf23zvd67rwq3s2b3lksgihw\r\n==> [2021-08-13-12:37:56.584347] Installing pythia6-6.4.28-hkqkvacwuf23zvd67rwq3s2b3lksgihw\r\n==> [2021-08-13-12:37:56.584437] Searching for binary cache of pythia6-6.4.28-hkqkvacwuf23zvd67rwq3s2b3lksgihw\r\n==> [2021-08-13-12:37:56.584560] Reading config file /scratch/gartung/srcs/spack/etc/spack/defaults/mirrors.yaml\r\n==> [2021-08-13-12:37:56.586157] No Spack mirrors are currently configured\r\n==> [2021-08-13-12:37:56.586274] No binary for pythia6-6.4.28-hkqkvacwuf23zvd67rwq3s2b3lksgihw found: installing from source\r\n==> [2021-08-13-12:37:56.605404] '/usr/bin/git' 'describe' '--tags' '--match' 'v*'\r\n==> [2021-08-13-12:37:56.933873] [TOOLCHAIN] MATCH Gcc\r\n==> [2021-08-13-12:37:56.937111] Adding compiler bin/ paths: /scratch/gartung/srcs/spack/lib/spack/env /scratch/gartung/srcs/spack/lib/spack/env/case-insensitive /scratch/gartung/srcs/spack/lib/spack/env/gcc\r\n==> [2021-08-13-12:37:56.951105] A dependency has updated CPATH, this may lead pkg-config to assume that the package is part of the system includes and omit it when invoked with '--cflags'.\r\n==> [2021-08-13-12:37:57.039032] '/usr/bin/g++' '-v' '/tmp/spack-implicit-link-infonexjvp6t/main.c' '-o' '/tmp/spack-implicit-link-infonexjvp6t/output'\r\n==> [2021-08-13-12:37:57.162749] parsing implicit link info\r\n==> [2021-08-13-12:37:57.163825] linker line:  /usr/libexec/gcc/x86_64-redhat-linux/4.8.5/collect2 --build-id --no-add-needed --eh-frame-hdr --hash-style=gnu -m elf_x86_64 -dynamic-linker /lib64/ld-linux-x86-64.so.2 -o /tmp/spack-implicit-link-infonexjvp6t/output /usr/lib/gcc/x86_64-redhat-linux/4.8.5/../../../../lib64/crt1.o /usr/lib/gcc/x86_64-redhat-linux/4.8.5/../../../../lib64/crti.o /usr/lib/gcc/x86_64-redhat-linux/4.8.5/crtbegin.o -L/usr/lib/gcc/x86_64-redhat-linux/4.8.5 -L/usr/lib/gcc/x86_64-redhat-linux/4.8.5/../../../../lib64 -L/lib/../lib64 -L/usr/lib/../lib64 -L/usr/lib/gcc/x86_64-redhat-linux/4.8.5/../../.. /tmp/cc9cHLlO.o -lstdc++ -lm -lgcc_s -lgcc -lc -lgcc_s -lgcc /usr/lib/gcc/x86_64-redhat-linux/4.8.5/crtend.o /usr/lib/gcc/x86_64-redhat-linux/4.8.5/../../../../lib64/crtn.o\r\n==> [2021-08-13-12:37:57.164118] linkdir: /usr/lib/gcc/x86_64-redhat-linux/4.8.5\r\n==> [2021-08-13-12:37:57.164296] linkdir: /usr/lib/gcc/x86_64-redhat-linux/4.8.5/../../../../lib64\r\n==> [2021-08-13-12:37:57.164442] linkdir: /lib/../lib64\r\n==> [2021-08-13-12:37:57.164572] linkdir: /usr/lib/../lib64\r\n==> [2021-08-13-12:37:57.164696] linkdir: /usr/lib/gcc/x86_64-redhat-linux/4.8.5/../../..\r\n==> [2021-08-13-12:37:57.164847] found raw link dirs: /usr/lib/gcc/x86_64-redhat-linux/4.8.5, /usr/lib/gcc/x86_64-redhat-linux/4.8.5/../../../../lib64, /lib/../lib64, /usr/lib/../lib64, /usr/lib/gcc/x86_64-redhat-linux/4.8.5/../../..\r\n==> [2021-08-13-12:37:57.165170] found link dirs: /usr/lib/gcc/x86_64-redhat-linux/4.8.5, /usr/lib64, /lib64, /usr/lib\r\n==> [2021-08-13-12:37:57.174720] Checking existence of http://www.hepforge.org/archive/pythiasix/pythia-6.4.28.tgz\r\n==> [2021-08-13-12:37:58.578313] FailedDownloadError: Failed to fetch file from URL: http://www.hepforge.org/archive/pythiasix/pythia-6.4.28.tgz\r\n    Urllib fetch failed to verify url http://www.hepforge.org/archive/pythiasix/pythia-6.4.28.tgz\r\n==> [2021-08-13-12:37:58.580464] Fetching from http://www.hepforge.org/archive/pythiasix/pythia-6.4.28.tgz failed.\r\n==> [2021-08-13-12:37:58.611631] Error: FetchError: All fetchers failed\r\n\r\n/scratch/gartung/srcs/spack/lib/spack/spack/package.py:1379, in do_fetch:\r\n       1376\r\n       1377        self.stage.create()\r\n       1378        err_msg = None if not self.manual_download else self.download_instr\r\n  >>   1379        start_time = time.time()\r\n       1380        self.stage.fetch(mirror_only, err_msg=err_msg)\r\n       1381        self._fetch_time = time.time() - start_time\r\n       1382\r\n\r\n\r\nTraceback (most recent call last):\r\n  File \"/scratch/gartung/srcs/spack/lib/spack/spack/build_environment.py\", line 1013, in _setup_pkg_and_run\r\n    return_value = function(pkg, kwargs)\r\n  File \"/scratch/gartung/srcs/spack/lib/spack/spack/installer.py\", line 1890, in build_process\r\n    return installer.run()\r\n  File \"/scratch/gartung/srcs/spack/lib/spack/spack/installer.py\", line 1727, in run\r\n    self.pkg.do_patch()\r\n  File \"/scratch/gartung/srcs/spack/lib/spack/spack/package.py\", line 1416, in do_patch\r\n    self.do_stage()\r\n  File \"/scratch/gartung/srcs/spack/lib/spack/spack/package.py\", line 1401, in do_stage\r\n    self.do_fetch(mirror_only)\r\n  File \"/scratch/gartung/srcs/spack/lib/spack/spack/package.py\", line 1380, in do_fetch\r\n    self.stage.fetch(mirror_only, err_msg=err_msg)\r\n  File \"/scratch/gartung/srcs/spack/lib/spack/spack/util/pattern.py\", line 23, in __call__\r\n    for item in self.container]\r\n  File \"/scratch/gartung/srcs/spack/lib/spack/spack/util/pattern.py\", line 23, in <listcomp>\r\n    for item in self.container]\r\n  File \"/scratch/gartung/srcs/spack/lib/spack/spack/stage.py\", line 507, in fetch\r\n    raise fs.FetchError(err_msg or 'All fetchers failed', None)\r\nspack.fetch_strategy.FetchError: All fetchers failed\r\n==> [2021-08-13-12:37:58.613119] Flagging pythia6-6.4.28-hkqkvacwuf23zvd67rwq3s2b3lksgihw as failed: FetchError: All fetchers failed\r\n==> [2021-08-13-12:37:58.622721] ChildError: FetchError: All fetchers failed\r\n```\n\n### Information on your system\n\n* **Spack:** 0.16.2-3907-f0875b2\r\n* **Python:** 3.6.8\r\n* **Platform:** linux-scientific7-skylake_avx512\r\n* **Concretizer:** original\n\n### General information\n\n- [X] I have run `spack debug report` and reported the version of Spack/Python/Platform\n- [X] I have searched the issues of this repo and believe this is not a duplicate\n- [X] I have run the failing commands in debug mode and reported the output",
    "user": "gartung",
    "url": "https://api.github.com/repos/spack/spack/issues/25419",
    "updated_at": "2021-08-17 17:41:42",
    "created_at": "2021-08-13 17:39:29",
    "closed_at": "2021-08-13 18:08:14",
    "state": "closed",
    "title": "Spack fetch error if url no longer exists and spack-public mirror removed",
    "number": 25419,
    "milestone": null,
    "labels": [
        "bug",
        "fetching",
        "triage"
    ],
    "id": 970596960,
    "html_url": "https://github.com/spack/spack/issues/25419",
    "assignees": [],
    "comments": 4
}