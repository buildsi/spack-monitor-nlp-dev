{
    "body": "### Steps to reproduce\r\n\r\nI ran `spack --debug install patchelf` trying to install the package. The same problem happens with literally any other package I try to install .\r\n\r\nInterestingly the folder `/afs/cern.ch/user/l/lgiacome/.spack/bootstrap/store/linux-centos7-x86_64/gcc-9.3.0/` doesn't exist but but spack creates the folder `/afs/cern.ch/user/l/lgiacome/.spack/bootstrap/store/linux-rhel5-x86_64/gcc-9.3.0/` as if it used the wrong architecture.\r\n\r\nI am able to create folders inside `/afs/cern.ch/user/l/lgiacome/.spack/bootstrap/store/` so I don't think it's actually a problem of permissions.\r\n\r\n### Error message\r\n\r\n```\r\nlib/spack/spack/cmd/__init__.py:123 ==> [2022-01-13-22:16:24.481432] Imported install from built-in commands\r\nlib/spack/spack/config.py:1006 ==> [2022-01-13-22:16:24.485383] Reading config file /afs/cern.ch/user/l/lgiacome/spack/etc/spack/defaults/config.yaml\r\nlib/spack/spack/cmd/__init__.py:123 ==> [2022-01-13-22:16:24.546113] Imported install from built-in commands\r\nlib/spack/spack/config.py:1006 ==> [2022-01-13-22:16:24.550633] Reading config file /afs/cern.ch/user/l/lgiacome/spack/etc/spack/defaults/bootstrap.yaml\r\nlib/spack/spack/config.py:1006 ==> [2022-01-13-22:16:24.571387] Reading config file /afs/cern.ch/user/l/lgiacome/spack/etc/spack/defaults/config.yaml\r\nlib/spack/spack/database.py:374 ==> [2022-01-13-22:16:24.599009] DATABASE LOCK TIMEOUT: 3s\r\nlib/spack/spack/database.py:378 ==> [2022-01-13-22:16:24.599409] PACKAGE LOCK TIMEOUT: No timeout\r\nlib/spack/spack/config.py:1006 ==> [2022-01-13-22:16:24.600353] Reading config file /afs/cern.ch/user/l/lgiacome/spack/etc/spack/defaults/bootstrap.yaml\r\nlib/spack/spack/database.py:374 ==> [2022-01-13-22:16:24.611716] DATABASE LOCK TIMEOUT: 3s\r\nlib/spack/spack/database.py:378 ==> [2022-01-13-22:16:24.612135] PACKAGE LOCK TIMEOUT: No timeout\r\nlib/spack/spack/bootstrap.py:604 ==> [2022-01-13-22:16:24.612560] [BOOTSTRAP CONFIG SCOPE] name=_builtin\r\nlib/spack/spack/bootstrap.py:620 ==> [2022-01-13-22:16:24.613368] [BOOTSTRAP CONFIG SCOPE] name=defaults, path=/afs/cern.ch/user/l/lgiacome/spack/etc/spack/defaults\r\nlib/spack/spack/bootstrap.py:621 ==> [2022-01-13-22:16:24.613685] [BOOTSTRAP CONFIG SCOPE] name=defaults/linux, path=/afs/cern.ch/user/l/lgiacome/spack/etc/spack/defaults/linux\r\nlib/spack/spack/bootstrap.py:620 ==> [2022-01-13-22:16:24.614000] [BOOTSTRAP CONFIG SCOPE] name=bootstrap, path=/afs/cern.ch/user/l/lgiacome/.spack/bootstrap/config\r\nlib/spack/spack/bootstrap.py:621 ==> [2022-01-13-22:16:24.614308] [BOOTSTRAP CONFIG SCOPE] name=bootstrap/linux, path=/afs/cern.ch/user/l/lgiacome/.spack/bootstrap/config/linux\r\nlib/spack/spack/config.py:1006 ==> [2022-01-13-22:16:24.616909] Reading config file /afs/cern.ch/user/l/lgiacome/.spack/bootstrap/config/linux/compilers.yaml\r\nlib/spack/spack/bootstrap.py:753 ==> [2022-01-13-22:16:24.692917] [BOOTSTRAP ROOT SPEC] clingo-bootstrap@spack+python %gcc target=x86_64\r\nlib/spack/spack/bootstrap.py:503 ==> [2022-01-13-22:16:24.693694] [BOOTSTRAP MODULE clingo] Try importing from Python\r\nlib/spack/spack/config.py:1006 ==> [2022-01-13-22:16:24.695376] Reading config file /afs/cern.ch/user/l/lgiacome/spack/etc/spack/defaults/bootstrap.yaml\r\nlib/spack/spack/bootstrap.py:521 ==> [2022-01-13-22:16:24.716634] Bootstrapping clingo from pre-built binaries\r\nlib/spack/spack/config.py:1006 ==> [2022-01-13-22:16:24.720251] Reading config file /afs/cern.ch/user/l/lgiacome/spack/etc/spack/defaults/config.yaml\r\nlib/spack/spack/database.py:374 ==> [2022-01-13-22:16:24.753325] DATABASE LOCK TIMEOUT: 3s\r\nlib/spack/spack/database.py:378 ==> [2022-01-13-22:16:24.753685] PACKAGE LOCK TIMEOUT: No timeout\r\nlib/spack/spack/config.py:1006 ==> [2022-01-13-22:16:24.780356] Reading config file /afs/cern.ch/user/l/lgiacome/spack/etc/spack/defaults/mirrors.yaml\r\nlib/spack/spack/binary_distribution.py:430 ==> [2022-01-13-22:16:24.858485] Cached index for https://mirror.spack.io/bootstrap/github-actions/v0.1 already up to date\r\nlib/spack/spack/config.py:1006 ==> [2022-01-13-22:16:24.903924] Reading config file /afs/cern.ch/user/l/lgiacome/spack/etc/spack/defaults/mirrors.yaml\r\nlib/spack/spack/config.py:1006 ==> [2022-01-13-22:16:24.909792] Reading config file /afs/cern.ch/user/l/lgiacome/spack/etc/spack/defaults/config.yaml\r\nlib/spack/spack/config.py:1006 ==> [2022-01-13-22:16:24.942145] Reading config file /afs/cern.ch/user/l/lgiacome/.spack/bootstrap/config/linux/config.yaml\r\nlib/spack/spack/binary_distribution.py:430 ==> [2022-01-13-22:16:25.011646] Cached index for https://mirror.spack.io/bootstrap/github-actions/v0.1 already up to date\r\nlib/spack/spack/stage.py:327 ==> [2022-01-13-22:16:25.148727] Creating stage lock build_cache\r\nlib/spack/spack/fetch_strategy.py:339 ==> [2022-01-13-22:16:25.149831] Checking existence of https://mirror.spack.io/bootstrap/github-actions/v0.1/build_cache/linux-rhel5-x86_64/gcc-9.3.0/clingo-bootstrap-spack/linux-rhel5-x86_64-gcc-9.3.0-clingo-bootstrap-spack-ffoyoewfd6pdwbjniodfkqusyvkrbhyi.spack\r\nlib/spack/spack/fetch_strategy.py:379 ==> [2022-01-13-22:16:25.207484] Fetching https://mirror.spack.io/bootstrap/github-actions/v0.1/build_cache/linux-rhel5-x86_64/gcc-9.3.0/clingo-bootstrap-spack/linux-rhel5-x86_64-gcc-9.3.0-clingo-bootstrap-spack-ffoyoewfd6pdwbjniodfkqusyvkrbhyi.spack\r\nlib/spack/spack/binary_distribution.py:1591 ==> [2022-01-13-22:16:25.425866] Verified SHA256 checksum of the build cache\r\nlib/spack/spack/binary_distribution.py:1593 ==> [2022-01-13-22:16:25.429530] Installing \"clingo-bootstrap@spack%gcc@9.3.0~docs~ipo+python build_type=Release arch=linux-rhel5-x86_64\" from a buildcache\r\nlib/spack/spack/binary_distribution.py:1511 ==> [2022-01-13-22:16:25.576119] old relative prefix linux-rhel5-x86_64/gcc-9.3.0/clingo-bootstrap-spack-ffoyoewfd6pdwbjniodfkqusyvkrbhyi\r\nnew relative prefix linux-rhel5-x86_64/gcc-9.3.0/clingo-bootstrap-spack-ffoyoewfd6pdwbjniodfkqusyvkrbhyi\r\nrelative rpaths False\r\nlib/spack/spack/binary_distribution.py:1369 ==> [2022-01-13-22:16:27.578452] Relocating package from\r\n  /home/spack/spack/opt/spack to /afs/cern.ch/user/l/lgiacome/.spack/bootstrap/store.\r\nlib/spack/spack/bootstrap.py:753 ==> [2022-01-13-22:16:27.591121] [BOOTSTRAP ROOT SPEC] patchelf@0.13.1:0.13.99 %gcc target=x86_64\r\nlib/spack/spack/config.py:1006 ==> [2022-01-13-22:16:27.592283] Reading config file /afs/cern.ch/user/l/lgiacome/spack/etc/spack/defaults/bootstrap.yaml\r\nlib/spack/spack/config.py:1006 ==> [2022-01-13-22:16:27.604420] Reading config file /afs/cern.ch/user/l/lgiacome/.spack/bootstrap/config/linux/bootstrap.yaml\r\nlib/spack/spack/bootstrap.py:195 ==> [2022-01-13-22:16:27.613310] [BOOTSTRAP EXECUTABLES patchelf] Try installed specs with query 'patchelf@0.13.1:0.13.99 %gcc target=x86_64'\r\nlib/spack/spack/bootstrap.py:570 ==> [2022-01-13-22:16:27.616038] Bootstrapping patchelf from pre-built binaries\r\nlib/spack/spack/bootstrap.py:586 ==> [2022-01-13-22:16:27.617139] [BOOTSTRAP EXECUTABLES patchelf] Unexpected error \"[Errno 2] No such file or directory: '/afs/cern.ch/user/l/lgiacome/spack/share/spack/bootstrap/github-actions/patchelf.json'\"\r\nlib/spack/spack/bootstrap.py:195 ==> [2022-01-13-22:16:27.617588] [BOOTSTRAP EXECUTABLES patchelf] Try installed specs with query 'patchelf@0.13.1:0.13.99 %gcc target=x86_64'\r\nlib/spack/spack/util/executable.py:190 ==> [2022-01-13-22:16:27.744039] '/cvmfs/sft.cern.ch/lcg/releases/LCG_100/CMake/3.20.0/x86_64-centos7-gcc9-opt/bin/cmake' '--version'\r\nlib/spack/spack/util/executable.py:190 ==> [2022-01-13-22:16:27.778698] '/cvmfs/sft.cern.ch/lcg/releases/LCG_100cuda/CMake/3.20.0/x86_64-centos7-gcc8-opt/bin/cmake' '--version'\r\nlib/spack/spack/detection/path.py:135 ==> [2022-01-13-22:16:27.813627] Executables in /cvmfs/sft.cern.ch/lcg/releases/LCG_100cuda/CMake/3.20.0/x86_64-centos7-gcc8-opt/bin and /cvmfs/sft.cern.ch/lcg/releases/LCG_100/CMake/3.20.0/x86_64-centos7-gcc9-opt/bin are both associated with the same spec cmake@3.20.0\r\nlib/spack/spack/util/executable.py:190 ==> [2022-01-13-22:16:27.814649] '/usr/bin/cmake' '--version'\r\nlib/spack/spack/util/executable.py:190 ==> [2022-01-13-22:16:27.848936] '/usr/bin/bison' '--version'\r\nlib/spack/spack/util/executable.py:190 ==> [2022-01-13-22:16:27.856617] '/usr/bin/gawk' '--version'\r\nlib/spack/spack/config.py:1006 ==> [2022-01-13-22:16:27.863929] Reading config file /afs/cern.ch/user/l/lgiacome/spack/etc/spack/defaults/packages.yaml\r\nlib/spack/spack/config.py:1006 ==> [2022-01-13-22:16:27.907094] Reading config file /afs/cern.ch/user/l/lgiacome/.spack/bootstrap/config/packages.yaml\r\nlib/spack/spack/config.py:1006 ==> [2022-01-13-22:16:27.930912] Reading config file /afs/cern.ch/user/l/lgiacome/spack/etc/spack/defaults/config.yaml\r\nlib/spack/spack/bootstrap.py:423 ==> [2022-01-13-22:16:27.998662] [BOOTSTRAP] Try installing 'patchelf@0.13.1:0.13.99 %gcc target=x86_64' from sources\r\nlib/spack/spack/installer.py:1439 ==> [2022-01-13-22:16:28.000010] Initializing the build queue from the build requests\r\nlib/spack/spack/installer.py:1055 ==> [2022-01-13-22:16:28.000466] Initializing the build queue for patchelf\r\nlib/spack/spack/installer.py:2313 ==> [2022-01-13-22:16:28.006319] Processing dependencies for patchelf-0.13.1-627yqn5xnpgjtcxomvbyjuplnzaxjkeo: ('build', 'link', 'run')\r\nlib/spack/spack/database.py:478 ==> [2022-01-13-22:16:28.016459] Removing failure marking for patchelf\r\nlib/spack/spack/installer.py:2049 ==> [2022-01-13-22:16:28.018363] Pkg id patchelf-0.13.1-627yqn5xnpgjtcxomvbyjuplnzaxjkeo has the following dependents:\r\nlib/spack/spack/installer.py:1260 ==> [2022-01-13-22:16:28.019662] Requeueing a build task for patchelf-0.13.1-627yqn5xnpgjtcxomvbyjuplnzaxjkeo with status 'queued'\r\nlib/spack/spack/installer.py:1445 ==> [2022-01-13-22:16:28.020092] Ensure all dependencies know all dependents across specs\r\nlib/spack/spack/installer.py:1516 ==> [2022-01-13-22:16:28.024870] Processing patchelf-0.13.1-627yqn5xnpgjtcxomvbyjuplnzaxjkeo: task=priority=0, status=dequeued, start=0, #dependencies=0\r\nlib/spack/spack/installer.py:1000 ==> [2022-01-13-22:16:28.026077] Acquiring a write lock on patchelf-0.13.1-627yqn5xnpgjtcxomvbyjuplnzaxjkeo with timeout 1e-09\r\nlib/spack/spack/installer.py:1027 ==> [2022-01-13-22:16:28.026900] patchelf-0.13.1-627yqn5xnpgjtcxomvbyjuplnzaxjkeo is now write locked\r\nlib/spack/spack/installer.py:1160 ==> [2022-01-13-22:16:28.035074] Installing patchelf-0.13.1-627yqn5xnpgjtcxomvbyjuplnzaxjkeo\r\nlib/spack/spack/installer.py:403 ==> [2022-01-13-22:16:28.035572] Searching for binary cache of patchelf-0.13.1-627yqn5xnpgjtcxomvbyjuplnzaxjkeo\r\nlib/spack/spack/binary_distribution.py:1638 ==> [2022-01-13-22:16:29.385319] Did not find linux-centos7-x86_64-gcc-9.3.0-patchelf-0.13.1-627yqn5xnpgjtcxomvbyjuplnzaxjkeo.spec.json on https://mirror.spack.io/bootstrap/github-actions/v0.1/build_cache/linux-centos7-x86_64-gcc-9.3.0-patchelf-0.13.1-627yqn5xnpgjtcxomvbyjuplnzaxjkeo.spec.json\r\n  Download failed: HTTP Error 404: Not Found\r\nlib/spack/spack/binary_distribution.py:1640 ==> [2022-01-13-22:16:29.385943] Did not find linux-centos7-x86_64-gcc-9.3.0-patchelf-0.13.1-627yqn5xnpgjtcxomvbyjuplnzaxjkeo.spec.json on https://mirror.spack.io/bootstrap/github-actions/v0.1/build_cache/linux-centos7-x86_64-gcc-9.3.0-patchelf-0.13.1-627yqn5xnpgjtcxomvbyjuplnzaxjkeo.spec.yaml\r\n  Download failed: HTTP Error 404: Not Found\r\nlib/spack/spack/installer.py:286 ==> [2022-01-13-22:16:29.387100] No binary for patchelf-0.13.1-627yqn5xnpgjtcxomvbyjuplnzaxjkeo found: installing from source\r\nlib/spack/spack/installer.py:1334 ==> [2022-01-13-22:16:29.387726] Creating the installation directory /afs/cern.ch/user/l/lgiacome/.spack/bootstrap/store/linux-centos7-x86_64/gcc-9.3.0/patchelf-0.13.1-627yqn5xnpgjtcxomvbyjuplnzaxjkeo\r\nlib/spack/spack/installer.py:1369 ==> [2022-01-13-22:16:29.394333] Flagging patchelf-0.13.1-627yqn5xnpgjtcxomvbyjuplnzaxjkeo as failed: [Errno 13] Permission denied: '/afs/cern.ch/user/l/lgiacome/.spack/bootstrap/store/linux-centos7-x86_64/gcc-9.3.0/patchelf-0.13.1-627yqn5xnpgjtcxomvbyjuplnzaxjkeo'\r\nlib/spack/spack/installer.py:1678 ==> [2022-01-13-22:16:29.397181] Error: Failed to install patchelf due to PermissionError: [Errno 13] Permission denied: '/afs/cern.ch/user/l/lgiacome/.spack/bootstrap/store/linux-centos7-x86_64/gcc-9.3.0/patchelf-0.13.1-627yqn5xnpgjtcxomvbyjuplnzaxjkeo'\r\nlib/spack/spack/stage.py:327 ==> [2022-01-13-22:16:29.406452] Creating stage lock spack-stage-patchelf-0.13.1-627yqn5xnpgjtcxomvbyjuplnzaxjkeo\r\nlib/spack/spack/bootstrap.py:586 ==> [2022-01-13-22:16:29.406947] [BOOTSTRAP EXECUTABLES patchelf] Unexpected error \"[Errno 13] Permission denied: '/afs/cern.ch/user/l/lgiacome/.spack/bootstrap/store/linux-centos7-x86_64/gcc-9.3.0/patchelf-0.13.1-627yqn5xnpgjtcxomvbyjuplnzaxjkeo'\"\r\nlib/spack/spack/bootstrap.py:525 ==> [2022-01-13-22:16:29.656579] [BOOTSTRAP MODULE clingo] Unexpected error \"cannot bootstrap any of the patchelf executables from spec \"patchelf@0.13.1:0.13.99 %gcc target=x86_64\"\"\r\nlib/spack/spack/config.py:1006 ==> [2022-01-13-22:16:29.657257] Reading config file /afs/cern.ch/user/l/lgiacome/spack/etc/spack/defaults/bootstrap.yaml\r\nlib/spack/spack/config.py:1006 ==> [2022-01-13-22:16:29.670251] Reading config file /afs/cern.ch/user/l/lgiacome/.spack/bootstrap/config/linux/bootstrap.yaml\r\nlib/spack/spack/bootstrap.py:521 ==> [2022-01-13-22:16:29.682710] Bootstrapping clingo from sources\r\nlib/spack/spack/util/executable.py:190 ==> [2022-01-13-22:16:29.759292] '/cvmfs/sft.cern.ch/lcg/releases/LCG_100/CMake/3.20.0/x86_64-centos7-gcc9-opt/bin/cmake' '--version'\r\nlib/spack/spack/util/executable.py:190 ==> [2022-01-13-22:16:29.795410] '/cvmfs/sft.cern.ch/lcg/releases/LCG_100cuda/CMake/3.20.0/x86_64-centos7-gcc8-opt/bin/cmake' '--version'\r\nlib/spack/spack/detection/path.py:135 ==> [2022-01-13-22:16:29.828968] Executables in /cvmfs/sft.cern.ch/lcg/releases/LCG_100cuda/CMake/3.20.0/x86_64-centos7-gcc8-opt/bin and /cvmfs/sft.cern.ch/lcg/releases/LCG_100/CMake/3.20.0/x86_64-centos7-gcc9-opt/bin are both associated with the same spec cmake@3.20.0\r\nlib/spack/spack/util/executable.py:190 ==> [2022-01-13-22:16:29.829925] '/usr/bin/cmake' '--version'\r\nlib/spack/spack/util/executable.py:190 ==> [2022-01-13-22:16:29.855039] '/usr/bin/bison' '--version'\r\nlib/spack/spack/util/executable.py:190 ==> [2022-01-13-22:16:29.862483] '/usr/bin/gawk' '--version'\r\nlib/spack/spack/config.py:1006 ==> [2022-01-13-22:16:29.869755] Reading config file /afs/cern.ch/user/l/lgiacome/spack/etc/spack/defaults/packages.yaml\r\nlib/spack/spack/config.py:1006 ==> [2022-01-13-22:16:29.916894] Reading config file /afs/cern.ch/user/l/lgiacome/.spack/bootstrap/config/packages.yaml\r\nlib/spack/spack/spec.py:2894 ==> [2022-01-13-22:16:29.959738] diffutils applying constraint iconv\r\nlib/spack/spack/spec.py:2894 ==> [2022-01-13-22:16:29.993235] ncurses applying constraint pkgconfig\r\nlib/spack/spack/spec.py:2894 ==> [2022-01-13-22:16:29.997142] readline applying constraint ncurses\r\nlib/spack/spack/spec.py:2894 ==> [2022-01-13-22:16:30.002060] gdbm applying constraint readline\r\nlib/spack/spack/spec.py:2894 ==> [2022-01-13-22:16:30.019301] bzip2 applying constraint diffutils\r\nlib/spack/spack/spec.py:2894 ==> [2022-01-13-22:16:30.029188] perl applying constraint gdbm@:1.19\r\nlib/spack/spack/spec.py:2894 ==> [2022-01-13-22:16:30.034039] perl applying constraint berkeley-db\r\nlib/spack/spack/spec.py:2894 ==> [2022-01-13-22:16:30.038926] perl applying constraint bzip2\r\nlib/spack/spack/spec.py:2894 ==> [2022-01-13-22:16:30.044106] perl applying constraint zlib\r\nlib/spack/spack/spec.py:2894 ==> [2022-01-13-22:16:30.048217] bison applying constraint diffutils\r\nlib/spack/spack/spec.py:2894 ==> [2022-01-13-22:16:30.053008] bison applying constraint m4\r\nlib/spack/spack/spec.py:2894 ==> [2022-01-13-22:16:30.057249] bison applying constraint perl\r\nlib/spack/spack/spec.py:2894 ==> [2022-01-13-22:16:30.062119] clingo-bootstrap applying constraint python\r\nlib/spack/spack/spec.py:2894 ==> [2022-01-13-22:16:30.066340] python applying constraint pkgconfig@0.9.0:\r\nlib/spack/spack/spec.py:2894 ==> [2022-01-13-22:16:30.076295] python applying constraint pkgconfig@0.9.0:\r\nlib/spack/spack/spec.py:2894 ==> [2022-01-13-22:16:30.084524] clingo-bootstrap applying constraint cmake@3.16.0:\r\nlib/spack/spack/spec.py:2894 ==> [2022-01-13-22:16:30.088069] clingo-bootstrap applying constraint re2c@0.13:\r\nlib/spack/spack/spec.py:2894 ==> [2022-01-13-22:16:30.091906] clingo-bootstrap applying constraint bison@2.5:\r\nlib/spack/spack/spec.py:2894 ==> [2022-01-13-22:16:30.095155] clingo-bootstrap applying constraint python\r\nlib/spack/spack/spec.py:2894 ==> [2022-01-13-22:16:30.123680] clingo-bootstrap applying constraint cmake@3.16.0:\r\nlib/spack/spack/spec.py:2894 ==> [2022-01-13-22:16:30.128455] clingo-bootstrap applying constraint re2c@0.13:\r\nlib/spack/spack/spec.py:2894 ==> [2022-01-13-22:16:30.131040] clingo-bootstrap applying constraint bison@2.5:\r\nlib/spack/spack/spec.py:2894 ==> [2022-01-13-22:16:30.133713] clingo-bootstrap applying constraint python\r\nlib/spack/spack/spec.py:2894 ==> [2022-01-13-22:16:30.135765] python applying constraint pkgconfig@0.9.0:\r\nlib/spack/spack/spec.py:2894 ==> [2022-01-13-22:16:30.151852] clingo-bootstrap applying constraint cmake@3.16.0:\r\nlib/spack/spack/spec.py:2894 ==> [2022-01-13-22:16:30.154732] clingo-bootstrap applying constraint re2c@0.13:\r\nlib/spack/spack/spec.py:2894 ==> [2022-01-13-22:16:30.157831] clingo-bootstrap applying constraint bison@2.5:\r\nlib/spack/spack/spec.py:2894 ==> [2022-01-13-22:16:30.160401] clingo-bootstrap applying constraint python\r\nlib/spack/spack/spec.py:2894 ==> [2022-01-13-22:16:30.162558] python applying constraint pkgconfig@0.9.0:\r\nlib/spack/spack/spec.py:2894 ==> [2022-01-13-22:16:30.175849] clingo-bootstrap applying constraint cmake@3.16.0:\r\nlib/spack/spack/spec.py:2894 ==> [2022-01-13-22:16:30.178787] clingo-bootstrap applying constraint re2c@0.13:\r\nlib/spack/spack/spec.py:2894 ==> [2022-01-13-22:16:30.181344] clingo-bootstrap applying constraint bison@2.5:\r\nlib/spack/spack/spec.py:2894 ==> [2022-01-13-22:16:30.183881] clingo-bootstrap applying constraint python\r\nlib/spack/spack/spec.py:2894 ==> [2022-01-13-22:16:30.261069] clingo-bootstrap applying constraint cmake@3.16.0:\r\nlib/spack/spack/spec.py:2894 ==> [2022-01-13-22:16:30.265015] clingo-bootstrap applying constraint re2c@0.13:\r\nlib/spack/spack/spec.py:2894 ==> [2022-01-13-22:16:30.268867] clingo-bootstrap applying constraint bison@2.5:\r\nlib/spack/spack/spec.py:2894 ==> [2022-01-13-22:16:30.271845] clingo-bootstrap applying constraint python\r\nlib/spack/spack/spec.py:2565 ==> [2022-01-13-22:16:30.295415] Ordered hashes [bison]: bison/29/b72914fe38e54a6fc25f29019e0a0786705c4f61ce20d414cc2010c8d62448c7\r\nlib/spack/spack/bootstrap.py:392 ==> [2022-01-13-22:16:30.304438] [BOOTSTRAP MODULE clingo] Try installing 'clingo-bootstrap@spack+python %gcc target=x86_64' from sources\r\nlib/spack/spack/installer.py:1439 ==> [2022-01-13-22:16:30.305699] Initializing the build queue from the build requests\r\nlib/spack/spack/installer.py:1055 ==> [2022-01-13-22:16:30.306062] Initializing the build queue for clingo-bootstrap\r\nlib/spack/spack/config.py:1006 ==> [2022-01-13-22:16:30.309290] Reading config file /afs/cern.ch/user/l/lgiacome/spack/etc/spack/defaults/config.yaml\r\nlib/spack/spack/config.py:1006 ==> [2022-01-13-22:16:30.339463] Reading config file /afs/cern.ch/user/l/lgiacome/.spack/bootstrap/config/linux/config.yaml\r\nlib/spack/spack/installer.py:2313 ==> [2022-01-13-22:16:30.353845] Processing dependencies for clingo-bootstrap-spack-pfxrzmtnlrudqugxsboxj7bxqxc55udq: ('build', 'link', 'run')\r\nlib/spack/spack/installer.py:2049 ==> [2022-01-13-22:16:30.354494] Pkg id bison-3.0.4-43mqgpsrrxp7xfktgegbcduvirykzuuv has the following dependents:\r\nlib/spack/spack/installer.py:2051 ==> [2022-01-13-22:16:30.354842] - clingo-bootstrap-spack-pfxrzmtnlrudqugxsboxj7bxqxc55udq\r\nlib/spack/spack/installer.py:1260 ==> [2022-01-13-22:16:30.356185] Requeueing a build task for bison-3.0.4-43mqgpsrrxp7xfktgegbcduvirykzuuv with status 'queued'\r\nlib/spack/spack/installer.py:2049 ==> [2022-01-13-22:16:30.588070] Pkg id cmake-3.20.0-bcjqmxoxceng4wlia36ydqw36q2p6esi has the following dependents:\r\nlib/spack/spack/installer.py:2051 ==> [2022-01-13-22:16:30.588483] - clingo-bootstrap-spack-pfxrzmtnlrudqugxsboxj7bxqxc55udq\r\nlib/spack/spack/installer.py:1260 ==> [2022-01-13-22:16:30.589740] Requeueing a build task for cmake-3.20.0-bcjqmxoxceng4wlia36ydqw36q2p6esi with status 'queued'\r\nlib/spack/spack/installer.py:2049 ==> [2022-01-13-22:16:30.604837] Pkg id python-3.7-uhx6qlyyx2ypjziwwuwoiudnrlsuieg2 has the following dependents:\r\nlib/spack/spack/installer.py:2051 ==> [2022-01-13-22:16:30.605240] - clingo-bootstrap-spack-pfxrzmtnlrudqugxsboxj7bxqxc55udq\r\nlib/spack/spack/installer.py:1260 ==> [2022-01-13-22:16:30.606410] Requeueing a build task for python-3.7-uhx6qlyyx2ypjziwwuwoiudnrlsuieg2 with status 'queued'\r\nlib/spack/spack/installer.py:2049 ==> [2022-01-13-22:16:30.669031] Pkg id re2c-2.2-6q3zvmrdlfz6uvetpggucjsnu3ekzdlg has the following dependents:\r\nlib/spack/spack/installer.py:2051 ==> [2022-01-13-22:16:30.669484] - clingo-bootstrap-spack-pfxrzmtnlrudqugxsboxj7bxqxc55udq\r\nlib/spack/spack/installer.py:1260 ==> [2022-01-13-22:16:30.670770] Requeueing a build task for re2c-2.2-6q3zvmrdlfz6uvetpggucjsnu3ekzdlg with status 'queued'\r\nlib/spack/spack/database.py:478 ==> [2022-01-13-22:16:30.685466] Removing failure marking for re2c\r\nlib/spack/spack/database.py:478 ==> [2022-01-13-22:16:30.720603] Removing failure marking for clingo-bootstrap\r\nlib/spack/spack/installer.py:2049 ==> [2022-01-13-22:16:30.722625] Pkg id clingo-bootstrap-spack-pfxrzmtnlrudqugxsboxj7bxqxc55udq has the following dependents:\r\nlib/spack/spack/installer.py:1260 ==> [2022-01-13-22:16:30.724012] Requeueing a build task for clingo-bootstrap-spack-pfxrzmtnlrudqugxsboxj7bxqxc55udq with status 'queued'\r\nlib/spack/spack/installer.py:1445 ==> [2022-01-13-22:16:30.724386] Ensure all dependencies know all dependents across specs\r\nlib/spack/spack/installer.py:1516 ==> [2022-01-13-22:16:30.724794] Processing bison-3.0.4-43mqgpsrrxp7xfktgegbcduvirykzuuv: task=priority=0, status=dequeued, start=0, #dependencies=0\r\nlib/spack/spack/installer.py:328 ==> [2022-01-13-22:16:30.725163] bison@3.0.4 : externally installed in /usr\r\nlib/spack/spack/installer.py:333 ==> [2022-01-13-22:16:30.725519] bison@3.0.4 : already registered in DB\r\n[+] /usr (external bison-3.0.4-43mqgpsrrxp7xfktgegbcduvirykzuuv)\r\nlib/spack/spack/installer.py:1417 ==> [2022-01-13-22:16:30.725914] Flagging bison-3.0.4-43mqgpsrrxp7xfktgegbcduvirykzuuv as installed\r\nlib/spack/spack/installer.py:1425 ==> [2022-01-13-22:16:30.726265] Removing bison-3.0.4-43mqgpsrrxp7xfktgegbcduvirykzuuv from clingo-bootstrap-spack-pfxrzmtnlrudqugxsboxj7bxqxc55udq's uninstalled dependencies.\r\nlib/spack/spack/installer.py:2156 ==> [2022-01-13-22:16:30.726646] clingo-bootstrap-spack-pfxrzmtnlrudqugxsboxj7bxqxc55udq: Removed bison-3.0.4-43mqgpsrrxp7xfktgegbcduvirykzuuv from uninstalled deps list: {'cmake-3.20.0-bcjqmxoxceng4wlia36ydqw36q2p6esi', 'python-3.7-uhx6qlyyx2ypjziwwuwoiudnrlsuieg2', 're2c-2.2-6q3zvmrdlfz6uvetpggucjsnu3ekzdlg'}\r\nlib/spack/spack/installer.py:1303 ==> [2022-01-13-22:16:30.726993] Removing build task for clingo-bootstrap-spack-pfxrzmtnlrudqugxsboxj7bxqxc55udq from list\r\nlib/spack/spack/installer.py:1260 ==> [2022-01-13-22:16:30.727325] Requeueing a build task for clingo-bootstrap-spack-pfxrzmtnlrudqugxsboxj7bxqxc55udq with status 'queued'\r\nlib/spack/spack/installer.py:1516 ==> [2022-01-13-22:16:30.727690] Processing cmake-3.20.0-bcjqmxoxceng4wlia36ydqw36q2p6esi: task=priority=0, status=dequeued, start=0, #dependencies=0\r\nlib/spack/spack/installer.py:328 ==> [2022-01-13-22:16:30.728043] cmake@3.20.0 : externally installed in /cvmfs/sft.cern.ch/lcg/releases/LCG_100/CMake/3.20.0/x86_64-centos7-gcc9-opt\r\nlib/spack/spack/installer.py:333 ==> [2022-01-13-22:16:30.728398] cmake@3.20.0 : already registered in DB\r\n[+] /cvmfs/sft.cern.ch/lcg/releases/LCG_100/CMake/3.20.0/x86_64-centos7-gcc9-opt (external cmake-3.20.0-bcjqmxoxceng4wlia36ydqw36q2p6esi)\r\nlib/spack/spack/installer.py:1417 ==> [2022-01-13-22:16:30.728783] Flagging cmake-3.20.0-bcjqmxoxceng4wlia36ydqw36q2p6esi as installed\r\nlib/spack/spack/installer.py:1425 ==> [2022-01-13-22:16:30.729104] Removing cmake-3.20.0-bcjqmxoxceng4wlia36ydqw36q2p6esi from clingo-bootstrap-spack-pfxrzmtnlrudqugxsboxj7bxqxc55udq's uninstalled dependencies.\r\nlib/spack/spack/installer.py:2156 ==> [2022-01-13-22:16:30.729482] clingo-bootstrap-spack-pfxrzmtnlrudqugxsboxj7bxqxc55udq: Removed cmake-3.20.0-bcjqmxoxceng4wlia36ydqw36q2p6esi from uninstalled deps list: {'python-3.7-uhx6qlyyx2ypjziwwuwoiudnrlsuieg2', 're2c-2.2-6q3zvmrdlfz6uvetpggucjsnu3ekzdlg'}\r\nlib/spack/spack/installer.py:1303 ==> [2022-01-13-22:16:30.729828] Removing build task for clingo-bootstrap-spack-pfxrzmtnlrudqugxsboxj7bxqxc55udq from list\r\nlib/spack/spack/installer.py:1260 ==> [2022-01-13-22:16:30.730150] Requeueing a build task for clingo-bootstrap-spack-pfxrzmtnlrudqugxsboxj7bxqxc55udq with status 'queued'\r\nlib/spack/spack/installer.py:1516 ==> [2022-01-13-22:16:30.730528] Processing python-3.7-uhx6qlyyx2ypjziwwuwoiudnrlsuieg2: task=priority=0, status=dequeued, start=0, #dependencies=0\r\nlib/spack/spack/installer.py:328 ==> [2022-01-13-22:16:30.730862] python@3.7 : externally installed in /afs/cern.ch/work/l/lgiacome/sim_workspace_mpi_py3/venvs/py3work\r\nlib/spack/spack/installer.py:333 ==> [2022-01-13-22:16:30.731204] python@3.7 : already registered in DB\r\n[+] /afs/cern.ch/work/l/lgiacome/sim_workspace_mpi_py3/venvs/py3work (external python-3.7-uhx6qlyyx2ypjziwwuwoiudnrlsuieg2)\r\nlib/spack/spack/installer.py:1417 ==> [2022-01-13-22:16:30.731585] Flagging python-3.7-uhx6qlyyx2ypjziwwuwoiudnrlsuieg2 as installed\r\nlib/spack/spack/installer.py:1425 ==> [2022-01-13-22:16:30.731893] Removing python-3.7-uhx6qlyyx2ypjziwwuwoiudnrlsuieg2 from clingo-bootstrap-spack-pfxrzmtnlrudqugxsboxj7bxqxc55udq's uninstalled dependencies.\r\nlib/spack/spack/installer.py:2156 ==> [2022-01-13-22:16:30.732274] clingo-bootstrap-spack-pfxrzmtnlrudqugxsboxj7bxqxc55udq: Removed python-3.7-uhx6qlyyx2ypjziwwuwoiudnrlsuieg2 from uninstalled deps list: {'re2c-2.2-6q3zvmrdlfz6uvetpggucjsnu3ekzdlg'}\r\nlib/spack/spack/installer.py:1303 ==> [2022-01-13-22:16:30.732603] Removing build task for clingo-bootstrap-spack-pfxrzmtnlrudqugxsboxj7bxqxc55udq from list\r\nlib/spack/spack/installer.py:1260 ==> [2022-01-13-22:16:30.732913] Requeueing a build task for clingo-bootstrap-spack-pfxrzmtnlrudqugxsboxj7bxqxc55udq with status 'queued'\r\nlib/spack/spack/installer.py:1516 ==> [2022-01-13-22:16:30.733309] Processing re2c-2.2-6q3zvmrdlfz6uvetpggucjsnu3ekzdlg: task=priority=0, status=dequeued, start=0, #dependencies=0\r\nlib/spack/spack/installer.py:1000 ==> [2022-01-13-22:16:30.736124] Acquiring a write lock on re2c-2.2-6q3zvmrdlfz6uvetpggucjsnu3ekzdlg with timeout 1e-09\r\nlib/spack/spack/installer.py:1027 ==> [2022-01-13-22:16:30.736720] re2c-2.2-6q3zvmrdlfz6uvetpggucjsnu3ekzdlg is now write locked\r\nlib/spack/spack/installer.py:1160 ==> [2022-01-13-22:16:30.742550] Installing re2c-2.2-6q3zvmrdlfz6uvetpggucjsnu3ekzdlg\r\nlib/spack/spack/installer.py:403 ==> [2022-01-13-22:16:30.742914] Searching for binary cache of re2c-2.2-6q3zvmrdlfz6uvetpggucjsnu3ekzdlg\r\nlib/spack/spack/config.py:1006 ==> [2022-01-13-22:16:30.743523] Reading config file /afs/cern.ch/user/l/lgiacome/spack/etc/spack/defaults/mirrors.yaml\r\nlib/spack/spack/binary_distribution.py:1638 ==> [2022-01-13-22:16:32.099985] Did not find linux-centos7-x86_64-gcc-9.3.0-re2c-2.2-6q3zvmrdlfz6uvetpggucjsnu3ekzdlg.spec.json on https://mirror.spack.io/build_cache/linux-centos7-x86_64-gcc-9.3.0-re2c-2.2-6q3zvmrdlfz6uvetpggucjsnu3ekzdlg.spec.json\r\n  Download failed: HTTP Error 404: Not Found\r\nlib/spack/spack/binary_distribution.py:1640 ==> [2022-01-13-22:16:32.100468] Did not find linux-centos7-x86_64-gcc-9.3.0-re2c-2.2-6q3zvmrdlfz6uvetpggucjsnu3ekzdlg.spec.json on https://mirror.spack.io/build_cache/linux-centos7-x86_64-gcc-9.3.0-re2c-2.2-6q3zvmrdlfz6uvetpggucjsnu3ekzdlg.spec.yaml\r\n  Download failed: HTTP Error 404: Not Found\r\nlib/spack/spack/installer.py:286 ==> [2022-01-13-22:16:32.101292] No binary for re2c-2.2-6q3zvmrdlfz6uvetpggucjsnu3ekzdlg found: installing from source\r\nlib/spack/spack/installer.py:1334 ==> [2022-01-13-22:16:32.101773] Creating the installation directory /afs/cern.ch/user/l/lgiacome/.spack/bootstrap/store/linux-centos7-x86_64/gcc-9.3.0/re2c-2.2-6q3zvmrdlfz6uvetpggucjsnu3ekzdlg\r\nlib/spack/spack/installer.py:1369 ==> [2022-01-13-22:16:32.125206] Flagging re2c-2.2-6q3zvmrdlfz6uvetpggucjsnu3ekzdlg as failed: [Errno 13] Permission denied: '/afs/cern.ch/user/l/lgiacome/.spack/bootstrap/store/linux-centos7-x86_64/gcc-9.3.0/re2c-2.2-6q3zvmrdlfz6uvetpggucjsnu3ekzdlg'\r\nlib/spack/spack/installer.py:1379 ==> [2022-01-13-22:16:32.129283] Warning: Skipping build of clingo-bootstrap-spack-pfxrzmtnlrudqugxsboxj7bxqxc55udq since re2c-2.2-6q3zvmrdlfz6uvetpggucjsnu3ekzdlg failed\r\nlib/spack/spack/installer.py:1369 ==> [2022-01-13-22:16:32.129628] Flagging clingo-bootstrap-spack-pfxrzmtnlrudqugxsboxj7bxqxc55udq as failed\r\nlib/spack/spack/installer.py:1303 ==> [2022-01-13-22:16:32.134048] Removing build task for clingo-bootstrap-spack-pfxrzmtnlrudqugxsboxj7bxqxc55udq from list\r\nlib/spack/spack/installer.py:1678 ==> [2022-01-13-22:16:32.134457] Error: Failed to install re2c due to PermissionError: [Errno 13] Permission denied: '/afs/cern.ch/user/l/lgiacome/.spack/bootstrap/store/linux-centos7-x86_64/gcc-9.3.0/re2c-2.2-6q3zvmrdlfz6uvetpggucjsnu3ekzdlg'\r\nlib/spack/spack/stage.py:327 ==> [2022-01-13-22:16:32.142026] Creating stage lock spack-stage-re2c-2.2-6q3zvmrdlfz6uvetpggucjsnu3ekzdlg\r\nlib/spack/spack/bootstrap.py:525 ==> [2022-01-13-22:16:32.142429] [BOOTSTRAP MODULE clingo] Unexpected error \"Terminating after first install failure: [Errno 13] Permission denied: '/afs/cern.ch/user/l/lgiacome/.spack/bootstrap/store/linux-centos7-x86_64/gcc-9.3.0/re2c-2.2-6q3zvmrdlfz6uvetpggucjsnu3ekzdlg'\"\r\nlib/spack/spack/config.py:1006 ==> [2022-01-13-22:16:32.144864] Reading config file /afs/cern.ch/user/l/lgiacome/spack/etc/spack/defaults/config.yaml\r\nTraceback (most recent call last):\r\n  File \"/afs/cern.ch/user/l/lgiacome/spack/bin/spack\", line 98, in <module>\r\n    sys.exit(spack.main.main())\r\n  File \"/afs/cern.ch/user/l/lgiacome/spack/lib/spack/spack/main.py\", line 900, in main\r\n    return _main(argv)\r\n  File \"/afs/cern.ch/user/l/lgiacome/spack/lib/spack/spack/main.py\", line 883, in _main\r\n    return _invoke_command(command, parser, args, unknown)\r\n  File \"/afs/cern.ch/user/l/lgiacome/spack/lib/spack/spack/main.py\", line 553, in _invoke_command\r\n    return_val = command(parser, args)\r\n  File \"/afs/cern.ch/user/l/lgiacome/spack/lib/spack/spack/cmd/install.py\", line 401, in install\r\n    args.spec, concretize=True, tests=tests, reuse=args.reuse\r\n  File \"/afs/cern.ch/user/l/lgiacome/spack/lib/spack/spack/cmd/__init__.py\", line 166, in parse_specs\r\n    spec.concretize(tests=tests, reuse=reuse)  # implies normalize\r\n  File \"/afs/cern.ch/user/l/lgiacome/spack/lib/spack/spack/spec.py\", line 2648, in concretize\r\n    self._new_concretize(tests, reuse=reuse)\r\n  File \"/afs/cern.ch/user/l/lgiacome/spack/lib/spack/spack/spec.py\", line 2619, in _new_concretize\r\n    result = spack.solver.asp.solve([self], tests=tests, reuse=reuse)\r\n  File \"/afs/cern.ch/user/l/lgiacome/spack/lib/spack/spack/solver/asp.py\", line 2041, in solve\r\n    driver = PyclingoDriver()\r\n  File \"/afs/cern.ch/user/l/lgiacome/spack/lib/spack/spack/solver/asp.py\", line 489, in __init__\r\n    bootstrap_clingo()\r\n  File \"/afs/cern.ch/user/l/lgiacome/spack/lib/spack/spack/solver/asp.py\", line 468, in bootstrap_clingo\r\n    spack.bootstrap.ensure_clingo_importable_or_raise()\r\n  File \"/afs/cern.ch/user/l/lgiacome/spack/lib/spack/spack/bootstrap.py\", line 765, in ensure_clingo_importable_or_raise\r\n    module='clingo', abstract_spec=clingo_root_spec()\r\n  File \"/afs/cern.ch/user/l/lgiacome/spack/lib/spack/spack/bootstrap.py\", line 538, in ensure_module_importable_or_raise\r\n    raise ImportError(msg)\r\nImportError: cannot bootstrap the \"clingo\" Python module from spec \"clingo-bootstrap@spack+python %gcc target=x86_64\" due to the following failures:\r\n    'github-actions' raised RuntimeError: cannot bootstrap any of the patchelf executables from spec \"patchelf@0.13.1:0.13.99 %gcc target=x86_64\"\r\n    'spack-install' raised InstallError: Terminating after first install failure: [Errno 13] Permission denied: '/afs/cern.ch/user/l/lgiacome/.spack/bootstrap/store/linux-centos7-x86_64/gcc-9.3.0/re2c-2.2-6q3zvmrdlfz6uvetpggucjsnu3ekzdlg'\r\n    Please run `spack -d spec zlib` for more verbose error messages\r\n```\r\n\r\n### Information on your system\r\n\r\n* **Spack:** 0.17.1-825-eda565f\r\n* **Python:** 3.7.4\r\n* **Platform:** linux-centos7-broadwell\r\n* **Concretizer:** clingo\r\n\r\n### General information\r\n\r\n- [X] I have run `spack debug report` and reported the version of Spack/Python/Platform\r\n- [X] I have searched the issues of this repo and believe this is not a duplicate\r\n- [X] I have run the failing commands in debug mode and reported the output",
    "user": "lgiacome",
    "url": "https://api.github.com/repos/spack/spack/issues/28407",
    "updated_at": "2022-01-13 22:17:34",
    "created_at": "2022-01-13 21:20:41",
    "closed_at": "2022-01-13 21:44:42",
    "state": "closed",
    "title": "Spack install failing with PermissionError",
    "number": 28407,
    "milestone": null,
    "labels": [
        "bug",
        "triage"
    ],
    "id": 1102395270,
    "html_url": "https://github.com/spack/spack/issues/28407",
    "assignees": [],
    "comments": 3
}