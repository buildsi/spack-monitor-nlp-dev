{
    "body": "### Steps to reproduce the issue\r\n\r\nI am trying to build TAU 2.24.1 but am coming up with an error.  It seems like Spack is trying to pass the -elf option to the TAU configure file (in the stage directory).  In other words, the offending command is this:\r\n\r\n```console\r\n./configure ... \r\n'-elf=/n/home09/ryantosca/spack/opt/spack/linux-centos7-x86_64/gcc-8.2.0/libelf-0.8.13-hi2dy6yq6fbjrczfmijelxybgvocjnyw'\r\n```\r\nBut the configure script does not list elf as one of the valid options, so this is choking the build.\r\n\r\nAlso note: this appears to be an issue with tau@2.25, tau@2.26, tau@2.27.\r\n\r\n### Steps to reproduce the issue\r\n\r\n```console\r\n$spack install tau@2.24.1 %gcc@8.2.0 openmp=True\r\n\r\n==> Error: ProcessError: Command exited with status 1:\r\n    './configure' '-prefix=/n/home09/ryantosca/spack/opt/spack/linux-centos7-x86_64/gcc-8.2.0/tau-2.24.1-pi3q24bzp4hh4ulmmgkap3evgsxmguuo' '-iowrapper' '-pdt=/n/home09/ryantosca/spack/opt/spack/linux-centos7-x86_64/gcc-8.2.0/pdt-3.25.1-aiq6klkadf355cevkygoi2q52cgd3csa' '-pthread' '-papi=/n/home09/ryantosca/spack/opt/spack/linux-centos7-x86_64/gcc-8.2.0/papi-5.7.0-hivmizmucgpfq6k4dqnxqv4o4fkrilfh' '-openmp' '-bfd=/n/home09/ryantosca/spack/opt/spack/linux-centos7-x86_64/gcc-8.2.0/binutils-2.31.1-o6ek6dwekia6bpx36t35k5w5ltpbwcyl' '-dwarf=/n/home09/ryantosca/spack/opt/spack/linux-centos7-x86_64/gcc-8.2.0/libdwarf-20180129-vvf4silzyz7v3v22icizpe6udakngwjx' '-elf=/n/home09/ryantosca/spack/opt/spack/linux-centos7-x86_64/gcc-8.2.0/libelf-0.8.13-hi2dy6yq6fbjrczfmijelxybgvocjnyw' '-unwind=/n/home09/ryantosca/spack/opt/spack/linux-centos7-x86_64/gcc-8.2.0/libunwind-1.2.1-zluaacildojpx3gjlkbqoi4aaejgvy3i' '-otf=/n/home09/ryantosca/spack/opt/spack/linux-centos7-x86_64/gcc-8.2.0/otf2-2.1.1-miwrbx3gkfjrm5vdfmy26fvvnezfik5y' '-c++=/n/sw/helmod/apps/centos7/Core/gcc/8.2.0-fasrc01/bin/g++' '-cc=/n/sw/helmod/apps/centos7/Core/gcc/8.2.0-fasrc01/bin/gcc' '-fortran=gfortran' '-useropt=-O2 -g -Wl,-rpath,/n/home09/ryantosca/spack/opt/spack/linux-centos7-x86_64/gcc-8.2.0/tau-2.24.1-pi3q24bzp4hh4ulmmgkap3evgsxmguuo/lib -Wl,-rpath,/n/home09/ryantosca/spack/opt/spack/linux-centos7-x86_64/gcc-8.2.0/tau-2.24.1-pi3q24bzp4hh4ulmmgkap3evgsxmguuo/lib64 -Wl,-rpath,/n/home09/ryantosca/spack/opt/spack/linux-centos7-x86_64/gcc-8.2.0/papi-5.7.0-hivmizmucgpfq6k4dqnxqv4o4fkrilfh/lib -Wl,-rpath,/n/home09/ryantosca/spack/opt/spack/linux-centos7-x86_64/gcc-8.2.0/pdt-3.25.1-aiq6klkadf355cevkygoi2q52cgd3csa/lib -Wl,-rpath,/n/home09/ryantosca/spack/opt/spack/linux-centos7-x86_64/gcc-8.2.0/otf2-2.1.1-miwrbx3gkfjrm5vdfmy26fvvnezfik5y/lib -Wl,-rpath,/n/home09/ryantosca/spack/opt/spack/linux-centos7-x86_64/gcc-8.2.0/libunwind-1.2.1-zluaacildojpx3gjlkbqoi4aaejgvy3i/lib -Wl,-rpath,/n/home09/ryantosca/spack/opt/spack/linux-centos7-x86_64/gcc-8.2.0/libelf-0.8.13-hi2dy6yq6fbjrczfmijelxybgvocjnyw/lib -Wl,-rpath,/n/home09/ryantosca/spack/opt/spack/linux-centos7-x86_64/gcc-8.2.0/binutils-2.31.1-o6ek6dwekia6bpx36t35k5w5ltpbwcyl/lib -Wl,-rpath,/n/home09/ryantosca/spack/opt/spack/linux-centos7-x86_64/gcc-8.2.0/libdwarf-20180129-vvf4silzyz7v3v22icizpe6udakngwjx/lib -Wl,-rpath,/n/home09/ryantosca/spack/opt/spack/linux-centos7-x86_64/gcc-8.2.0/binutils-2.31.1-o6ek6dwekia6bpx36t35k5w5ltpbwcyl/lib64'\r\nSee build log for details:\r\n  /n/home09/ryantosca/spack/var/spack/stage/tau-2.24.1-pi3q24bzp4hh4ulmmgkap3evgsxmguuo/spack-build.txt\r\n\r\n```\r\n### Error output\r\n\r\nThe build log says\r\n```console\r\n\r\n==> Executing phase: 'install'\r\n==> [2019-06-25-17:13:51.496478] FILTER FILE: configure [replacing \"^s@([^@]*)@(.*)@[gIp]$\"]\r\n==> [2019-06-25-17:13:51.548631] FILTER FILE: configure [replacing \"'s@((?:\\\\'|[^@'])*)@((?:\\\\'|[^'])*)@[gIp]?'\"]\r\n==> [2019-06-25-17:13:51.585205] FILTER FILE: configure [replacing \"\"s@((?:\\\\\"|[^@\"])*)@((?:\\\\\"|[^\"])*)@[gIp]?\"\"]\r\n==> [2019-06-25-17:13:51.615722] FILTER FILE: utils/FixMakefile [replacing \"^s@([^@]*)@(.*)@[gIp]$\"]\r\n==> [2019-06-25-17:13:51.622387] FILTER FILE: utils/FixMakefile [replacing \"'s@((?:\\\\'|[^@'])*)@((?:\\\\'|[^'])*)@[gIp]?'\"]\r\n==> [2019-06-25-17:13:51.627646] FILTER FILE: utils/FixMakefile [replacing \"\"s@((?:\\\\\"|[^@\"])*)@((?:\\\\\"|[^\"])*)@[gIp]?\"\"]\r\n==> [2019-06-25-17:13:51.633157] FILTER FILE: utils/FixMakefile.sed.default [replacing \"^s@([^@]*)@(.*)@[gIp]$\"]\r\n==> [2019-06-25-17:13:51.634256] FILTER FILE: utils/FixMakefile.sed.default [replacing \"'s@((?:\\\\'|[^@'])*)@((?:\\\\'|[^'])*)@[gIp]?'\"]\r\n==> [2019-06-25-17:13:51.634770] FILTER FILE: utils/FixMakefile.sed.default [replacing \"\"s@((?:\\\\\"|[^@\"])*)@((?:\\\\\"|[^\"])*)@[gIp]?\"\"]\r\n==> [2019-06-25-17:13:51.651690] './configure' '-prefix=/n/home09/ryantosca/spack/opt/spack/linux-centos7-x86_64/gcc-8.2.0/tau-2.24.1-pi3q24bzp4hh4ulmmgkap3evgsxmguuo' '-iowrapper' '-pdt=/n/home09/ryantosca/spack/opt/spack/linux-centos7-x86_64/gcc-8.2.0/pdt-3.25.1-aiq6klkadf355cevkygoi2q52cgd3csa' '-pthread' '-papi=/n/home09/ryantosca/spack/opt/spack/linux-centos7-x86_64/gcc-8.2.0/papi-5.7.0-hivmizmucgpfq6k4dqnxqv4o4fkrilfh' '-openmp' '-bfd=/n/home09/ryantosca/spack/opt/spack/linux-centos7-x86_64/gcc-8.2.0/binutils-2.31.1-o6ek6dwekia6bpx36t35k5w5ltpbwcyl' '-dwarf=/n/home09/ryantosca/spack/opt/spack/linux-centos7-x86_64/gcc-8.2.0/libdwarf-20180129-vvf4silzyz7v3v22icizpe6udakngwjx' '-elf=/n/home09/ryantosca/spack/opt/spack/linux-centos7-x86_64/gcc-8.2.0/libelf-0.8.13-hi2dy6yq6fbjrczfmijelxybgvocjnyw' '-unwind=/n/home09/ryantosca/spack/opt/spack/linux-centos7-x86_64/gcc-8.2.0/libunwind-1.2.1-zluaacildojpx3gjlkbqoi4aaejgvy3i' '-otf=/n/home09/ryantosca/spack/opt/spack/linux-centos7-x86_64/gcc-8.2.0/otf2-2.1.1-miwrbx3gkfjrm5vdfmy26fvvnezfik5y' '-c++=/n/sw/helmod/apps/centos7/Core/gcc/8.2.0-fasrc01/bin/g++' '-cc=/n/sw/helmod/apps/centos7/Core/gcc/8.2.0-fasrc01/bin/gcc' '-fortran=gfortran' '-useropt=-O2 -g -Wl,-rpath,/n/home09/ryantosca/spack/opt/spack/linux-centos7-x86_64/gcc-8.2.0/tau-2.24.1-pi3q24bzp4hh4ulmmgkap3evgsxmguuo/lib -Wl,-rpath,/n/home09/ryantosca/spack/opt/spack/linux-centos7-x86_64/gcc-8.2.0/tau-2.24.1-pi3q24bzp4hh4ulmmgkap3evgsxmguuo/lib64 -Wl,-rpath,/n/home09/ryantosca/spack/opt/spack/linux-centos7-x86_64/gcc-8.2.0/papi-5.7.0-hivmizmucgpfq6k4dqnxqv4o4fkrilfh/lib -Wl,-rpath,/n/home09/ryantosca/spack/opt/spack/linux-centos7-x86_64/gcc-8.2.0/pdt-3.25.1-aiq6klkadf355cevkygoi2q52cgd3csa/lib -Wl,-rpath,/n/home09/ryantosca/spack/opt/spack/linux-centos7-x86_64/gcc-8.2.0/otf2-2.1.1-miwrbx3gkfjrm5vdfmy26fvvnezfik5y/lib -Wl,-rpath,/n/home09/ryantosca/spack/opt/spack/linux-centos7-x86_64/gcc-8.2.0/libunwind-1.2.1-zluaacildojpx3gjlkbqoi4aaejgvy3i/lib -Wl,-rpath,/n/home09/ryantosca/spack/opt/spack/linux-centos7-x86_64/gcc-8.2.0/libelf-0.8.13-hi2dy6yq6fbjrczfmijelxybgvocjnyw/lib -Wl,-rpath,/n/home09/ryantosca/spack/opt/spack/linux-centos7-x86_64/gcc-8.2.0/binutils-2.31.1-o6ek6dwekia6bpx36t35k5w5ltpbwcyl/lib -Wl,-rpath,/n/home09/ryantosca/spack/opt/spack/linux-centos7-x86_64/gcc-8.2.0/libdwarf-20180129-vvf4silzyz7v3v22icizpe6udakngwjx/lib -Wl,-rpath,/n/home09/ryantosca/spack/opt/spack/linux-centos7-x86_64/gcc-8.2.0/binutils-2.31.1-o6ek6dwekia6bpx36t35k5w5ltpbwcyl/lib64'\r\nUnset ParaProf's cubeclasspath...\r\nUnset Perfdmf cubeclasspath...\r\nERROR: Command line switch `-elf=/n/home09/ryantosca/spack/opt/spack/linux-centos7-x86_64/gcc-8.2.0/libelf-0.8.13-hi2dy6yq6fbjrczfmijelxybgvocjnyw' not recognized\r\nRun configure with -help to see a list of options\r\n```\r\n### Platform and user environment\r\n\r\nPlease report your OS here:\r\n```commandline\r\n$ uname -a \r\nLinux holyjacob01.rc.fas.harvard.edu 3.10.0-957.12.1.el7.x86_64 #1 SMP Mon Apr 29 14:59:59 UTC 2019 x86_64 x86_64 x86_64 GNU/Linux\r\n$ lsb_release -d\r\nDescription:    CentOS Linux release 7.6.1810 (Core)\r\n``` \r\n[packages.yaml.txt](https://github.com/spack/spack/files/3327344/packages.yaml.txt)\r\n[compilers.yaml.txt](https://github.com/spack/spack/files/3327289/compilers.yaml.txt)\r\n\r\n### Additional information\r\n```console\r\n$ spack spec --install-status tau@2.24.1\r\nInput spec\r\n--------------------------------\r\n -   tau@2.24.1\r\n\r\nConcretized\r\n--------------------------------\r\n -   tau@2.24.1%gcc@8.2.0~bgq+binutils~comm~craycnl~cuda~gasnet+libdwarf+libelf+libunwind~likwid~mpi~ompt~opari~openmp+otf2+papi+pdt~phase~ppc64le+pthreads~python~scorep~shmem arch=linux-centos7-x86_64\r\n[+]      ^binutils@2.31.1%gcc@8.2.0+gold+headers+libiberty~nls~plugins arch=linux-centos7-x86_64\r\n[+]          ^zlib@1.2.11%gcc@8.2.0+optimize+pic+shared arch=linux-centos7-x86_64\r\n[+]      ^libdwarf@20180129%gcc@8.2.0 arch=linux-centos7-x86_64\r\n[+]          ^libelf@0.8.13%gcc@8.2.0 arch=linux-centos7-x86_64\r\n[+]      ^libunwind@1.2.1%gcc@8.2.0~xz arch=linux-centos7-x86_64\r\n[+]      ^otf2@2.1.1%gcc@8.2.0 arch=linux-centos7-x86_64\r\n[+]      ^papi@5.7.0%gcc@8.2.0 arch=linux-centos7-x86_64\r\n[+]      ^pdt@3.25.1%gcc@8.2.0 arch=linux-centos7-x86_64\r\n```\r\n\r\nAlso, here is the tail end of the traceback:\r\n```console\r\nTraceback (most recent call last):\r\n  File \"/n/home09/ryantosca/spack/lib/spack/spack/build_environment.py\", line 765, in child_process\r\n    return_value = function()\r\n  File \"/n/home09/ryantosca/spack/lib/spack/spack/package.py\", line 1577, in build_process\r\n    phase(self.spec, self.prefix)\r\n  File \"/n/home09/ryantosca/spack/lib/spack/spack/package.py\", line 99, in phase_wrapper\r\n    phase(spec, prefix)\r\n  File \"/n/home09/ryantosca/spack/var/spack/repos/builtin/packages/tau/package.py\", line 216, in install\r\n    make(\"install\")\r\n  File \"/n/home09/ryantosca/spack/lib/spack/spack/util/executable.py\", line 189, in __call__\r\n    proc.returncode, long_msg)\r\nProcessError: Command exited with status 1:\r\n    './configure' '-prefix=/n/home09/ryantosca/spack/opt/spack/linux-centos7-x86_64/gcc-8.2.0/tau-2.24.1-cwnhh3o2mwkm3wkkvkav7yqjepxf37cb' '-iowrapper' '-pdt=/n/home09/ryantosca/spack/opt/spack/linux-centos7-x86_64/gcc-8.2.0/pdt-3.25.1-aiq6klkadf355cevkygoi2q52cgd3csa' '-pthread' '-papi=/n/home09/ryantosca/spack/opt/spack/linux-centos7-x86_64/gcc-8.2.0/papi-5.7.0-hivmizmucgpfq6k4dqnxqv4o4fkrilfh' '-bfd=/n/home09/ryantosca/spack/opt/spack/linux-centos7-x86_64/gcc-8.2.0/binutils-2.31.1-o6ek6dwekia6bpx36t35k5w5ltpbwcyl' '-dwarf=/n/home09/ryantosca/spack/opt/spack/linux-centos7-x86_64/gcc-8.2.0/libdwarf-20180129-vvf4silzyz7v3v22icizpe6udakngwjx' '-elf=/n/home09/ryantosca/spack/opt/spack/linux-centos7-x86_64/gcc-8.2.0/libelf-0.8.13-hi2dy6yq6fbjrczfmijelxybgvocjnyw' '-unwind=/n/home09/ryantosca/spack/opt/spack/linux-centos7-x86_64/gcc-8.2.0/libunwind-1.2.1-zluaacildojpx3gjlkbqoi4aaejgvy3i' '-otf=/n/home09/ryantosca/spack/opt/spack/linux-centos7-x86_64/gcc-8.2.0/otf2-2.1.1-miwrbx3gkfjrm5vdfmy26fvvnezfik5y' '-c++=/n/sw/helmod/apps/centos7/Core/gcc/8.2.0-fasrc01/bin/g++' '-cc=/n/sw/helmod/apps/centos7/Core/gcc/8.2.0-fasrc01/bin/gcc' '-fortran=gfortran' '-useropt=-O2 -g -Wl,-rpath,/n/home09/ryantosca/spack/opt/spack/linux-centos7-x86_64/gcc-8.2.0/tau-2.24.1-cwnhh3o2mwkm3wkkvkav7yqjepxf37cb/lib -Wl,-rpath,/n/home09/ryantosca/spack/opt/spack/linux-centos7-x86_64/gcc-8.2.0/tau-2.24.1-cwnhh3o2mwkm3wkkvkav7yqjepxf37cb/lib64 -Wl,-rpath,/n/home09/ryantosca/spack/opt/spack/linux-centos7-x86_64/gcc-8.2.0/papi-5.7.0-hivmizmucgpfq6k4dqnxqv4o4fkrilfh/lib -Wl,-rpath,/n/home09/ryantosca/spack/opt/spack/linux-centos7-x86_64/gcc-8.2.0/pdt-3.25.1-aiq6klkadf355cevkygoi2q52cgd3csa/lib -Wl,-rpath,/n/home09/ryantosca/spack/opt/spack/linux-centos7-x86_64/gcc-8.2.0/otf2-2.1.1-miwrbx3gkfjrm5vdfmy26fvvnezfik5y/lib -Wl,-rpath,/n/home09/ryantosca/spack/opt/spack/linux-centos7-x86_64/gcc-8.2.0/libunwind-1.2.1-zluaacildojpx3gjlkbqoi4aaejgvy3i/lib -Wl,-rpath,/n/home09/ryantosca/spack/opt/spack/linux-centos7-x86_64/gcc-8.2.0/libelf-0.8.13-hi2dy6yq6fbjrczfmijelxybgvocjnyw/lib -Wl,-rpath,/n/home09/ryantosca/spack/opt/spack/linux-centos7-x86_64/gcc-8.2.0/binutils-2.31.1-o6ek6dwekia6bpx36t35k5w5ltpbwcyl/lib -Wl,-rpath,/n/home09/ryantosca/spack/opt/spack/linux-centos7-x86_64/gcc-8.2.0/libdwarf-20180129-vvf4silzyz7v3v22icizpe6udakngwjx/lib -Wl,-rpath,/n/home09/ryantosca/spack/opt/spack/linux-centos7-x86_64/gcc-8.2.0/binutils-2.31.1-o6ek6dwekia6bpx36t35k5w5ltpbwcyl/lib64'\r\n```\r\n",
    "user": "yantosca",
    "url": "https://api.github.com/repos/spack/spack/issues/11846",
    "updated_at": "2019-07-08 15:42:56",
    "created_at": "2019-06-25 21:38:06",
    "closed_at": "2019-07-06 02:08:44",
    "state": "closed",
    "title": "Installation issue: tau@2.24.1 %gcc@8.2.0",
    "number": 11846,
    "milestone": null,
    "labels": [
        "build-error",
        "concretization",
        "variants",
        "impact-low"
    ],
    "id": 460656157,
    "html_url": "https://github.com/spack/spack/issues/11846",
    "assignees": [
        "tgamblin"
    ],
    "comments": 9
}