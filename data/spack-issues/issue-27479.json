{
    "body": "Trying to build fftw on a Milan system with the Rocky Linux OS using \r\n\r\n`spack -d install fftw %gcc@11.2.0`\r\n\r\nIt is recognizing rocky linux and zen3.\r\n\r\n```\r\n*************spack arch\r\nlinux-rocky8-zen3\r\n*************cat /etc/os-release\r\nNAME=\"Rocky Linux\"\r\nVERSION=\"8.4 (Green Obsidian)\"\r\nID=\"rocky\"\r\nID_LIKE=\"rhel fedora\"\r\nVERSION_ID=\"8.4\"\r\nPLATFORM_ID=\"platform:el8\"\r\nPRETTY_NAME=\"Rocky Linux 8.4 (Green Obsidian)\"\r\nANSI_COLOR=\"0;32\"\r\nCPE_NAME=\"cpe:/o:rocky:rocky:8.4:GA\"\r\nHOME_URL=\"https://rockylinux.org/\"\r\nBUG_REPORT_URL=\"https://bugs.rockylinux.org/\"\r\nROCKY_SUPPORT_PRODUCT=\"Rocky Linux\"\r\nROCKY_SUPPORT_PRODUCT_VERSION=\"8\"\r\n```\r\n\r\nThe build process is not able to find the json file that defines the spec for rocky linux using the default compiler gcc@9.4.0 instead of the specified compiler gcc@11.2.0 for the build process. Here is the first error it encounters.\r\n\r\n```\r\n==> [2021-11-15-15:11:20.281715] Reading config file /home1/06934/thomasbr/spack/etc/spack/defaults/mirrors.yaml\r\n==> [2021-11-15-15:11:21.162965] Did not find linux-rocky8-x86_64-gcc-9.4.0-re2c-2.2-2nkwijldl522hz7odalhwmdszabwuxo3.spec.json on https://mirror.spack.io/build_cache/linux-rocky8-x86_64-gcc-9.4.0-re2c-2.2-2nkwijldl522hz7odalhwmdszabwuxo3.spec.json\r\n  Download failed: HTTP Error 404: Not Found\r\n==> [2021-11-15-15:11:21.163063] Did not find linux-rocky8-x86_64-gcc-9.4.0-re2c-2.2-2nkwijldl522hz7odalhwmdszabwuxo3.spec.json on https://mirror.spack.io/build_cache/linux-rocky8-x86_64-gcc-9.4.0-re2c-2.2-2nkwijldl522hz7odalhwmdszabwuxo3.spec.yaml\r\n  Download failed: HTTP Error 404: Not Found\r\n```\r\nLater error is\r\n\r\n```\r\n==> [2021-11-15-15:11:22.666084] Error: ProcessError: Command exited with status 77:\r\n    '/tmp/thomasbr/spack-stage/spack-stage-re2c-2.2-2nkwijldl522hz7odalhwmdszabwuxo3/spack-src/configure' '--prefix=/home1/06934/thomasbr/.spack/bootstrap/store/linux-rocky8-x86_64/gcc-9.4.0/re2c-2.2-2nkwijldl522hz7odalhwmdszabwuxo3' '--disable-benchmarks' '--disable-debug' '--disable-dependency-tracking' '--disable-docs' '--disable-lexers' '--disable-libs' '--enable-golang'\r\n\r\n2 errors found in build log:\r\n     8     checking whether make sets $(MAKE)... yes\r\n     9     checking whether make supports nested variables... yes\r\n     10    checking whether make supports nested variables... (cached) yes\r\n     11    checking whether make supports the include directive... yes (GNU sty\r\n           le)\r\n     12    checking for gcc... /home1/06934/thomasbr/spack/lib/spack/env/gcc/gc\r\n           c\r\n     13    checking whether the C compiler works... no\r\n  >> 14    configure: error: in `/tmp/thomasbr/spack-stage/spack-stage-re2c-2.2\r\n           -2nkwijldl522hz7odalhwmdszabwuxo3/spack-src':\r\n  >> 15    configure: error: C compiler cannot create executables\r\n     16    See `config.log' for more details\r\n```\r\n\r\n\r\nIt sees all the compilers.\r\n\r\n```\r\nlogin1.ls6(274)$ spack compilers\r\n==> Available compilers\r\n-- gcc rocky8-x86_64 --------------------------------------------\r\ngcc@11.2.0  gcc@9.4.0  gcc@8.4.1\r\n\r\n-- intel rocky8-x86_64 ------------------------------------------\r\nintel@19.1.1.217\r\n```\r\nNot sure why it is not using gcc@11.2.0 to build.",
    "user": "thomasbrTTU",
    "url": "https://api.github.com/repos/spack/spack/issues/27479",
    "updated_at": "2021-11-16 14:13:17",
    "created_at": "2021-11-16 14:13:17",
    "closed_at": "None",
    "state": "open",
    "title": "Build errors using Rocky Linux on Milan",
    "number": 27479,
    "milestone": null,
    "labels": [],
    "id": 1054929356,
    "html_url": "https://github.com/spack/spack/issues/27479",
    "assignees": [],
    "comments": 0
}