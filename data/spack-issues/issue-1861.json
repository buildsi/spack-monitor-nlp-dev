{
    "body": "I'm trying to create a spack package to install mysql but I'm having some problems to do it correctly. My `package.py` is this:\n\n```\nfrom spack import *\nimport os\n\nGenURL = os.environ['GenURL']\n\nclass Mysql(Package):\n    \"\"\"The MySQL software delivers a very fast, multi-threaded, multi-user, \n       and robust SQL (Structured Query Language) database server.\"\"\"\n\n    homepage = \"http://dev.mysql.com/\"\n    url      = GenURL+\"/mysql-5.7.11.tar.gz\"\n    list_url = GenURL\n\n    version('5.7.11', 'f84d945a40ed876d10f8d5a7f4ccba32')\n    version('5.5.30', 'de881c1940aa05e78266e77c9ac3d129')\n    version('5.5.27', '070340bc98dcb7f646287c97f1b91a1e')\n    version('5.5.19', 'a78cf450974e9202bd43674860349b5a')\n    version('5.5.18', '38b65815249f3bcacf3b0ee85171c486')\n\n    depends_on('cmake', type='build')\n    depends_on('libaio')\n\n    def install(self, spec, prefix):\n        build_directory = join_path(self.stage.path, 'spack-build')\n        source_directory = self.stage.source_path\n\n        cmake_args = [source_directory]\n\n        if '+debug' in spec:\n            cmake_args.append('-DCMAKE_BUILD_TYPE:STRING=Debug')\n        else:\n            cmake_args.append('-DCMAKE_BUILD_TYPE:STRING=Release')\n\n        cmake_args.extend([\n            '-DENABLE_DTRACE=0',\n            '-DDOWNLOAD_BOOST=1',\n            '-DWITH_BOOST='+build_directory+'/boost',\n        ])\n\n        cmake_args.extend(std_cmake_args)\n\n        with working_dir(build_directory, create=True):\n            cmake(*cmake_args)\n            make()\n            make('install')\n```\n\nI've tried to remove the last two `make`'s but it fails saying that there is nothing to install. The problem is that adding this two `make`'s I get many errors related to `yassl`. The error is in this line:\n\n```\n     84           cmake_args.extend(std_cmake_args)\n     85   \n     86           with working_dir(build_directory, create=True):\n     87               cmake(*cmake_args)\n  >> 88               make()\n     89               make('install')\n```\n\nAnd this is the `spack-build.out` when it fails:\n\n```\nIn file included from /my/path/spack/opt/spack/linux-centos7-x86_64/gcc-4.9.3/openssl-1.0.2d-l7qbr5kqlqgcppenu7dabe2nydhf4gh6/include/openssl/x509.h:96:0,\n                 from /my/path/spack/opt/spack/linux-centos7-x86_64/gcc-4.9.3/openssl-1.0.2d-l7qbr5kqlqgcppenu7dabe2nydhf4gh6/include/openssl/ssl.h:156,\n                 from /my/path/spack/var/spack/stage/mysql-5.7.15-t42kasxcnimjmuwrnezff5pnp6c5niog/mysql-5.7.15/extra/yassl/src/ssl.cpp:32:\n/my/path/spack/opt/spack/linux-centos7-x86_64/gcc-4.9.3/openssl-1.0.2d-l7qbr5kqlqgcppenu7dabe2nydhf4gh6/include/openssl/rsa.h:181:18: error: expected identifier befor\ne numeric constant\n # define RSA_F4  0x10001L\n                  ^\n/my/path/spack/var/spack/stage/mysql-5.7.15-t42kasxcnimjmuwrnezff5pnp6c5niog/mysql-5.7.15/extra/yassl/include/openssl/rsa.h:26:8: note: in expansion of macro \u2018RSA_F4\u2019\n enum { RSA_F4 = 1 };\n        ^\n/my/path/spack/opt/spack/linux-centos7-x86_64/gcc-4.9.3/openssl-1.0.2d-l7qbr5kqlqgcppenu7dabe2nydhf4gh6/include/openssl/rsa.h:181:18: error: expected \u2018}\u2019 before numer\nic constant\n # define RSA_F4  0x10001L\n                  ^\n/my/path/spack/var/spack/stage/mysql-5.7.15-t42kasxcnimjmuwrnezff5pnp6c5niog/mysql-5.7.15/extra/yassl/include/openssl/rsa.h:26:8: note: in expansion of macro \u2018RSA_F4\u2019\n enum { RSA_F4 = 1 };\n        ^\n/my/path/spack/opt/spack/linux-centos7-x86_64/gcc-4.9.3/openssl-1.0.2d-l7qbr5kqlqgcppenu7dabe2nydhf4gh6/include/openssl/rsa.h:181:18: error: expected unqualified-id b\nefore numeric constant\n # define RSA_F4  0x10001L\n                  ^\n/my/path/spack/var/spack/stage/mysql-5.7.15-t42kasxcnimjmuwrnezff5pnp6c5niog/mysql-5.7.15/extra/yassl/include/openssl/rsa.h:26:8: note: in expansion of macro \u2018RSA_F4\u2019\n enum { RSA_F4 = 1 };\n        ^\nIn file included from /my/path/spack/var/spack/stage/mysql-5.7.15-t42kasxcnimjmuwrnezff5pnp6c5niog/mysql-5.7.15/extra/yassl/include/openssl/ssl.h:34:0,\n                 from /my/path/spack/var/spack/stage/mysql-5.7.15-t42kasxcnimjmuwrnezff5pnp6c5niog/mysql-5.7.15/extra/yassl/include/cert_wrapper.hpp:37,\n                 from /my/path/spack/var/spack/stage/mysql-5.7.15-t42kasxcnimjmuwrnezff5pnp6c5niog/mysql-5.7.15/extra/yassl/include/yassl_int.hpp:31,\n                 from /my/path/spack/var/spack/stage/mysql-5.7.15-t42kasxcnimjmuwrnezff5pnp6c5niog/mysql-5.7.15/extra/yassl/src/ssl.cpp:34:\n/my/path/spack/var/spack/stage/mysql-5.7.15-t42kasxcnimjmuwrnezff5pnp6c5niog/mysql-5.7.15/extra/yassl/include/openssl/rsa.h:26:19: error: expected declaration before \u2018}\u2019 token\n enum { RSA_F4 = 1 };\n                   ^\nmake[2]: *** [extra/yassl/CMakeFiles/yassl.dir/src/ssl.cpp.o] Error 1\nmake[2]: *** Waiting for unfinished jobs....\n[  4%] Building C object strings/CMakeFiles/strings.dir/ctype-gb18030.c.o\n[  4%] Building CXX object extra/yassl/taocrypt/CMakeFiles/taocrypt.dir/src/file.cpp.o\n[  4%] Building C object regex/CMakeFiles/regex.dir/regerror.c.o\nmake[1]: *** [extra/yassl/CMakeFiles/yassl.dir/all] Error 2\nmake[1]: *** Waiting for unfinished jobs....\n```\n\nI have updated the mysql version to 5.7.15 too but it keeps failing. I don't know what I'm doing wrong. Could anyone help me to solve it? Thanks\n",
    "user": "JavierCVilla",
    "url": "https://api.github.com/repos/spack/spack/issues/1861",
    "updated_at": "2016-12-02 15:53:11",
    "created_at": "2016-09-27 10:38:35",
    "closed_at": "2016-12-02 15:52:35",
    "state": "closed",
    "title": "Cannot install mysql ",
    "number": 1861,
    "milestone": null,
    "labels": [
        "build-error"
    ],
    "id": 179457251,
    "html_url": "https://github.com/spack/spack/issues/1861",
    "assignees": [],
    "comments": 1
}