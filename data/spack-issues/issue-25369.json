{
    "body": "### Steps to reproduce the issue\r\n\r\n`med` fails at CMake stage using:\r\n\r\n- spack@develop [229bcd9](https://github.com/spack/spack/commit/229bcd9f036ffca43aae53af998f4f3ffe70fec8)\r\n- Ubuntu 20.04, GCC 9.3.0\r\n\r\nSpec: [med_spack.yaml.txt](https://github.com/spack/spack/files/6971256/med_spack.yaml.txt)\r\n\r\nDocker container: `ecpe4s/ubuntu20.04-runner-x86_64:2021-07-01`\r\nHow to reproduce:\r\n```\r\n$ git clone https://github.com/spack/spack\r\n$ cd spack\r\n$ git checkout 229bcd9\r\n$ . share/spack/setup-env.sh\r\n$ spack env create test ~/med_spack.yaml\r\n$ spack env activate test\r\n$ spack buildcache keys -it\r\n$ spack concretize -f\r\n$ spack install\r\n==> Installing med-4.0.0-newufxblwro3hhf3ez3lpicyh6ndcjo4\r\n==> No binary for med-4.0.0-newufxblwro3hhf3ez3lpicyh6ndcjo4 found: installing from source\r\n==> Using cached archive: /root/spack/var/spack/cache/_source-cache/archive/a4/a474e90b5882ce69c5e9f66f6359c53b8b73eb448c5f631fa96e8cd2c14df004.tar.gz\r\n==> No patches needed for med\r\n==> med: Executing phase: 'cmake'\r\n==> Error: ProcessError: Command exited with status 1:\r\n    'cmake' '-G' 'Unix Makefiles' '-DCMAKE_INSTALL_PREFIX:STRING=/root/spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/med-4.0.0-newufxblwro3hhf3ez3lpicyh6ndcjo4' '-DCMAKE_BUILD_TYPE:STRING=RelWithDebInfo' '-DCMAKE_INTERPROCEDURAL_OPTIMIZATION:BOOL=OFF' '-DCMAKE_VERBOSE_MAKEFILE:BOOL=ON' '-DCMAKE_INSTALL_RPATH_USE_LINK_PATH:BOOL=OFF' '-DCMAKE_INSTALL_RPATH:STRING=/root/spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/med-4.0.0-newufxblwro3hhf3ez3lpicyh6ndcjo4/lib;/root/spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/med-4.0.0-newufxblwro3hhf3ez3lpicyh6ndcjo4/lib64;/root/spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/hdf5-1.10.7-enbo4ptyoocchyzf5leqmafywi7axbnk/lib;/root/spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/mpich-3.4.2-z3qvcplqpvri2tliohtqp7ei2lnvqsf3/lib;/root/spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/hwloc-2.4.1-eeigvjc57oehl37canx4h5lfganpvdq2/lib;/root/spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/libpciaccess-0.16-ux5xkhgfhhmitpkxfuf5h6ooudsiwhd4/lib;/root/spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/libxml2-2.9.10-qlt5ajqqmtin3atqcycnv67oex63cvny/lib;/root/spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/libiconv-1.16-w6zptbclncs3jsnl3i4qtg72fgheiwdf/lib;/root/spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/xz-5.2.5-ynkyqliadxgrqpk4mavevv3onehjrdco/lib;/root/spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/zlib-1.2.11-p7dmb5pqi6svirhovljrkp3uyfiytz3m/lib;/root/spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/ncurses-6.2-n5vhymfigwg6e45k7thdfyeswuhxojtx/lib;/root/spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/libfabric-1.12.1-lgug4cxazbl24jdtmttovd5qpnr6os7z/lib;/root/spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/numactl-2.0.14-vw2cdve2xpvtcq2r32ogoptxd4cyjfre/lib' '-DCMAKE_PREFIX_PATH:STRING=/root/spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/hdf5-1.10.7-enbo4ptyoocchyzf5leqmafywi7axbnk;/root/spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/numactl-2.0.14-vw2cdve2xpvtcq2r32ogoptxd4cyjfre;/root/spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/mpich-3.4.2-z3qvcplqpvri2tliohtqp7ei2lnvqsf3;/root/spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/libfabric-1.12.1-lgug4cxazbl24jdtmttovd5qpnr6os7z;/root/spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/hwloc-2.4.1-eeigvjc57oehl37canx4h5lfganpvdq2;/root/spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/libxml2-2.9.10-qlt5ajqqmtin3atqcycnv67oex63cvny;/root/spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/xz-5.2.5-ynkyqliadxgrqpk4mavevv3onehjrdco;/root/spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/libpciaccess-0.16-ux5xkhgfhhmitpkxfuf5h6ooudsiwhd4;/root/spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/cmake-3.20.5-zyz2eldbrcih3f6l37dyvdxmyoiyvhv5;/root/spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/zlib-1.2.11-p7dmb5pqi6svirhovljrkp3uyfiytz3m;/root/spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/libiconv-1.16-w6zptbclncs3jsnl3i4qtg72fgheiwdf;/root/spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/ncurses-6.2-n5vhymfigwg6e45k7thdfyeswuhxojtx' '-DHDF5_ROOT_DIR:STRING=/root/spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/hdf5-1.10.7-enbo4ptyoocchyzf5leqmafywi7axbnk' '-DMEDFILE_BUILD_TESTS:BOOL=OFF' '-DMEDFILE_BUILD_PYTHON:BOOL=OFF' '-DMEDFILE_INSTALL_DOC:BOOL=OFF' '-DCMAKE_Fortran_COMPILER=' '-DCMAKE_CXX_FLAGS:STRING=-DMED_API_23=1' '-DCMAKE_C_FLAGS:STRING=-DMED_API_23=1' '-DMED_API_23=1' '-DMEDFILE_BUILD_SHARED_LIBS=OFF' '-DMEDFILE_BUILD_STATIC_LIBS=ON' '-DMEDFILE_USE_MPI=YES' '-DMPI_ROOT_DIR=/root/spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/mpich-3.4.2-z3qvcplqpvri2tliohtqp7ei2lnvqsf3' '/tmp/root/spack-stage/spack-stage-med-4.0.0-newufxblwro3hhf3ez3lpicyh6ndcjo4/spack-src'\r\n\r\n1 error found in build log:\r\n     21    -- Detecting CXX compile features\r\n     22    -- Detecting CXX compile features - done\r\n     23    -- No Fortran support\r\n     24    -- Check for HDF5 ...\r\n     25    -- Found HDF5 in CONFIG mode!\r\n     26    -- Found HDF5 version 1.10.7 -- parallel flag is set to ON\r\n  >> 27    CMake Error at config/cmake_files/FindMedfileHDF5.cmake:118 (GET_PROPERTY):\r\n     28      GET_PROPERTY could not find TARGET hdf5.  Perhaps it has not yet been\r\n     29      created.\r\n     30    Call Stack (most recent call first):\r\n     31      config/cmake_files/medMacros.cmake:396 (FIND_PACKAGE)\r\n     32      CMakeLists.txt:101 (MED_FIND_HDF5)\r\n     33    \r\n\r\nSee build log for details:\r\n  /tmp/root/spack-stage/spack-stage-med-4.0.0-newufxblwro3hhf3ez3lpicyh6ndcjo4/spack-build-out.txt\r\n```\r\n\r\n### Information on your system\r\n\r\n- Spack: 0.16.2-3894-229bcd9f03\r\n- Python: 3.8.5\r\n- Platform: linux-ubuntu20.04-zen3\r\n- Concretizer: original\r\n\r\n### Additional information\r\n\r\nBuild log: [med-build-out.txt](https://github.com/spack/spack/files/6971258/med-build-out.txt)\r\nCMake log: [spack-build-01-cmake-out.txt](https://github.com/spack/spack/files/6971263/spack-build-01-cmake-out.txt)\r\n\r\n@likask @cessenat\r\n\r\n\r\n### General information\r\n\r\n- [x] I have run `spack debug report` and reported the version of Spack/Python/Platform\r\n- [X] I have run `spack maintainers <name-of-the-package>` and **@mentioned** any maintainers\r\n- [X] I have uploaded the build log and environment files\r\n- [X] I have searched the issues of this repo and believe this is not a duplicate",
    "user": "superNick459",
    "url": "https://api.github.com/repos/spack/spack/issues/25369",
    "updated_at": "2021-08-13 18:28:35",
    "created_at": "2021-08-11 21:04:52",
    "closed_at": "2021-08-12 18:51:55",
    "state": "closed",
    "title": "Installation issue: med: cmake: could not find target hdf5",
    "number": 25369,
    "milestone": null,
    "labels": [
        "build-error",
        "e4s"
    ],
    "id": 967460282,
    "html_url": "https://github.com/spack/spack/issues/25369",
    "assignees": [],
    "comments": 2
}