{
    "body": "Fixes #20375 \r\n\r\nThis PR adds a quick summary of test results -- from `spack test run` *and* `spack test results` -- in the form `[<#> failed, ][<#> no-tests,  ][, <#> skipped>,] <#> passed of <#> specs`.\r\n\r\nDetails from running the tests can be output using Spack's `--verbose` option.  (They have always been available in `spack test results -l` for packages with tests to run as well.)\r\n\r\nBefore this PR:\r\n\r\n```\r\n$ spack test run caliper papi tar target=cascadelake\r\n==> Spack test cpqwyjikavj6bmlvf4v4oayaekhel2ju\r\n==> Testing package caliper-2.7.0-spjcnyp\r\n==> Testing package papi-6.0.0.1-xvpwwn3\r\n```\r\n\r\nWith this PR and no verbose option:\r\n\r\n```\r\n$ spack test run caliper papi tar target=cascadelake\r\n==> Spack test cpqwyjikavj6bmlvf4v4oayaekhel2ju\r\n==> Testing package caliper-2.7.0-spjcnyp\r\n==> Testing package papi-6.0.0.1-xvpwwn3\r\n==> Testing package tar-1.26-5tpf6bf\r\n================== 1 no-tests, 1 skipped, 1 passed of 3 specs ==================\r\n```\r\n\r\nWhen using the abbreviated `verbose` option:\r\n\r\n```\r\n$ spack -v test run caliper papi tar target=cascadelake\r\n==> Spack test cpqwyjikavj6bmlvf4v4oayaekhel2ju\r\n==> Testing package caliper-2.7.0-spjcnyp\r\n==> [2022-02-22-17:07:41.388715] Installing /usr/WS1/dahlgren/spack/opt/spack/linux-rhel7-cascadelake/intel-19.0.4.227/caliper-2.7.0-spjcnypkqsvlxf5ueopvbecs4pm6qtff/.spack/test to /g/g21/dahlgren/.spack/test/cpqwyjikavj6bmlvf4v4oayaekhel2ju/caliper-2.7.0-spjcnyp/cache/caliper\r\n==> [2022-02-22-17:07:41.451475] test: compile cxx-example example\r\n==> [2022-02-22-17:07:41.451764] '/usr/WS1/dahlgren/spack/lib/spack/env/intel/icpc' '-L/usr/WS1/dahlgren/spack/opt/spack/linux-rhel7-cascadelake/intel-19.0.4.227/caliper-2.7.0-spjcnypkqsvlxf5ueopvbecs4pm6qtff/lib64' '-I/usr/WS1/dahlgren/spack/opt/spack/linux-rhel7-cascadelake/intel-19.0.4.227/caliper-2.7.0-spjcnypkqsvlxf5ueopvbecs4pm6qtff/include' '/g/g21/dahlgren/.spack/test/cpqwyjikavj6bmlvf4v4oayaekhel2ju/caliper-2.7.0-spjcnyp/cache/caliper/examples/apps/cxx-example.cpp' '-o' 'cxx-example' '-std=c++11' '-lcaliper' '-lstdc++'\r\nPASSED\r\n==> [2022-02-22-17:07:41.998398] test: run cxx-example example\r\n==> [2022-02-22-17:07:41.998802] './cxx-example'\r\nPASSED\r\n==> Testing package papi-6.0.0.1-xvpwwn3\r\nNo tests to run\r\n==> Testing package tar-1.26-5tpf6bf\r\nSkipped external package\r\n================== 1 no-tests, 1 skipped, 1 passed of 3 specs ==================\r\n```\r\n\r\nThe results command outputs are:\r\n\r\n```\r\n$ spack test results\r\n==> Results for test suite 'cpqwyjikavj6bmlvf4v4oayaekhel2ju':\r\n==>   caliper-2.7.0-spjcnyp PASSED\r\n==>   papi-6.0.0.1-xvpwwn3 NO-TESTS\r\n==>   tar-1.26-5tpf6bf SKIPPED\r\n================== 1 no-tests, 1 skipped, 1 passed of 3 specs ==================\r\n\r\n$ spack test results -l\r\n==> Results for test suite 'cpqwyjikavj6bmlvf4v4oayaekhel2ju':\r\n==>   caliper-2.7.0-spjcnyp PASSED\r\n==> Testing package caliper-2.7.0-spjcnyp\r\n==> [2022-02-22-17:07:41.388715] Installing /usr/WS1/dahlgren/spack/opt/spack/linux-rhel7-cascadelake/intel-19.0.4.227/caliper-2.7.0-spjcnypkqsvlxf5ueopvbecs4pm6qtff/.spack/test to /g/g21/dahlgren/.spack/test/cpqwyjikavj6bmlvf4v4oayaekhel2ju/caliper-2.7.0-spjcnyp/cache/caliper\r\n==> [2022-02-22-17:07:41.451475] test: compile cxx-example example\r\n==> [2022-02-22-17:07:41.451764] '/usr/WS1/dahlgren/spack/lib/spack/env/intel/icpc' '-L/usr/WS1/dahlgren/spack/opt/spack/linux-rhel7-cascadelake/intel-19.0.4.227/caliper-2.7.0-spjcnypkqsvlxf5ueopvbecs4pm6qtff/lib64' '-I/usr/WS1/dahlgren/spack/opt/spack/linux-rhel7-cascadelake/intel-19.0.4.227/caliper-2.7.0-spjcnypkqsvlxf5ueopvbecs4pm6qtff/include' '/g/g21/dahlgren/.spack/test/cpqwyjikavj6bmlvf4v4oayaekhel2ju/caliper-2.7.0-spjcnyp/cache/caliper/examples/apps/cxx-example.cpp' '-o' 'cxx-example' '-std=c++11' '-lcaliper' '-lstdc++'\r\nPASSED\r\n==> [2022-02-22-17:07:41.998398] test: run cxx-example example\r\n==> [2022-02-22-17:07:41.998802] './cxx-example'\r\nPASSED\r\n\r\n==>   papi-6.0.0.1-xvpwwn3 NO-TESTS\r\n==> Testing package papi-6.0.0.1-xvpwwn3\r\nNo tests to run\r\n\r\n==>   tar-1.26-5tpf6bf SKIPPED\r\n==> Testing package tar-1.26-5tpf6bf\r\nSkipped external package\r\n\r\n================== 1 no-tests, 1 skipped, 1 passed of 3 specs ==================\r\n```",
    "user": "tldahlgren",
    "url": "https://api.github.com/repos/spack/spack/issues/28700",
    "updated_at": "2022-02-24 02:36:43",
    "created_at": "2022-02-01 01:16:50",
    "closed_at": "2022-02-24 02:36:22",
    "state": "closed",
    "title": "Testing: Summarize test results and add verbose output",
    "number": 28700,
    "milestone": null,
    "labels": [
        "new-version",
        "tests",
        "commands",
        "stand-alone-tests",
        "core"
    ],
    "id": 1120125560,
    "html_url": "https://github.com/spack/spack/pull/28700",
    "assignees": [],
    "comments": 2
}