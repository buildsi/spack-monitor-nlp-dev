{
    "body": "Cannot install, at least,`cuda@10.1.243:11.3.1` due to `OverflowError: signed integer is greater than maximum`:\r\n\r\nUsing:\r\n* `spack@develop` (a7b6149cc02713de55cb5719b9dab2dfc0476303 from `Tue Jun 29 00:33:35 2021 -0400`)\r\n* Ubuntu 20.04, Ubuntu 21.04\r\n* GCC 9.3.0, GCC 10.3.0\r\n* Python 3.8.5, Python 3.9.5\r\n\r\n```\r\n$> spack install cuda@11.3.1\r\n...\r\n==> Installing cuda-11.3.1-5japwam43c6ocqge56qnjgjs6c67spnb\r\n==> Fetching https://cache.e4s.io/build_cache/linux-ubuntu20.04-x86_64/gcc-9.3.0/cuda-11.3.1/linux-ubuntu20.04-x86_64-gcc-9.3.0-cuda-11.3.1-5japwam43c6ocqge56qnjgjs6c67spnb.spack\r\n==> Error: Failed to install cuda due to OverflowError: signed integer is greater than maximum\r\n==> Error: signed integer is greater than maximum\r\n```\r\n\r\n```\r\n$> spack -d install cuda@11.3.1\r\n...\r\n==> [2021-06-29-08:14:25.453897] Installing cuda-11.3.1-5japwam43c6ocqge56qnjgjs6c67spnb\r\n==> [2021-06-29-08:14:25.453935] Searching for binary cache of cuda-11.3.1-5japwam43c6ocqge56qnjgjs6c67spnb\r\n==> [2021-06-29-08:14:25.453997] Reading config file /spack/etc/spack/defaults/mirrors.yaml\r\n==> [2021-06-29-08:14:25.586708] Did not find linux-ubuntu20.04-x86_64-gcc-9.3.0-cuda-11.3.1-5japwam43c6ocqge56qnjgjs6c67spnb.spec.yaml on https://mirror.spack.io/build_cache/linux-ubuntu20.04-x86_64-gcc-9.3.0-cuda-11.3.1-5japwam43c6ocqge56qnjgjs6c67spnb.spec.yaml\r\n  Download failed: HTTP Error 404: Not Found\r\n==> [2021-06-29-08:14:25.588309] Creating stage lock build_cache\r\n==> [2021-06-29-08:14:25.588690] Checking existence of https://cache.e4s.io/build_cache/linux-ubuntu20.04-x86_64/gcc-9.3.0/cuda-11.3.1/linux-ubuntu20.04-x86_64-gcc-9.3.0-cuda-11.3.1-5japwam43c6ocqge56qnjgjs6c67spnb.spack\r\n==> [2021-06-29-08:14:25.673795] Fetching https://cache.e4s.io/build_cache/linux-ubuntu20.04-x86_64/gcc-9.3.0/cuda-11.3.1/linux-ubuntu20.04-x86_64-gcc-9.3.0-cuda-11.3.1-5japwam43c6ocqge56qnjgjs6c67spnb.spack\r\n==> [2021-06-29-08:14:25.807447] Flagging cuda-11.3.1-5japwam43c6ocqge56qnjgjs6c67spnb as failed: signed integer is greater than maximum\r\n==> [2021-06-29-08:14:25.810523] Error: Failed to install cuda due to OverflowError: signed integer is greater than maximum\r\n==> [2021-06-29-08:14:25.891387] Skip view update, this environment does not maintain a view\r\nTraceback (most recent call last):\r\n  File \"/spack/bin/spack\", line 77, in <module>\r\n    sys.exit(spack.main.main())\r\n  File \"/spack/lib/spack/spack/main.py\", line 771, in main\r\n    return _invoke_command(command, parser, args, unknown)\r\n  File \"/spack/lib/spack/spack/main.py\", line 499, in _invoke_command\r\n    return_val = command(parser, args)\r\n  File \"/spack/lib/spack/spack/cmd/install.py\", line 471, in install\r\n    install_specs(args, kwargs, zip(abstract_specs, specs))\r\n  File \"/spack/lib/spack/spack/cmd/install.py\", line 271, in install_specs\r\n    env.install_specs(specs_to_install, args=cli_args, **kwargs)\r\n  File \"/spack/lib/spack/spack/environment.py\", line 1608, in install_specs\r\n    builder.install()\r\n  File \"/spack/lib/spack/spack/installer.py\", line 1574, in install\r\n    self._install_task(task)\r\n  File \"/spack/lib/spack/spack/installer.py\", line 1127, in _install_task\r\n    _install_from_cache(pkg, cache_only, explicit, unsigned,\r\n  File \"/spack/lib/spack/spack/installer.py\", line 274, in _install_from_cache\r\n    installed_from_cache = _try_install_from_binary_cache(\r\n  File \"/spack/lib/spack/spack/installer.py\", line 405, in _try_install_from_binary_cache\r\n    return _process_binary_cache_tarball(pkg, binary_spec, explicit, unsigned,\r\n  File \"/spack/lib/spack/spack/installer.py\", line 365, in _process_binary_cache_tarball\r\n    tarball = binary_distribution.download_tarball(\r\n  File \"/spack/lib/spack/spack/binary_distribution.py\", line 1052, in download_tarball\r\n    stage.fetch()\r\n  File \"/spack/lib/spack/spack/stage.py\", line 490, in fetch\r\n    self.fetcher.fetch()\r\n  File \"/spack/lib/spack/spack/fetch_strategy.py\", line 73, in wrapper\r\n    return fun(self, *args, **kwargs)\r\n  File \"/spack/lib/spack/spack/fetch_strategy.py\", line 318, in fetch\r\n    partial_file, save_file = self._fetch_from_url(url)\r\n  File \"/spack/lib/spack/spack/fetch_strategy.py\", line 356, in _fetch_from_url\r\n    return self._fetch_urllib(url)\r\n  File \"/spack/lib/spack/spack/fetch_strategy.py\", line 73, in wrapper\r\n    return fun(self, *args, **kwargs)\r\n  File \"/spack/lib/spack/spack/fetch_strategy.py\", line 385, in _fetch_urllib\r\n    _data = response.read()\r\n  File \"/usr/lib/python3.8/http/client.py\", line 471, in read\r\n    s = self._safe_read(self.length)\r\n  File \"/usr/lib/python3.8/http/client.py\", line 612, in _safe_read\r\n    data = self.fp.read(amt)\r\n  File \"/usr/lib/python3.8/socket.py\", line 669, in readinto\r\n    return self._sock.recv_into(b)\r\n  File \"/usr/lib/python3.8/ssl.py\", line 1241, in recv_into\r\n    return self.read(nbytes, buffer)\r\n  File \"/usr/lib/python3.8/ssl.py\", line 1099, in read\r\n    return self._sslobj.read(len, buffer)\r\nOverflowError: signed integer is greater than maximum\r\n```\r\n\r\n@ax3l @Rombur @fspiga ",
    "user": "eugeneswalker",
    "url": "https://api.github.com/repos/spack/spack/issues/24589",
    "updated_at": "2021-07-06 12:12:35",
    "created_at": "2021-06-29 15:17:03",
    "closed_at": "2021-07-06 12:12:35",
    "state": "closed",
    "title": "cuda (many versions): OverflowError: signed integer is greater than maximum on Ubuntu 20.04, 21.04",
    "number": 24589,
    "milestone": null,
    "labels": [
        "build-error",
        "cuda"
    ],
    "id": 932817085,
    "html_url": "https://github.com/spack/spack/issues/24589",
    "assignees": [],
    "comments": 3
}