{
    "body": "### Steps to reproduce the issue\r\n\r\n`libdrm@2.4.110` build is failing using:\r\n* Ubuntu 2.04, GCC 9.3.0, x86_64\r\n* `spack@develop` (ebf92b428e789825f0543f36ac32073bdb0daba5 from `Thu Mar 3 15:03:10 2022 +0100`)\r\n\r\nIt looks like it should have an explicit dependency on `meson` -- at least for the newest version?\r\n\r\nConcrete spec: [libdrm.spec.json.txt](https://github.com/spack/spack/files/8180532/libdrm.spec.json.txt)\r\n\r\nConcretization:\r\n```\r\nInput spec\r\n--------------------------------\r\nlibdrm@2.4.110%gcc@9.3.0 arch=linux-ubuntu20.04-x86_64\r\n\r\nConcretized\r\n--------------------------------\r\nlibdrm@2.4.110%gcc@9.3.0 arch=linux-ubuntu20.04-x86_64\r\n    ^docbook-xml@4.5%gcc@9.3.0 arch=linux-ubuntu20.04-x86_64\r\n        ^libxml2@2.9.12%gcc@9.3.0~python arch=linux-ubuntu20.04-x86_64\r\n            ^libiconv@1.16%gcc@9.3.0 libs=shared,static arch=linux-ubuntu20.04-x86_64\r\n            ^pkgconf@1.8.0%gcc@9.3.0 arch=linux-ubuntu20.04-x86_64\r\n            ^xz@5.2.5%gcc@9.3.0+pic libs=shared,static arch=linux-ubuntu20.04-x86_64\r\n            ^zlib@1.2.11%gcc@9.3.0+optimize+pic+shared arch=linux-ubuntu20.04-x86_64\r\n    ^docbook-xsl@1.79.2%gcc@9.3.0 patches=a92c397 arch=linux-ubuntu20.04-x86_64\r\n    ^libpciaccess@0.16%gcc@9.3.0 arch=linux-ubuntu20.04-x86_64\r\n        ^libtool@2.4.6%gcc@9.3.0 arch=linux-ubuntu20.04-x86_64\r\n            ^m4@1.4.19%gcc@9.3.0+sigsegv patches=9dc5fbd,bfdffa7 arch=linux-ubuntu20.04-x86_64\r\n                ^libsigsegv@2.13%gcc@9.3.0 arch=linux-ubuntu20.04-x86_64\r\n        ^util-macros@1.19.3%gcc@9.3.0 arch=linux-ubuntu20.04-x86_64\r\n    ^libpthread-stubs@0.4%gcc@9.3.0 arch=linux-ubuntu20.04-x86_64\r\n```\r\n\r\nReproduced here using Docker container image:\r\n* `ecpe4s/ubuntu20.04-runner-x86_64:2022-02-01`\r\n\r\nInstall error:\r\n```console\r\n$> spack mirror add E4S https://cache.e4s.io\r\n$> spack buildcache keys -it\r\n\r\n$> spack install --cache-only --include-build-deps --only dependencies -f ./libdrm.spec.json\r\n\r\n$> spack install --no-cache -f ./libdrm.spec.json\r\n...\r\n==> Installing libdrm-2.4.110-qnu5fdbtpnm5phkaolwe3thvdq5yarca\r\n==> Using cached archive: /spack/var/spack/cache/_source-cache/archive/ee/eecee4c4b47ed6d6ce1a9be3d6d92102548ea35e442282216d47d05293cf9737.tar.xz\r\n==> No patches needed for libdrm\r\n==> libdrm: Executing phase: 'install'\r\n==> Error: ProcessError: meson: No such file or directory\r\n    Command: 'meson' '..' '--prefix=/spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/libdrm-2.4.110-qnu5fdbtpnm5phkaolwe3thvdq5yarca' '--libdir=/spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/libdrm-2.4.110-qnu5fdbtpnm5phkaolwe3thvdq5yarca/lib' '-Dbuildtype=release' '-Dstrip=false' '-Ddefault_library=shared'\r\nSee build log for details:\r\n  /tmp/root/spack-stage/spack-stage-libdrm-2.4.110-qnu5fdbtpnm5phkaolwe3thvdq5yarca/spack-build-out.txt\r\n...\r\n```\r\n\r\n\r\n### Error message\r\n\r\n<details><summary>Error message</summary><pre>\r\n==> Installing libdrm-2.4.110-qnu5fdbtpnm5phkaolwe3thvdq5yarca\r\n==> Using cached archive: /spack/var/spack/cache/_source-cache/archive/ee/eecee4c4b47ed6d6ce1a9be3d6d92102548ea35e442282216d47d05293cf9737.tar.xz\r\n==> No patches needed for libdrm\r\n==> libdrm: Executing phase: 'install'\r\n==> Error: ProcessError: meson: No such file or directory\r\n    Command: 'meson' '..' '--prefix=/spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/libdrm-2.4.110-qnu5fdbtpnm5phkaolwe3thvdq5yarca' '--libdir=/spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/libdrm-2.4.110-qnu5fdbtpnm5phkaolwe3thvdq5yarca/lib' '-Dbuildtype=release' '-Dstrip=false' '-Ddefault_library=shared'\r\nSee build log for details:\r\n  /tmp/root/spack-stage/spack-stage-libdrm-2.4.110-qnu5fdbtpnm5phkaolwe3thvdq5yarca/spack-build-out.txt\r\n</pre></details>\r\n\r\n\r\n### Information on your system\r\n\r\n* **Spack:** 0.17.1-1410-ebf92b428e\r\n* **Python:** 3.8.10\r\n* **Platform:** linux-ubuntu20.04-zen2\r\n* **Concretizer:** clingo\r\n\r\n### Additional information\r\n\r\n[spack-build-env.txt](https://github.com/spack/spack/files/8180552/spack-build-env.txt)\r\n[spack-build-out.txt](https://github.com/spack/spack/files/8180553/spack-build-out.txt)\r\n\r\n@wdconinc\r\n\r\n### General information\r\n\r\n- [X] I have run `spack debug report` and reported the version of Spack/Python/Platform\r\n- [X] I have run `spack maintainers <name-of-the-package>` and **@mentioned** any maintainers\r\n- [X] I have uploaded the build log and environment files\r\n- [X] I have searched the issues of this repo and believe this is not a duplicate",
    "user": "eugeneswalker",
    "url": "https://api.github.com/repos/spack/spack/issues/29326",
    "updated_at": "2022-03-04 03:53:40",
    "created_at": "2022-03-03 19:32:09",
    "closed_at": "2022-03-04 03:53:40",
    "state": "closed",
    "title": "libdrm@2.4.110 build fails: missing dependency on meson?",
    "number": 29326,
    "milestone": null,
    "labels": [
        "build-error",
        "dependencies",
        "e4s",
        "AMD",
        "ROCm/hip"
    ],
    "id": 1158818795,
    "html_url": "https://github.com/spack/spack/issues/29326",
    "assignees": [],
    "comments": 0
}