{
    "body": "### Steps to reproduce the issue\n\nI want to install Boost via GCC 11.2 on Ubuntu 18.04:\r\n```\r\nspack install boost\r\n```\r\n\r\nThe build aborts with this error:\r\n```\r\n    \"/home/eschnetter/src/spack/lib/spack/env/gcc/g++\" -L\"/home/eschnetter/src/spack/opt/spack/linux-ubuntu18.04-skylake_avx512/gcc-11.2.0/mpitrampoline-2.7.0-qyrefanytut7me4tbfuigxe4sn4n6oak/lib\"   -o \"bin.v2/libs/mpi/build/gcc-11/release/cxxstd-17-iso/threading-multi/visibility-global/libboost_mpi.so.1.78.0\" -Wl,-h -Wl,libboost_mpi.so.1.78.0 -shared -Wl,--start-group \"bin.v2/libs/mpi/build/gcc-11/release/cxxstd-17-iso/threading-multi/visibility-global/broadcast.o\" \"bin.v2/libs/mpi/build/gcc-11/release/cxxstd-17-iso/threading-multi/visibility-global/cartesian_communicator.o\" \"bin.v2/libs/mpi/build/gcc-11/release/cxxstd-17-iso/threading-multi/visibility-global/communicator.o\" \"bin.v2/libs/mpi/build/gcc-11/release/cxxstd-17-iso/threading-multi/visibility-global/computation_tree.o\" \"bin.v2/libs/mpi/build/gcc-11/release/cxxstd-17-iso/threading-multi/visibility-global/content_oarchive.o\" \"bin.v2/libs/mpi/build/gcc-11/release/cxxstd-17-iso/threading-multi/visibility-global/environment.o\" \"bin.v2/libs/mpi/build/gcc-11/release/cxxstd-17-iso/threading-multi/visibility-global/error_string.o\" \"bin.v2/libs/mpi/build/gcc-11/release/cxxstd-17-iso/threading-multi/visibility-global/exception.o\" \"bin.v2/libs/mpi/build/gcc-11/release/cxxstd-17-iso/threading-multi/visibility-global/graph_communicator.o\" \"bin.v2/libs/mpi/build/gcc-11/release/cxxstd-17-iso/threading-multi/visibility-global/group.o\" \"bin.v2/libs/mpi/build/gcc-11/release/cxxstd-17-iso/threading-multi/visibility-global/intercommunicator.o\" \"bin.v2/libs/mpi/build/gcc-11/release/cxxstd-17-iso/threading-multi/visibility-global/mpi_datatype_cache.o\" \"bin.v2/libs/mpi/build/gcc-11/release/cxxstd-17-iso/threading-multi/visibility-global/mpi_datatype_oarchive.o\" \"bin.v2/libs/mpi/build/gcc-11/release/cxxstd-17-iso/threading-multi/visibility-global/offsets.o\" \"bin.v2/libs/mpi/build/gcc-11/release/cxxstd-17-iso/threading-multi/visibility-global/packed_iarchive.o\" \"bin.v2/libs/mpi/build/gcc-11/release/cxxstd-17-iso/threading-multi/visibility-global/packed_oarchive.o\" \"bin.v2/libs/mpi/build/gcc-11/release/cxxstd-17-iso/threading-multi/visibility-global/packed_skeleton_iarchive.o\" \"bin.v2/libs/mpi/build/gcc-11/release/cxxstd-17-iso/threading-multi/visibility-global/packed_skeleton_oarchive.o\" \"bin.v2/libs/mpi/build/gcc-11/release/cxxstd-17-iso/threading-multi/visibility-global/point_to_point.o\" \"bin.v2/libs/mpi/build/gcc-11/release/cxxstd-17-iso/threading-multi/visibility-global/request.o\" \"bin.v2/libs/mpi/build/gcc-11/release/cxxstd-17-iso/threading-multi/visibility-global/status.o\" \"bin.v2/libs/mpi/build/gcc-11/release/cxxstd-17-iso/threading-multi/visibility-global/text_skeleton_oarchive.o\" \"bin.v2/libs/mpi/build/gcc-11/release/cxxstd-17-iso/threading-multi/visibility-global/timer.o\" \"bin.v2/libs/serialization/build/gcc-11/release/cxxstd-17-iso/threading-multi/visibility-global/libboost_serialization.so.1.78.0\"  -Wl,-Bstatic  -Wl,-Bdynamic -lrt -ldl -lmpi -Wl,--end-group -fPIC -m64 -pthread -std=c++17 -fvisibility=default /home/eschnetter/src/spack/lib/spack/env/gcc/g++ -Wl,-rpath,/home/eschnetter/src/spack/opt/spack/linux-ubuntu18.04-skylake_avx512/gcc-11.2.0/mpitrampoline-2.7.0-qyrefanytut7me4tbfuigxe4sn4n6oak/lib\r\n/home/eschnetter/src/spack/lib/spack/env/gcc/g++: file not recognized: File format not recognized\r\n```\r\n\r\nThe compiler name `/home/eschnetter/src/spack/lib/spack/env/gcc/g++` is duplicated in the command, so that the compiler sees itself as input, which leads to the error.\r\n\r\nThis problem is already visible earlier, but only as a warning:\r\n```\r\ngcc.compile.c++ bin.v2/libs/graph_parallel/build/gcc-11/release/cxxstd-17-iso/link-static/threading-multi/visibility-global/tag_allocator.o\r\n\r\n    \"/home/eschnetter/src/spack/lib/spack/env/gcc/g++\"   -std=c++17 -m64 -pthread -O3 -finline-functions -Wno-inline -Wall -fvisibility=default /home/eschnetter/src/spack/lib/spack/env/gcc/g++ -DBOOST_ALL_NO_LIB=1 -DBOOST_GRAPH_NO_LIB=1 -DNDEBUG  -I\".\" -I\"/home/eschnetter/src/spack/opt/spack/linux-ubuntu18.04-skylake_avx512/gcc-11.2.0/mpitrampoline-2.7.0-qyrefanytut7me4tbfuigxe4sn4n6oak/include\" -I\"libs/graph_parallel/src\"  -c -o \"bin.v2/libs/graph_parallel/build/gcc-11/release/cxxstd-17-iso/link-static/threading-multi/visibility-global/tag_allocator.o\" \"libs/graph_parallel/src/tag_allocator.cpp\"\r\n```\r\n\n\n### Information on your system\n\n```\r\n$ spack debug report\r\n* **Spack:** 0.17.0-473-e199d7ef6b\r\n* **Python:** 3.6.9\r\n* **Platform:** linux-ubuntu18.04-cascadelake\r\n* **Concretizer:** clingo\r\n```\r\n\n\n### Additional information\n\n@hainest\r\n[spack-build-out.txt](https://github.com/spack/spack/files/7694351/spack-build-out.txt)\r\n[spack-build-env.txt](https://github.com/spack/spack/files/7694353/spack-build-env.txt)\r\n\r\n\n\n### General information\n\n- [X] I have run `spack debug report` and reported the version of Spack/Python/Platform\n- [X] I have run `spack maintainers <name-of-the-package>` and **@mentioned** any maintainers\n- [X] I have uploaded the build log and environment files\n- [X] I have searched the issues of this repo and believe this is not a duplicate",
    "user": "eschnett",
    "url": "https://api.github.com/repos/spack/spack/issues/27917",
    "updated_at": "2021-12-11 16:42:09",
    "created_at": "2021-12-10 17:11:32",
    "closed_at": "2021-12-11 16:42:09",
    "state": "closed",
    "title": "Installation issue: boost",
    "number": 27917,
    "milestone": null,
    "labels": [
        "build-error"
    ],
    "id": 1077059237,
    "html_url": "https://github.com/spack/spack/issues/27917",
    "assignees": [],
    "comments": 1
}