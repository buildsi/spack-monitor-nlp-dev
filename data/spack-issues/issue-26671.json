{
    "body": "### Steps to reproduce\n\nSpack fails to concretize if the the default `build_type` is `RelWithDebInfo` because some of the rocm packages omit this from their variant lists.\r\n\r\n```console\r\n# spack config add packages:all:build_type:RelWithDebInfo\r\n# spack concretize\r\n```\r\n@srekolam @arjun-raj-kuppala @haampie\n\n### Error message\n\n```console\r\n==> [2021-10-11-20:06:19.538177] Imported concretize from built-in commands\r\n==> [2021-10-11-20:06:19.539062] Imported concretize from built-in commands\r\n==> [2021-10-11-20:06:19.552515] Reading config file /Users/psakiev/soft/spack-manager/spack/etc/spack/defaults/bootstrap.yaml\r\n==> [2021-10-11-20:06:19.563993] Deactivated environment '/Users/psakiev/exawind/base'\r\n==> [2021-10-11-20:06:19.566254] Reading config file /Users/psakiev/soft/spack-manager/spack/etc/spack/defaults/config.yaml\r\n==> [2021-10-11-20:06:19.593487] DATABASE LOCK TIMEOUT: 3s\r\n==> [2021-10-11-20:06:19.593607] PACKAGE LOCK TIMEOUT: No timeout\r\n==> [2021-10-11-20:06:19.594216] Reading config file /Users/psakiev/soft/spack-manager/spack/etc/spack/defaults/bootstrap.yaml\r\n==> [2021-10-11-20:06:19.605879] DATABASE LOCK TIMEOUT: 3s\r\n==> [2021-10-11-20:06:19.605970] PACKAGE LOCK TIMEOUT: No timeout\r\n==> [2021-10-11-20:06:19.606067] [BOOTSTRAP CONFIG SCOPE] name=_builtin\r\n==> [2021-10-11-20:06:19.606616] [BOOTSTRAP CONFIG SCOPE] name=defaults, path=/Users/psakiev/soft/spack-manager/spack/etc/spack/defaults\r\n==> [2021-10-11-20:06:19.606674] [BOOTSTRAP CONFIG SCOPE] name=defaults/darwin, path=/Users/psakiev/soft/spack-manager/spack/etc/spack/defaults/darwin\r\n==> [2021-10-11-20:06:19.606723] [BOOTSTRAP CONFIG SCOPE] name=bootstrap, path=/Users/psakiev/.spack/bootstrap/config\r\n==> [2021-10-11-20:06:19.606760] [BOOTSTRAP CONFIG SCOPE] name=bootstrap/darwin, path=/Users/psakiev/.spack/bootstrap/config/darwin\r\n==> [2021-10-11-20:06:19.607221] Reading config file /Users/psakiev/.spack/bootstrap/config/darwin/compilers.yaml\r\n==> [2021-10-11-20:06:19.679390] [BOOTSTRAP ROOT SPEC] clingo: clingo-bootstrap@spack+python %apple-clang target=x86_64\r\n==> [2021-10-11-20:06:19.679688] [BOOTSTRAP MODULE clingo] Try importing from Python\r\n==> [2021-10-11-20:06:19.680600] Reading config file /Users/psakiev/soft/spack-manager/spack/etc/spack/defaults/bootstrap.yaml\r\n==> [2021-10-11-20:06:19.972915] Reading config file /Users/psakiev/soft/spack-manager/spack/etc/spack/defaults/config.yaml\r\n==> [2021-10-11-20:06:20.065552] [BOOTSTRAP MODULE clingo] The installed spec \"clingo-bootstrap@spack+python %apple-clang target=x86_64 ^python@3.7 /u22aizm2ep4npjpi6uyovknfmvwqvq5f\" provides the \"clingo\" Python module\r\n==> [2021-10-11-20:06:20.067202] Reading config file /Users/psakiev/soft/spack-manager/spack/etc/spack/defaults/config.yaml\r\n==> [2021-10-11-20:06:20.092599] Reading config file /Users/psakiev/exawind/base/general_repos.yaml\r\n==> [2021-10-11-20:06:20.093731] Reading config file /Users/psakiev/exawind/base/general_config.yaml\r\n==> [2021-10-11-20:06:20.095248] Reading config file /Users/psakiev/exawind/base/general_packages.yaml\r\n==> [2021-10-11-20:06:20.106501] Reading config file /Users/psakiev/exawind/base/machine_compilers.yaml\r\n==> [2021-10-11-20:06:20.115111] Reading config file /Users/psakiev/exawind/base/machine_packages.yaml\r\n==> [2021-10-11-20:06:20.119809] Reading config file /Users/psakiev/exawind/base/machine_config.yaml\r\n==> [2021-10-11-20:06:20.122309] Reading config file /Users/psakiev/exawind/base/spack.yaml\r\n==> [2021-10-11-20:06:20.127639] Using environment '/Users/psakiev/exawind/base'\r\n==> [2021-10-11-20:06:20.127972] Reading config file /Users/psakiev/soft/spack-manager/spack/etc/spack/defaults/repos.yaml\r\n==> [2021-10-11-20:06:23.169149] Reading config file /Users/psakiev/.spack/darwin/compilers.yaml\r\n==> [2021-10-11-20:06:23.200956] Reading config file /Users/psakiev/soft/spack-manager/spack/etc/spack/defaults/packages.yaml\r\n==> [2021-10-11-20:06:23.245540] Reading config file /Users/psakiev/soft/spack-manager/spack/etc/spack/defaults/darwin/packages.yaml\r\n==> [2021-10-11-20:06:24.353609] InvalidVariantValueError: invalid values for variant \"build_type\" in package \"comgr\": ['RelWithDebInfo']\r\n\r\n==> [2021-10-11-20:06:24.353697] Error: invalid values for variant \"build_type\" in package \"comgr\": ['RelWithDebInfo']\r\n```\n\n### Information on your system\n\n```console\r\n# spack debug report\r\n* **Spack:** 0.16.3-4812-0da892f2dd\r\n* **Python:** 3.7.1\r\n* **Platform:** darwin-bigsur-skylake\r\n* **Concretizer:** clingo\r\n```\n\n### General information\n\n- [X] I have run `spack debug report` and reported the version of Spack/Python/Platform\n- [X] I have searched the issues of this repo and believe this is not a duplicate\n- [X] I have run the failing commands in debug mode and reported the output",
    "user": "psakievich",
    "url": "https://api.github.com/repos/spack/spack/issues/26671",
    "updated_at": "2022-01-18 12:21:13",
    "created_at": "2021-10-12 02:21:48",
    "closed_at": "2022-01-18 12:21:13",
    "state": "closed",
    "title": "Failure to concretize when RelWithDebInfo is the default",
    "number": 26671,
    "milestone": null,
    "labels": [
        "bug",
        "build-error",
        "impact-low"
    ],
    "id": 1023286245,
    "html_url": "https://github.com/spack/spack/issues/26671",
    "assignees": [],
    "comments": 3
}