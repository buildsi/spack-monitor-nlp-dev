{
    "body": "@michaelkuhn \r\n\r\nTrying to compile a new gcc using the native one (gcc 4.8.5) on a CentOS 7 system (with gcc, gcc-gfortran and gcc-c++ yum packages installed) I hit something that looks like a circular dependency (gcc -> Berkeley-db -> g++ (4.8.5 not capable enough ? to compile berkeley-db)) issue ?\r\n\r\n```console\r\n[laurent@localhost]~% spack install gcc@7.3.0\r\n\r\n[laurent@localhost]~% spack debug report\r\n* **Spack:** 0.16.0\r\n* **Python:** 3.6.8\r\n* **Platform:** linux-centos7-skylake\r\n```\r\n\r\n```console\r\n[laurent@localhost]~% spack install gcc@7.3.0\r\n==> Warning: gcc@4.8.5 cannot build optimized binaries for \"skylake\". Using best target possible: \"haswell\"\r\n[+] /home/laurent/opt/spack/linux-centos7-haswell/gcc-4.8.5/libiconv-1.16-qazxaa4lnd2ukd44fjzdhayyxvcg3wyu\r\n[+] /home/laurent/opt/spack/linux-centos7-haswell/gcc-4.8.5/libsigsegv-2.12-ymriiurzbqgc5sty6h7zsbys2p2miwh3\r\n==> Installing berkeley-db-18.1.40-py7xb4vbazmtpjebg37dnzl6jccgafk4\r\n==> No binary for berkeley-db-18.1.40-py7xb4vbazmtpjebg37dnzl6jccgafk4 found: installing from source\r\n==> Using cached archive: /home/laurent/opt/spack/var/spack/cache/_source-cache/archive/0c/0cecb2ef0c67b166de93732769abdeba0555086d51de1090df325e18ee8da9c8.tar.gz\r\n==> berkeley-db: Executing phase: 'autoreconf'\r\n==> berkeley-db: Executing phase: 'configure'\r\n==> Error: ProcessError: Command exited with status 1:\r\n    '/tmp/laurent/spack-stage/spack-stage-berkeley-db-18.1.40-py7xb4vbazmtpjebg37dnzl6jccgafk4/spack-src/dist/configure' '--prefix=/home/laurent/opt/spack/linux-centos7-haswell/gcc-4.8.5/berkeley-db-18.1.40-py7xb4vbazmtpjebg37dnzl6jccgafk4' '--disable-static' '--enable-cxx' '--enable-dbm' '--enable-stl' '--enable-compat185' '--with-repmgr-ssl=no'\r\n\r\n1 error found in build log:\r\n     131    checking if libtool supports shared libraries... yes\r\n     132    checking whether to build shared libraries... yes\r\n     133    checking whether to build static libraries... no\r\n     134    checking SOSUFFIX from libtool... .so\r\n     135    checking MODSUFFIX from libtool... .so\r\n     136    checking JMODSUFFIX from libtool... .so\r\n  >> 137    checking whether the C++ compiler supports templates for STL... configure: error: no\r\n\r\nSee build log for details:\r\n  /tmp/laurent/spack-stage/spack-stage-berkeley-db-18.1.40-py7xb4vbazmtpjebg37dnzl6jccgafk4/spack-build-out.txt\r\n\r\n==> Warning: Skipping build of perl-5.32.0-bzekmvrjgfkerkjpobn3bethyy6wmq2x since berkeley-db-18.1.40-py7xb4vbazmtpjebg37dnzl6jccgafk4 failed\r\n==> Warning: Skipping build of automake-1.16.2-4hge4mkn7wmyvdoivzhdbz6mxie4avtk since perl-5.32.0-bzekmvrjgfkerkjpobn3bethyy6wmq2x failed\r\n==> Warning: Skipping build of mpfr-3.1.6-nol4vkt6ncc5qrnzp6hq6lkqleatjubm since automake-1.16.2-4hge4mkn7wmyvdoivzhdbz6mxie4avtk failed\r\n==> Warning: Skipping build of mpc-1.1.0-kv3zuyscaxtpqfnrbkcboelyklhmn442 since mpfr-3.1.6-nol4vkt6ncc5qrnzp6hq6lkqleatjubm failed\r\n==> Warning: Skipping build of gcc-7.3.0-dq4xdcr6uvgfy7mcksnzik6wv3wrdxsy since mpc-1.1.0-kv3zuyscaxtpqfnrbkcboelyklhmn442 failed\r\n==> Warning: Skipping build of gmp-6.1.2-zn55wh7voutcbk46jzwgfyjfincjyuhh since automake-1.16.2-4hge4mkn7wmyvdoivzhdbz6mxie4avtk failed\r\n==> Warning: Skipping build of isl-0.18-igs522o7hf5wie4uotkvlhgm7je2exko since gmp-6.1.2-zn55wh7voutcbk46jzwgfyjfincjyuhh failed\r\n==> Warning: Skipping build of autoconf-2.69-letcmvnehttrso63n67m26awxjwxdpev since perl-5.32.0-bzekmvrjgfkerkjpobn3bethyy6wmq2x failed\r\n[+] /home/laurent/opt/spack/linux-centos7-haswell/gcc-4.8.5/pkgconf-1.7.3-z3r4unw5ir4g7p2lyuvxsobnb6jokpab\r\n[+] /home/laurent/opt/spack/linux-centos7-haswell/gcc-4.8.5/zlib-1.2.11-pkmj6e72vggig3epxjcwxgzmxncaqnmp\r\n[+] /home/laurent/opt/spack/linux-centos7-haswell/gcc-4.8.5/diffutils-3.7-jknorwe54bgplxnyom6sgwnbkong3jww\r\n[+] /home/laurent/opt/spack/linux-centos7-haswell/gcc-4.8.5/m4-1.4.18-7x2wh2thcpfjgeqxf4vhrqw3suxldfab\r\n[+] /home/laurent/opt/spack/linux-centos7-haswell/gcc-4.8.5/ncurses-6.2-tbpd5z45tamug3s3u3utt3rhay77lduh\r\n[+] /home/laurent/opt/spack/linux-centos7-haswell/gcc-4.8.5/libtool-2.4.6-fzl2npjphl7uxgvt5k2bpegqsbmlj7pc\r\n[+] /home/laurent/opt/spack/linux-centos7-haswell/gcc-4.8.5/readline-8.0-3jeiguwntbums72jmkcfbzplsstwa5rn\r\n[+] /home/laurent/opt/spack/linux-centos7-haswell/gcc-4.8.5/gdbm-1.18.1-7xh2soiwyepqubqwwhmtlrarqzz2kdna\r\n```\r\n\r\n- [x] I have run `spack debug report` and reported the version of Spack/Python/Platform\r\n- [x] I have run `spack maintainers <name-of-the-package>` and @mentioned any maintainers\r\n- [ ] I have uploaded the build log and environment files\r\n- [x] I have searched the issues of this repo and believe this is not a duplicate\r\n",
    "user": "aphecetche",
    "url": "https://api.github.com/repos/spack/spack/issues/20729",
    "updated_at": "2021-01-07 17:45:26",
    "created_at": "2021-01-07 16:49:25",
    "closed_at": "2021-01-07 17:45:25",
    "state": "closed",
    "title": "Installation issue: gcc@7.3.0 using CentOS 7 native gcc@4.8.5",
    "number": 20729,
    "milestone": null,
    "labels": [
        "build-error"
    ],
    "id": 781454429,
    "html_url": "https://github.com/spack/spack/issues/20729",
    "assignees": [],
    "comments": 1
}