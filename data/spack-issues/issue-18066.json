{
    "body": "`nfs-utils` compile fail on `ubuntu`\r\nthe `configure` will check `libblkid` by using a mini c code, and check fail because an undefined symbol.\r\n(that symbol realized in `libintl`).\r\nSo we need to add `libintl` dependency and export it in `LIBS` to make `configure` using it.\r\n```\r\n==> 84811: Installing nfs-utils\r\n==> Finding buildcaches at http://172.19.16.223/spack_mirror/build_cache\r\n==> Fetching http://172.19.16.223/spack_mirror/build_cache/linux-ubuntu19.10-aarch64-gcc-9.2.1-nfs-utils-2.4.2-crushuawerxtkgimcc2kqwp42yopr4y6.spec.yaml\r\n\r\ncurl: (22) The requested URL returned error: 404 Not Found\r\n==> Failed to fetch file from URL: http://172.19.16.223/spack_mirror/build_cache/linux-ubuntu19.10-aarch64-gcc-9.2.1-nfs-utils-2.4.2-crushuawerxtkgimcc2kqwp42yopr4y6.spec.yaml\r\n    URL http://172.19.16.223/spack_mirror/build_cache/linux-ubuntu19.10-aarch64-gcc-9.2.1-nfs-utils-2.4.2-crushuawerxtkgimcc2kqwp42yopr4y6.spec.yaml was not found!\r\n==> Fetching from http://172.19.16.223/spack_mirror/build_cache/linux-ubuntu19.10-aarch64-gcc-9.2.1-nfs-utils-2.4.2-crushuawerxtkgimcc2kqwp42yopr4y6.spec.yaml failed.\r\n==> Using cached archive: /home/spack-develop/var/spack/cache/_source-cache/archive/bb/bb08106cd7bd397c6cc34e2461bc7818a664450d2805da08b07e1ced88e5155f.tar.gz\r\n==> Staging archive: /home/spack-stage/root/spack-stage-nfs-utils-2.4.2-crushuawerxtkgimcc2kqwp42yopr4y6/download\r\n==> Created stage in /home/spack-stage/root/spack-stage-nfs-utils-2.4.2-crushuawerxtkgimcc2kqwp42yopr4y6\r\n==> No patches needed for nfs-utils\r\n==> 84811: nfs-utils: Building nfs-utils [AutotoolsPackage]\r\n==> 84811: nfs-utils: Executing phase: 'autoreconf'\r\n==> 84811: nfs-utils: Executing phase: 'configure'\r\n==> Error: ProcessError: Command exited with status 1:\r\n    '/home/spack-stage/root/spack-stage-nfs-utils-2.4.2-crushuawerxtkgimcc2kqwp42yopr4y6/spack-src/configure' '--prefix=/home/spack-develop/opt/spack/linux-ubuntu19.10-aarch64/gcc-9.2.1/nfs-utils-2.4.2-crushuawerxtkgimcc2kqwp42yopr4y6' '--disable-gss' '--with-rpcgen=internal'\r\n\r\n1 error found in build log:\r\n     166    checking for dm_task_create in -ldevmapper... yes\r\n     167    checking libdevmapper.h usability... yes\r\n     168    checking libdevmapper.h presence... yes\r\n     169    checking for libdevmapper.h... yes\r\n     170    checking for sys/inotify.h... (cached) yes\r\n     171    checking for blkid_get_library_version in -lblkid... no\r\n  >> 172    configure: error: libblkid needed\r\n\r\nSee build log for details:\r\n  /home/spack-stage/root/spack-stage-nfs-utils-2.4.2-crushuawerxtkgimcc2kqwp42yopr4y6/spack-build-out.txt\r\n\r\n==> Error: Failed to install nfs-utils due to ChildError: ProcessError: Command exited with status 1:\r\n    '/home/spack-stage/root/spack-stage-nfs-utils-2.4.2-crushuawerxtkgimcc2kqwp42yopr4y6/spack-src/configure' '--prefix=/home/spack-develop/opt/spack/linux-ubuntu19.10-aarch64/gcc-9.2.1/nfs-utils-2.4.2-crushuawerxtkgimcc2kqwp42yopr4y6' '--disable-gss' '--with-rpcgen=internal'\r\n1 error found in build log:\r\n     166    checking for dm_task_create in -ldevmapper... yes\r\n     167    checking libdevmapper.h usability... yes\r\n     168    checking libdevmapper.h presence... yes\r\n     169    checking for libdevmapper.h... yes\r\n     170    checking for sys/inotify.h... (cached) yes\r\n     171    checking for blkid_get_library_version in -lblkid... no\r\n  >> 172    configure: error: libblkid needed\r\n```",
    "user": "darmac",
    "url": "https://api.github.com/repos/spack/spack/issues/18066",
    "updated_at": "2020-09-01 06:37:06",
    "created_at": "2020-08-14 08:10:06",
    "closed_at": "2020-08-16 22:27:48",
    "state": "closed",
    "title": "nfs-utils: fix compile error on ubuntu",
    "number": 18066,
    "milestone": null,
    "labels": [
        "dependencies"
    ],
    "id": 678983557,
    "html_url": "https://github.com/spack/spack/pull/18066",
    "assignees": [],
    "comments": 0
}