{
    "body": "### Steps to reproduce the issue\n\n@davidbeckingsale \r\n\r\nI am trying to install raja with nvhpc compiler and it failed\r\n```\r\nsiddiq90@login37> spack concretize\r\n==> Concretized raja@0.13.0%nvhpc@21.7+cuda cuda_arch=80 ^cmake%gcc\r\n -   mvpo23e  raja@0.13.0%nvhpc@21.7+cuda+examples+exercises~ipo+openmp~rocm+shared~tests amdgpu_target=none build_type=RelWithDebInfo cuda_arch=80 arch=cray-sles15-zen3\r\n -   d3dhu47      ^blt@0.3.6%nvhpc@21.7 arch=cray-sles15-zen3\r\n[+]  acgtc2y          ^cmake@3.21.1%gcc@11.2.0~doc+ncurses+openssl+ownlibs~qt build_type=Release arch=cray-sles15-zen3\r\n[+]  3mchoh3              ^ncurses@6.2%gcc@11.2.0~symlinks+termlib abi=none arch=cray-sles15-zen3\r\n[+]  kigy57x                  ^pkg-config@0.29.2%gcc@11.2.0+internal_glib arch=cray-sles15-zen3\r\n[+]  jsad6zb              ^openssl@1.1.1k%gcc@11.2.0~docs+systemcerts arch=cray-sles15-zen3\r\n -   q7ji4lo      ^camp@0.1.0%nvhpc@21.7+cuda~ipo~rocm~tests amdgpu_target=none build_type=RelWithDebInfo cuda_arch=80 arch=cray-sles15-zen3\r\n -   zn4xdrw          ^cub@1.12.0-rc0%nvhpc@21.7 arch=cray-sles15-zen3\r\n -   ywfikjc          ^cuda@11.4.0%nvhpc@21.7~dev arch=cray-sles15-zen3\r\n```\r\n\r\n\n\n### Information on your system\n\n```\r\nsiddiq90@login37> spack debug report\r\n* **Spack:** 0.16.2-3949-8831cb2eed\r\n* **Python:** 3.6.12\r\n* **Platform:** cray-sles15-zen3\r\n* **Concretizer:** original\r\n\r\n```\n\n### Additional information\n\n[spack-build-out.txt](https://github.com/spack/spack/files/7429334/spack-build-out.txt)\r\n\r\nShown below is my spack configuration for perlmutter.\r\n```\r\nspack:\r\n  view: false\r\n  config:\r\n    install_tree:\r\n      root: /tmp/spack\r\n      padded_length: 127\r\n    build_stage: $tempdir/spack-stage\r\n    misc_cache: $tempdir/misc_cache\r\n  mirrors:\r\n    perlmutter-e4s-21.08: /global/common/software/spackecp/mirrors/perlmutter-e4s-21.08\r\n  definitions:\r\n  \r\n          #- compilers:\r\n          #    - nvhpc@21.7\r\n          #    - nvhpc@21.7+mpi\r\n  - nvhpc_cuda_specs:\r\n    \r\n    #- amrex@21.10 +openmp +pic +shared +cuda cuda_arch=80\r\n    # - caliper@2.6.0 +cuda cuda_arch=80\r\n      #- chai@2.3.0 +cuda ~benchmarks ~tests cuda_arch=80 ^umpire@4.1.2 ~shared concretization issue\r\n      #- ginkgo@1.3.0 +cuda cuda_arch=80\r\n      #- hpx@1.7.1 +cuda cuda_arch=80\r\n      #    - hypre@2.22.0 +cuda cuda_arch=80\r\n      #    - kokkos +cuda +wrapper cuda_arch=80\r\n      #    - kokkos-kernels +cuda cuda_arch=80 ^kokkos +wrapper\r\n      #    - magma@2.6.1 +cuda cuda_arch=80\r\n\r\n    #  - mfem@4.3.0 +cuda cuda_arch=80\r\n    #    - parsec@3.0.2012 +cuda cuda_arch=80\r\n    - raja@0.13.0 +cuda cuda_arch=80\r\n    #- slate +cuda cuda_arch=80\r\n    #- strumpack +cuda ~slate cuda_arch=80\r\n    #- sundials +cuda cuda_arch=80\r\n    #- superlu-dist@6.4.0 +cuda cuda_arch=80\r\n      #- tasmanian@7.5 +cuda cuda_arch=80\r\n      #- umpire@4.1.2 +cuda ~shared cuda_arch=80\r\n      #- zfp@0.5.5 +cuda cuda_arch=80\r\n\r\n    #- hypre@2.22.0 +openmp +cuda cuda_arch=80\r\n  - gcc_specs:\r\n    \r\n    #- adios2@2.7.1 +dataman ~mpi build failure\r\n    - aml@0.1.0\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    \r\n    #- amrex@21.08\r\n    # - arborx@1.0 failed install\r\n    - argobots@1.1\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    \r\n    #- ascent@0.7.1  dep failed\r\n    # - bolt@2.0  build failure\r\n    - darshan-runtime@3.3.1 scheduler=slurm ~mpi\r\n    - darshan-util@3.3.1\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    \r\n    #- dyninst@11.0.1  failed install\r\n    #- flecsi@1.4.2    failed install\r\n    - flit@2.1.0\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    \r\n    # - flux-core@0.28.0 skip for now\r\n    #- fortrilinos@2.0.0 skip for now\r\n    - gasnet@2021.3.0\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    \r\n    # - geopm@1.1.0 skip for now\r\n    - ginkgo@1.3.0\r\n    - hdf5@1.12.0 ~mpi\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    \r\n    #- heffte@2.1.0 +fftw install failed\r\n    #- hpctoolkit@2021.05.15 install failed\r\n    #- hypre@2.22.0\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    #- kokkos@3.4.00 +openmp see https://github.com/spack/spack/issues/26950\r\n    #- kokkos-kernels@3.2.00 +openmp\r\n    - legion@21.03.0\r\n    - metall@0.15\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    \r\n    #- mfem@4.3.0 install failed\r\n    #- netlib-scalapack@2.1.0\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    # - omega-h@9.32.5 install failed\r\n    - openmpi@4.1.1\r\n    - papi@6.0.0.1\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    \r\n    # - papyrus@1.0.1  install failed\r\n    # - parallel-netcdf@1.12.2 Skip package \r\n    #- paraview@5.9.1 install failed\r\n      #- parsec@3.0.2012 ~cuda failed install\r\n      # - petsc@3.15.3 ~hypre ~hdf5 failed install\r\n    - qthreads@1.16 scheduler=distrib\r\n    - raja@0.13.0\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    \r\n     #- rempi@1.1.0 failed install unable to find zlib\r\n     #- scr@3.0rc1\r\n      #- slate@2021.05.02 ~cuda ~mpi\r\n      #- strumpack@5.1.1 ~slate\r\n      #- sundials@5.7.0\r\n    - superlu@5.2.2\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    \r\n      #- superlu-dist@6.4.0 +openmp\r\n    - swig@4.0.2\r\n    - swig@4.0.2-fortran\r\n    - sz@2.1.12 +fortran\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    \r\n      #- tasmanian@7.5 +fortran +mpi\r\n     #- tau@2.30.1 +mpi ~binutils not working\r\n     #- trilinos@13.0.1 +amesos +amesos2 +anasazi +aztec +belos +boost +epetra +epetraext +ifpack +ifpack2 +intrepid +intrepid2 +isorropia +kokkos +ml +minitensor +muelu +nox +piro +phalanx +rol +rythmos +sacado +stk +shards +shylu +stokhos +stratimikos +teko +tempus +tpetra +trilinoscouplings +zoltan +zoltan2 +superlu-dist gotype=long_long\r\n    - umap@2.1.0\r\n    - umpire@4.1.2 +openmp\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    \r\n    #- unifyfs@0.9.1 +fortran\r\n    #- upcxx@2021.3.0\r\n    #- veloc@1.4\r\n    - vtk-m@1.6.0\r\n    - zfp@0.5.5\r\n  - nvhpc: ['%nvhpc@21.7']\r\n  - gcc: ['%gcc@11.2.0']\r\n  specs:\r\n  - matrix:\r\n    - [$nvhpc_cuda_specs]\r\n    - [$nvhpc]\r\n    - [^cmake%gcc]\r\n  - matrix:\r\n    - [$gcc_specs]\r\n    - [$gcc]\r\n  compilers:\r\n  - compiler:\r\n      spec: gcc@10.3.0\r\n      paths:\r\n        cc: /opt/cray/pe/gcc/10.3.0/bin/gcc\r\n        cxx: /opt/cray/pe/gcc/10.3.0/bin/g++\r\n        f77: /opt/cray/pe/gcc/10.3.0/bin/gfortran\r\n        fc: /opt/cray/pe/gcc/10.3.0/bin/gfortran\r\n      operating_system: sles15\r\n      modules:\r\n      - PrgEnv-gnu/8.1.0\r\n      - gcc/10.3.0\r\n  - compiler:\r\n      spec: gcc@11.2.0\r\n      paths:\r\n        cc: /opt/cray/pe/gcc/11.2.0/bin/gcc\r\n        cxx: /opt/cray/pe/gcc/11.2.0/bin/g++\r\n        f77: /opt/cray/pe/gcc/11.2.0/bin/gfortran\r\n        fc: /opt/cray/pe/gcc/11.2.0/bin/gfortran\r\n      operating_system: sles15\r\n      modules:\r\n      - PrgEnv-gnu/8.1.0\r\n      - gcc/11.2.0\r\n  - compiler:\r\n      spec: nvhpc@21.7\r\n      paths:\r\n        cc: /opt/nvidia/hpc_sdk/Linux_x86_64/21.7/compilers/bin/nvc\r\n        cxx: /opt/nvidia/hpc_sdk/Linux_x86_64/21.7/compilers/bin/nvc++\r\n        f77: /opt/nvidia/hpc_sdk/Linux_x86_64/21.7/compilers/bin/nvfortran\r\n        fc: /opt/nvidia/hpc_sdk/Linux_x86_64/21.7/compilers/bin/nvfortran\r\n      modules:\r\n      - nvhpc/21.7\r\n      flags: {}\r\n      operating_system: sles15\r\n      target: any\r\n      environment: {}\r\n      extra_rpaths: []\r\n  packages:\r\n    all:\r\n      providers:\r\n        compiler: [gcc@11.3.0, nvhpc@21.7]\r\n        mpi: [cray-mpich]\r\n        fftw: [cray-fftw]\r\n        blas: [cray-libsci, nvhpc]\r\n        scalapack: [cray-libsci]\r\n        pkgconfig: [pkg-config]\r\n    amrex:\r\n      variants: +openmp +pic +fortran\r\n    automake:\r\n      version: [1.16.3]\r\n    bzip2:\r\n      version: [1.0.6]\r\n      buildable: false\r\n      externals:\r\n      - spec: bzip2@1.0.6\r\n        prefix: /usr\r\n    cray-mpich:\r\n      buildable: false\r\n      externals:\r\n      - spec: cray-mpich@8.1.0\r\n        prefix: /opt/cray/pe/mpich/8.1.9\r\n        modules:\r\n        - cray-mpich/8.1.9\r\n    cray-libsci:\r\n      buildable: false\r\n      externals:\r\n      - spec: cray-libsci@20.06.1\r\n        modules:\r\n        - cray-libsci/21.08.1.2\r\n    cuda:\r\n      buildable: false\r\n      version: [11.4.0]\r\n      externals:\r\n      - spec: cuda@11.4.0\r\n        prefix: /opt/nvidia/hpc_sdk/Linux_x86_64/21.7/cuda/11.4/\r\n        modules:\r\n        - nvhpc/21.7\r\n    diffutils:\r\n      version: [3.6]\r\n      buildable: false\r\n      externals:\r\n      - spec: diffutils@3.6\r\n        prefix: /usr\r\n    cray-fftw:\r\n      version: [3.3.8.8]\r\n      buildable: false\r\n      externals:\r\n      - spec: cray-fftw@3.3.8.8\r\n        modules:\r\n        - cray-fftw/3.3.8.11\r\n    hdf5:\r\n      variants: +cxx +fortran\r\n    gettext:\r\n      version: [0.19.8.1]\r\n      buildable: false\r\n      externals:\r\n      - spec: gettext\r\n        prefix: /usr\r\n    libfabric:\r\n      buildable: false\r\n      externals:\r\n      - spec: libfabric@1.11.0\r\n        modules:\r\n        - libfabric/1.11.0.4.79\r\n    m4:\r\n      buildable: false\r\n      externals:\r\n      - spec: m4@1.4.18\r\n        prefix: /usr\r\n    openssl:\r\n      buildable: false\r\n      externals:\r\n      - spec: openssl@1.1.1k\r\n        prefix: /usr\r\n    openssh:\r\n      version: [7.9p1]\r\n      buildable: false\r\n      externals:\r\n      - spec: openssh\r\n        prefix: /usr\r\n    openmpi:\r\n      version: [4.0.5]\r\n      variants: +cxx schedulers=slurm\r\n      externals:\r\n      - spec: openmpi@3.1.5\r\n        prefix: /opt/nvidia/hpc_sdk/Linux_x86_64/21.7/comm_libs/openmpi/openmpi-3.1.5/\r\n        modules:\r\n        - nvhpc/21.7\r\n    pdsh:\r\n      buildable: false\r\n      externals:\r\n      - spec: pdsh@2.31\r\n        prefix: /usr\r\n    python:\r\n      buildable: false\r\n      externals:\r\n      - spec: python@3.8.8\r\n        modules:\r\n        - python/3.9-anaconda-2021.05\r\n    slurm:\r\n      buildable: false\r\n      version: [20-11-5-1]\r\n      externals:\r\n      - spec: slurm\r\n        prefix: /usr\r\n    tar:\r\n      version: [1.3]\r\n      buildable: false\r\n      externals:\r\n      - spec: tar@1.30\r\n        prefix: /usr\r\n\r\n```\n\n### General information\n\n- [X] I have run `spack debug report` and reported the version of Spack/Python/Platform\n- [X] I have run `spack maintainers <name-of-the-package>` and **@mentioned** any maintainers\n- [X] I have uploaded the build log and environment files\n- [X] I have searched the issues of this repo and believe this is not a duplicate",
    "user": "shahzebsiddiqui",
    "url": "https://api.github.com/repos/spack/spack/issues/26995",
    "updated_at": "2022-01-20 01:41:59",
    "created_at": "2021-10-27 21:20:01",
    "closed_at": "None",
    "state": "open",
    "title": "raja: installation issue with nvhpc compiler on perlmutter (cray-sles15-zen3)",
    "number": 26995,
    "milestone": null,
    "labels": [
        "build-error",
        "e4s",
        "nersc"
    ],
    "id": 1037872244,
    "html_url": "https://github.com/spack/spack/issues/26995",
    "assignees": [],
    "comments": 0
}