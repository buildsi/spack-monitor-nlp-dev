{
    "body": "### Steps to reproduce the issue\n\n```console\r\n$ spack  install llvm@13.0.0 +cuda cuda_arch=70\r\n```\r\n\n\n### Error message\n\n<details><summary>Error message</summary><pre>\r\nspack install llvm@13.0.0 +cuda cuda_arch=70\r\n==> Warning: Missing a source id for llvm@13.0.0\r\n[+] /home/projects/x86-64/spack/opt/spack/linux-rhel7-skylake_avx512/gcc-9.2.0/libiconv-1.16-dh7pvqkkrh4f6emrhl7jbk6o7qisa57o\r\n[+] /home/projects/x86-64/spack/opt/spack/linux-rhel7-skylake_avx512/gcc-9.2.0/pkgconf-1.8.0-dl6yoge2bc5pj53lftzqi5nztbcku7tl\r\n[+] /home/projects/x86-64/spack/opt/spack/linux-rhel7-skylake_avx512/gcc-9.2.0/xz-5.2.5-5lu4k4rijnm7nfxlfybtejkdm34rvwzm\r\n[+] /home/projects/x86-64/spack/opt/spack/linux-rhel7-skylake_avx512/gcc-9.2.0/zlib-1.2.11-kghrhbarmf5klns5lt2sgguszbtf3e74\r\n[+] /home/projects/x86-64/spack/opt/spack/linux-rhel7-skylake_avx512/gcc-9.2.0/berkeley-db-18.1.40-gfd3ssdyirq3b3i6ysptjc7yv6jt27bh\r\n[+] /home/projects/x86-64/spack/opt/spack/linux-rhel7-skylake_avx512/gcc-9.2.0/libsigsegv-2.13-kwkzrqncpx6j6wyzr2jpvjntzq7zwwnp\r\n[+] /home/projects/x86-64/spack/opt/spack/linux-rhel7-skylake_avx512/gcc-9.2.0/util-macros-1.19.3-qtt6ylwdm3kidllhs5jxww6qwq5eknwx\r\n[+] /home/projects/x86-64/spack/opt/spack/linux-rhel7-skylake_avx512/gcc-9.2.0/libelf-0.8.13-merpg2gy6ldmmfvowmszi4o2vpdiwm2g\r\n[+] /home/projects/x86-64/spack/opt/spack/linux-rhel7-skylake_avx512/gcc-9.2.0/libffi-3.3-if2fupyeyx6h2mhodch5rcan2feztfrs\r\n[+] /home/projects/x86-64/spack/opt/spack/linux-rhel7-skylake_avx512/gcc-9.2.0/libmd-1.0.3-e2atdoj6zmvc6ejdzc4uvb6qlwyu6hc2\r\n[+] /home/projects/x86-64/spack/opt/spack/linux-rhel7-skylake_avx512/gcc-9.2.0/pcre-8.44-azbgbzqvzhx5jv2u732prbxvpcw3lslm\r\n[+] /home/projects/x86-64/spack/opt/spack/linux-rhel7-skylake_avx512/gcc-9.2.0/diffutils-3.7-aq3cyplbitf325oyg2ugpcavdv364irg\r\n[+] /home/projects/x86-64/spack/opt/spack/linux-rhel7-skylake_avx512/gcc-9.2.0/tar-1.34-hu2hbrsfh73x7lbo3ex7xbp5lbaqy5vw\r\n[+] /home/projects/x86-64/spack/opt/spack/linux-rhel7-skylake_avx512/gcc-9.2.0/util-linux-uuid-2.36.2-oorteedynjg3qljq4ocnpasrhdznaxcu\r\n[+] /home/projects/x86-64/spack/opt/spack/linux-rhel7-skylake_avx512/gcc-9.2.0/ncurses-6.2-7iedlz7upcpxeymnyeatf6d4auhhgqcb\r\n[+] /home/projects/x86-64/spack/opt/spack/linux-rhel7-skylake_avx512/gcc-9.2.0/libxml2-2.9.12-rjn646zid74l6f3pysrgjcusovacpxbh\r\n[+] /home/projects/x86-64/spack/opt/spack/linux-rhel7-skylake_avx512/gcc-9.2.0/m4-1.4.19-xjmx22uckh4rjujtczoqg3ycqc3lzlie\r\n[+] /home/projects/x86-64/spack/opt/spack/linux-rhel7-skylake_avx512/gcc-9.2.0/libbsd-0.11.3-7wf6pa4jzab5vri76pi7tkfqpcqe7yma\r\n[+] /home/projects/x86-64/spack/opt/spack/linux-rhel7-skylake_avx512/gcc-9.2.0/swig-4.0.2-wxz5odvzvfjggzbzj36x6h2kksvxh2yz\r\n[+] /home/projects/x86-64/spack/opt/spack/linux-rhel7-skylake_avx512/gcc-9.2.0/bzip2-1.0.8-47n4mq6oorjflm7ghn2y6geijm43ogyk\r\n[+] /home/projects/x86-64/spack/opt/spack/linux-rhel7-skylake_avx512/gcc-9.2.0/libedit-3.1-20210216-dcgw6jugpt7gtba7x4cnabjr5ai3uxu7\r\n[+] /home/projects/x86-64/spack/opt/spack/linux-rhel7-skylake_avx512/gcc-9.2.0/readline-8.1-ngtx2h4m3zqyku444323ecjepcts57ue\r\n[+] /home/projects/x86-64/spack/opt/spack/linux-rhel7-skylake_avx512/gcc-9.2.0/cuda-11.4.0-lig2fzcaga3dkag7k3nqsplk7elhpq24\r\n[+] /home/projects/x86-64/spack/opt/spack/linux-rhel7-skylake_avx512/gcc-9.2.0/libtool-2.4.6-vmgwajgdmuoirogs2kseexplcrchg65y\r\n[+] /home/projects/x86-64/spack/opt/spack/linux-rhel7-skylake_avx512/gcc-9.2.0/expat-2.4.1-t6rwnuh3nbn47xfluedhiti3so56ilxb\r\n[+] /home/projects/x86-64/spack/opt/spack/linux-rhel7-skylake_avx512/gcc-9.2.0/gettext-0.21-4hk2myl3f3agtrdl52ua34mgd3pdugob\r\n[+] /home/projects/x86-64/spack/opt/spack/linux-rhel7-skylake_avx512/gcc-9.2.0/sqlite-3.36.0-zcfb52mbddcaxjgi5w4n3skmiwpjrm5d\r\n[+] /home/projects/x86-64/spack/opt/spack/linux-rhel7-skylake_avx512/gcc-9.2.0/gdbm-1.19-c5a2opnwkwpfvxp4jnxdkdcjzrw5trjo\r\n[+] /home/projects/x86-64/spack/opt/spack/linux-rhel7-skylake_avx512/gcc-9.2.0/libpciaccess-0.16-ba2dkecgicmcm7jkf7vuorbunv45765u\r\n[+] /home/projects/x86-64/spack/opt/spack/linux-rhel7-skylake_avx512/gcc-9.2.0/binutils-2.37-zmuzheymzdijoguwulw7u5tzjxcgwhuu\r\n[+] /home/projects/x86-64/spack/opt/spack/linux-rhel7-skylake_avx512/gcc-9.2.0/perl-5.34.0-6t7ouqt4ojaaqofvvgp7oldjtpdh6xgw\r\n[+] /home/projects/x86-64/spack/opt/spack/linux-rhel7-skylake_avx512/gcc-9.2.0/hwloc-2.5.0-5knoda2wffpxn4uij77ee5zhhq2p6y5m\r\n[+] /home/projects/x86-64/spack/opt/spack/linux-rhel7-skylake_avx512/gcc-9.2.0/perl-data-dumper-2.173-tjrcxgsz2ugvp5bevd7nyqmowitu4tf4\r\n[+] /home/projects/x86-64/spack/opt/spack/linux-rhel7-skylake_avx512/gcc-9.2.0/openssl-1.1.1l-ihvb4fgj64kwb4bktfbwdqt6qmhapu5u\r\n[+] /home/projects/x86-64/spack/opt/spack/linux-rhel7-skylake_avx512/gcc-9.2.0/cmake-3.21.2-rp3ocfilyiikt2mdsxhiu2xn2s7qalxn\r\n[+] /home/projects/x86-64/spack/opt/spack/linux-rhel7-skylake_avx512/gcc-9.2.0/python-3.8.11-qyntrynd5ekgvo3o2lpx3wxa2ahqy43s\r\n[+] /home/projects/x86-64/spack/opt/spack/linux-rhel7-skylake_avx512/gcc-9.2.0/z3-4.8.9-mbzgxkf5eooljhvn3mvk33kpyom6dxig\r\n==> Installing llvm-13.0.0-5arz5zpuhjl7lij4g2qss3rqp5qg5xhk\r\n==> No binary for llvm-13.0.0-5arz5zpuhjl7lij4g2qss3rqp5qg5xhk found: installing from source\r\n==> Warning: There is no checksum on file to fetch llvm@13.0.0 safely.\r\n==>   Fetch anyway? [y/N] y\r\n==> Fetching https://github.com/llvm/llvm-project/archive/llvmorg-13.0.0.tar.gz\r\n==> No patches needed for llvm\r\n==> llvm: Executing phase: 'cmake'\r\n==> llvm: Executing phase: 'build'\r\n==> Error: ProcessError: Command exited with status 2:\r\n    'make' '-j16'\r\n\r\n4 errors found in build log:\r\n     16907    /home/projects/x86-64/spack/opt/spack/linux-rhel7-skylake_avx512/gcc-9.2.0/binutils-2.37-zmuzheymzdijoguwulw7u5tzjxcgwhuu/bin/ranlib -D ../../../../lib/clang/13.0.0/lib/linux/libclang_rt.ubsan_standalone-x86_64.a\r\n     16908    [ 25%] Building CXX object projects/libcxxabi/src/CMakeFiles/cxxabi_static.dir/cxa_personality.cpp.o\r\n     16909    cd /tmp/crtrott/spack-stage/spack-stage-llvm-13.0.0-5arz5zpuhjl7lij4g2qss3rqp5qg5xhk/spack-build-5arz5zp/projects/libcxxabi/src && /home/projects/x86-64/spack/lib/spack/env/gcc/g++ -D_GNU_SOURCE -D_LIBCPP_BUILDING_LIBRARY -D_LIBCPP_DISABLE_EXTERN_TEMPLATE -D_LIBCXXABI_BUILDING_LIBRARY\r\n               -D__STDC_CONSTANT_MACROS -D__STDC_FORMAT_MACROS -D__STDC_LIMIT_MACROS -I/tmp/crtrott/spack-stage/spack-stage-llvm-13.0.0-5arz5zpuhjl7lij4g2qss3rqp5qg5xhk/spack-build-5arz5zp/projects/libcxxabi/src -I/tmp/crtrott/spack-stage/spack-stage-llvm-13.0.0-5arz5zpuhjl7lij4g2qss3rqp5qg5xhk/spa\r\n              ck-src/libcxxabi/src -I/tmp/crtrott/spack-stage/spack-stage-llvm-13.0.0-5arz5zpuhjl7lij4g2qss3rqp5qg5xhk/spack-build-5arz5zp/include -I/tmp/crtrott/spack-stage/spack-stage-llvm-13.0.0-5arz5zpuhjl7lij4g2qss3rqp5qg5xhk/spack-src/llvm/include -I/tmp/crtrott/spack-stage/spack-stage-llvm-1\r\n              3.0.0-5arz5zpuhjl7lij4g2qss3rqp5qg5xhk/spack-src/libcxxabi/include -I/tmp/crtrott/spack-stage/spack-stage-llvm-13.0.0-5arz5zpuhjl7lij4g2qss3rqp5qg5xhk/spack-src/libcxxabi/../libcxx -std=c++11 -fPIC -fno-semantic-interposition -fvisibility-inlines-hidden -Werror=date-time -Wall -Wextra\r\n               -Wno-unused-parameter -Wwrite-strings -Wcast-qual -Wno-missing-field-initializers -pedantic -Wno-long-long -Wimplicit-fallthrough -Wno-maybe-uninitialized -Wno-class-memaccess -Wno-redundant-move -Wno-pessimizing-move -Wno-noexcept-type -Wdelete-non-virtual-dtor -Wsuggest-override -W\r\n              no-comment -Wmisleading-indentation -ffunction-sections -fdata-sections  -O3 -DNDEBUG -fPIC -nostdinc++ -Werror=return-type -W -Wall -Wchar-subscripts -Wconversion -Wmissing-braces -Wunused-function -Wshadow -Wsign-compare -Wsign-conversion -Wstrict-aliasing=2 -Wstrict-overflow=4 -Wun\r\n              used-parameter -Wunused-variable -Wwrite-strings -Wundef -Wno-suggest-override -Wno-error -pedantic -fstrict-aliasing -funwind-tables -D_DEBUG -UNDEBUG -I/tmp/crtrott/spack-stage/spack-stage-llvm-13.0.0-5arz5zpuhjl7lij4g2qss3rqp5qg5xhk/spack-build-5arz5zp/include/c++/v1 -std=c++2a -MD\r\n               -MT projects/libcxxabi/src/CMakeFiles/cxxabi_static.dir/cxa_personality.cpp.o -MF CMakeFiles/cxxabi_static.dir/cxa_personality.cpp.o.d -o CMakeFiles/cxxabi_static.dir/cxa_personality.cpp.o -c /tmp/crtrott/spack-stage/spack-stage-llvm-13.0.0-5arz5zpuhjl7lij4g2qss3rqp5qg5xhk/spack-src/\r\n              libcxxabi/src/cxa_personality.cpp\r\n     16910    In file included from /tmp/crtrott/spack-stage/spack-stage-llvm-13.0.0-5arz5zpuhjl7lij4g2qss3rqp5qg5xhk/spack-build-5arz5zp/include/c++/v1/__availability:13,\r\n     16911                     from /tmp/crtrott/spack-stage/spack-stage-llvm-13.0.0-5arz5zpuhjl7lij4g2qss3rqp5qg5xhk/spack-build-5arz5zp/include/c++/v1/optional:149,\r\n     16912                     from /tmp/crtrott/spack-stage/spack-stage-llvm-13.0.0-5arz5zpuhjl7lij4g2qss3rqp5qg5xhk/spack-src/libcxx/src/optional.cpp:9:\r\n  >> 16913    /tmp/crtrott/spack-stage/spack-stage-llvm-13.0.0-5arz5zpuhjl7lij4g2qss3rqp5qg5xhk/spack-build-5arz5zp/include/c++/v1/__config:1065:41: error: a destructor cannot be 'constexpr'\r\n     16914     1065 | #  define _LIBCPP_CONSTEXPR_AFTER_CXX17 constexpr\r\n     16915          |                                         ^~~~~~~~~\r\n     16916    /tmp/crtrott/spack-stage/spack-stage-llvm-13.0.0-5arz5zpuhjl7lij4g2qss3rqp5qg5xhk/spack-build-5arz5zp/include/c++/v1/optional:224:5: note: in expansion of macro '_LIBCPP_CONSTEXPR_AFTER_CXX17'\r\n     16917      224 |     _LIBCPP_CONSTEXPR_AFTER_CXX17 ~__optional_destruct_base()\r\n     16918          |     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n     16919    make[2]: Leaving directory `/tmp/crtrott/spack-stage/spack-stage-llvm-13.0.0-5arz5zpuhjl7lij4g2qss3rqp5qg5xhk/spack-build-5arz5zp'\r\n\r\n     ...\r\n</pre></details>\r\n\r\nLooks to me like its trying to compile LLVM with an unsupported C++ standard?\r\n\r\n@naromero77 @trws \r\n\n\n### Information on your system\n\n* **Spack:** 0.16.2-4249-c6edfa3f31\r\n* **Python:** 3.6.8\r\n* **Platform:** linux-rhel7-skylake_avx512\r\n* **Concretizer:** original\n\n### Additional information\n\n[spack-build-env.txt](https://github.com/spack/spack/files/8112692/spack-build-env.txt)\r\n[spack-build-out.txt](https://github.com/spack/spack/files/8112694/spack-build-out.txt)\r\n\r\n\n\n### General information\n\n- [X] I have run `spack debug report` and reported the version of Spack/Python/Platform\n- [X] I have run `spack maintainers <name-of-the-package>` and **@mentioned** any maintainers\n- [X] I have uploaded the build log and environment files\n- [X] I have searched the issues of this repo and believe this is not a duplicate",
    "user": "crtrott",
    "url": "https://api.github.com/repos/spack/spack/issues/29114",
    "updated_at": "2022-02-22 21:29:55",
    "created_at": "2022-02-22 00:16:47",
    "closed_at": "2022-02-22 21:29:55",
    "state": "closed",
    "title": "Installation issue: LLVM@13.0.x",
    "number": 29114,
    "milestone": null,
    "labels": [
        "build-error"
    ],
    "id": 1146325682,
    "html_url": "https://github.com/spack/spack/issues/29114",
    "assignees": [],
    "comments": 4
}