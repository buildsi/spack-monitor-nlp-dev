{
    "body": "Using version v0.8.17-4048-ge9d4780 (e9d4780) I encountered the following failure when trying to install gcc in a stock Amazon Linux instance.  This was the next issue encountered after #1853 was fixed.\n\n```\n$ sudo ./bin/spack install gcc\n==> Installing gcc\n==> Installing gmp\n==> Installing m4\n==> Installing libsigsegv\n==> Trying to fetch from file:///home/ec2-user/spack/var/spack/cache/libsigsegv/libsigsegv-2.10.tar.gz\ncurl: (37) Couldn't open file /home/ec2-user/spack/var/spack/cache/libsigsegv/libsigsegv-2.10.tar.gz\n==> Fetching from file:///home/ec2-user/spack/var/spack/cache/libsigsegv/libsigsegv-2.10.tar.gz failed.\n==> Trying to fetch from ftp://ftp.gnu.org/gnu/libsigsegv/libsigsegv-2.10.tar.gz\n######################################################################## 100.0%\n==> Staging archive: /home/ec2-user/spack/var/spack/stage/libsigsegv-2.10-4ztqjpi2ehos3tf54udul4czzkykpiej/libsigsegv-2.10.tar.gz\n==> Created stage in /home/ec2-user/spack/var/spack/stage/libsigsegv-2.10-4ztqjpi2ehos3tf54udul4czzkykpiej\n==> No patches needed for libsigsegv\n==> Building libsigsegv\n==> Successfully installed libsigsegv\n  Fetch: 1.52s.  Build: 9.66s.  Total: 11.17s.\n[+] /home/ec2-user/spack/opt/spack/linux--x86_64/gcc-4.8.3/libsigsegv-2.10-4ztqjpi2ehos3tf54udul4czzkykpiej\n==> Warning: Dependency missing due to corrupt install directory:\n  /home/ec2-user/spack/opt/spack/linux--x86_64/gcc-4.8.3/libsigsegv-2.10-4ztqjpi2ehos3tf54udul4czzkykpiej\n  Specs libsigsegv@2.10%gcc@4.8.3 arch=linux--x86_64 and libsigsegv@2.10%gcc@4.8.3 arch=linux-None-x86_64 have the same SHA-1 prefix!\n==> Trying to fetch from file:///home/ec2-user/spack/var/spack/cache/m4/m4-1.4.17.tar.gz\ncurl: (37) Couldn't open file /home/ec2-user/spack/var/spack/cache/m4/m4-1.4.17.tar.gz\n==> Fetching from file:///home/ec2-user/spack/var/spack/cache/m4/m4-1.4.17.tar.gz failed.\n==> Trying to fetch from ftp://ftp.gnu.org/gnu/m4/m4-1.4.17.tar.gz\n######################################################################## 100.0%\n==> Staging archive: /home/ec2-user/spack/var/spack/stage/m4-1.4.17-oxe4a6liobrh6qz3j5awwpcohljdl2ja/m4-1.4.17.tar.gz\n==> Created stage in /home/ec2-user/spack/var/spack/stage/m4-1.4.17-oxe4a6liobrh6qz3j5awwpcohljdl2ja\n==> Applied patch pgi.patch\n==> Building m4\n==> Successfully installed m4\n  Fetch: 1.58s.  Build: 25.08s.  Total: 26.66s.\n[+] /home/ec2-user/spack/opt/spack/linux--x86_64/gcc-4.8.3/m4-1.4.17-oxe4a6liobrh6qz3j5awwpcohljdl2ja\n==> Warning: Dependency missing due to corrupt install directory:\n  /home/ec2-user/spack/opt/spack/linux--x86_64/gcc-4.8.3/m4-1.4.17-oxe4a6liobrh6qz3j5awwpcohljdl2ja\n  Specs m4@1.4.17%gcc@4.8.3+sigsegv arch=linux--x86_64^libsigsegv@2.10%gcc@4.8.3 arch=linux--x86_64 and m4@1.4.17%gcc@4.8.3+sigsegv arch=linux-None-x86_64^libsigsegv@2.10%gcc@4.8.3 arch=linux-None-x86_64 have the same SHA-1 prefix!\n==> Trying to fetch from file:///home/ec2-user/spack/var/spack/cache/gmp/gmp-6.1.1.tar.bz2\ncurl: (37) Couldn't open file /home/ec2-user/spack/var/spack/cache/gmp/gmp-6.1.1.tar.bz2\n==> Fetching from file:///home/ec2-user/spack/var/spack/cache/gmp/gmp-6.1.1.tar.bz2 failed.\n==> Trying to fetch from https://gmplib.org/download/gmp/gmp-6.1.1.tar.bz2\n######################################################################## 100.0%\n==> Staging archive: /home/ec2-user/spack/var/spack/stage/gmp-6.1.1-vxnivf7riwxn43pjftk74qoeyi7kfntg/gmp-6.1.1.tar.bz2\n==> Created stage in /home/ec2-user/spack/var/spack/stage/gmp-6.1.1-vxnivf7riwxn43pjftk74qoeyi7kfntg\n==> No patches needed for gmp\n==> Building gmp\n==> Error: Command exited with status 1:\n'./configure' '--prefix=/home/ec2-user/spack/opt/spack/linux--x86_64/gcc-4.8.3/gmp-6.1.1-vxnivf7riwxn43pjftk74qoeyi7kfntg' '--enable-cxx'\n\nSee build log for details:\n  /tmp/root/spack-stage/spack-stage-O_Vu6D/gmp-6.1.1/spack-build.out\n\n/home/ec2-user/spack/var/spack/repos/builtin/packages/gmp/package.py:44, in install:\n     42       def install(self, spec, prefix):\n     43           configure('--prefix={0}'.format(prefix),\n  >> 44                     '--enable-cxx')\n     45   \n     46           make()\n     47           make('check')\n     48           make('install')\n==> Error: Installation process had nonzero exit code : 256\n```\n",
    "user": "behlendorf",
    "url": "https://api.github.com/repos/spack/spack/issues/1899",
    "updated_at": "2017-11-22 08:47:07",
    "created_at": "2016-10-04 17:00:56",
    "closed_at": "2017-11-22 08:47:07",
    "state": "closed",
    "title": "gcc install failure: --enable-cxx",
    "number": 1899,
    "milestone": null,
    "labels": [
        "build-error"
    ],
    "id": 180949104,
    "html_url": "https://github.com/spack/spack/issues/1899",
    "assignees": [],
    "comments": 16
}