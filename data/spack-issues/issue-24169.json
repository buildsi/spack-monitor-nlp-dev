{
    "body": "This allows to 'preview' what test dependencies would  be installed by `spack install --test=all`.\r\n\r\nexample:\r\n\r\n```\r\n~/r/spack/lib/spack/spack (spec-I-test *)$ spack spec -t --test=root  -I flann\r\nInput spec\r\n--------------------------------\r\n -   [    ]  flann\r\n\r\nConcretized\r\n--------------------------------\r\nflann\r\n -   [    ]  flann@1.9.1%gcc@9.3.0+c~cuda~doc~examples+hdf5~ipo~matlab+mpi+openmp~python build_type=RelWithDebInfo patches=c50dedac4a9223c7353eb0b773da39b5b631ce7d3fd9e1f6e5f87eda6faf3fdb arch=linux-ubuntu20.04-skylake\r\n -   [bl  ]      ^boost@1.63.0%gcc@9.3.0+atomic+chrono+date_time~debug+filesystem~graph~icu+iostreams+locale+log+math+mpi+multithreaded+program_options+python+random+regex+serialization+shared+signals~singlethreaded+system~taggedlayout+test+thread+timer+wave arch=linux-ubuntu20.04-skylake\r\n[+]  [b   ]      ^cmake@3.12%gcc@9.3.0 arch=linux-ubuntu20.04-skylake\r\n -   [   t]      ^googletest@1.10.0%gcc@9.3.0~gmock~ipo+pthreads+shared build_type=RelWithDebInfo arch=linux-ubuntu20.04-skylake\r\n -   [bl t]      ^hdf5@2.3%gcc@9.3.0+mpi arch=linux-ubuntu20.04-skylake\r\n -   [bl  ]          ^openmpi@4.0.5%gcc@9.3.0~atomics~cuda~cxx~cxx_exceptions+gpfs~internal-hwloc~java~legacylaunchers~lustre~memchecker~pmi~singularity~sqlite3+static~thread_multiple+vt+wrapper-rpath fabrics=none patches=60ce20bc14d98c572ef7883b9fcd254c3f232c2f3a13377480f96466169ac4c8 schedulers=none arch=linux-ubuntu20.04-skylake\r\n -   [bl  ]              ^hwloc@2.4.1%gcc@9.3.0~cairo~cuda~gl~libudev+libxml2~netloc~nvml+pci+shared arch=linux-ubuntu20.04-skylake\r\n -   [bl  ]                  ^libpciaccess@0.16%gcc@9.3.0 arch=linux-ubuntu20.04-skylake\r\n -   [b   ]                      ^libtool@2.4.6%gcc@9.3.0 arch=linux-ubuntu20.04-skylake\r\n -   [b r ]                          ^m4@1.4.18%gcc@9.3.0+sigsegv patches=3877ab548f88597ab2327a2230ee048d2d07ace1062efe81fc92e91b7f39cd00,fc9b61654a3ba1a8d6cd78ce087e7c96366c290bc8d2c299f09828d793b853c8 arch=linux-ubuntu20.04-skylake\r\n -   [bl  ]                              ^libsigsegv@2.13%gcc@9.3.0 arch=linux-ubuntu20.04-skylake\r\n[+]  [b   ]                      ^pkgconf@1.7.4%gcc@9.3.0 arch=linux-ubuntu20.04-skylake\r\n -   [b   ]                      ^util-macros@1.19.1%gcc@9.3.0 arch=linux-ubuntu20.04-skylake\r\n -   [bl  ]                  ^libxml2@2.9.10%gcc@9.3.0~python arch=linux-ubuntu20.04-skylake\r\n -   [bl  ]                      ^libiconv@1.16%gcc@9.3.0 arch=linux-ubuntu20.04-skylake\r\n -   [bl  ]                      ^xz@5.2.5%gcc@9.3.0~pic libs=shared,static arch=linux-ubuntu20.04-skylake\r\n[+]  [bl  ]                      ^zlib@1.2.11%gcc@9.3.0+optimize+pic+shared arch=linux-ubuntu20.04-skylake\r\n -   [bl  ]                  ^ncurses@6.2%gcc@9.3.0~symlinks+termlib abi=none arch=linux-ubuntu20.04-skylake\r\n -   [bl  ]              ^libevent@2.1.12%gcc@9.3.0+openssl arch=linux-ubuntu20.04-skylake\r\n -   [bl  ]                  ^openssl@1.1.1f%gcc@9.3.0~docs+systemcerts arch=linux-ubuntu20.04-skylake\r\n -   [bl  ]              ^numactl@2.0.14%gcc@9.3.0 patches=4e1d78cbbb85de625bad28705e748856033eaafab92a66dffd383a3d7e00cc94,62fc8a8bf7665a60e8f4c93ebbd535647cebf74198f7afafec4c085a8825c006 arch=linux-ubuntu20.04-skylake\r\n -   [b   ]                  ^autoconf@2.69%gcc@9.3.0 arch=linux-ubuntu20.04-skylake\r\n -   [b r ]                      ^perl@5.30.0%gcc@9.3.0 arch=linux-ubuntu20.04-skylake\r\n -   [b   ]                  ^automake@1.16.3%gcc@9.3.0 arch=linux-ubuntu20.04-skylake\r\n -   [  r ]              ^openssh@8.5p1%gcc@9.3.0 arch=linux-ubuntu20.04-skylake\r\n -   [bl  ]                  ^libedit@3.1-20210216%gcc@9.3.0 arch=linux-ubuntu20.04-skylake\r\n\r\n```\r\n\r\nthe googletest dependency is not present without `--test`\r\n```\r\n~/r/spack/lib/spack/spack (spec-I-test)$ spack spec -t   -I flann\r\nInput spec\r\n--------------------------------\r\n -   [    ]  flann\r\n\r\nConcretized\r\n--------------------------------\r\n -   [    ]  flann@1.9.1%gcc@9.3.0+c~cuda~doc~examples+hdf5~ipo~matlab+mpi+openmp~python build_type=RelWithDebInfo patches=c50dedac4a9223c7353eb0b773da39b5b631ce7d3fd9e1f6e5f87eda6faf3fdb arch=linux-ubuntu20.04-skylake\r\n -   [bl  ]      ^boost@1.63.0%gcc@9.3.0+atomic+chrono+date_time~debug+filesystem~graph~icu+iostreams+locale+log+math+mpi+multithreaded+program_options+python+random+regex+serialization+shared+signals~singlethreaded+system~taggedlayout+test+thread+timer+wave arch=linux-ubuntu20.04-skylake\r\n[+]  [b   ]      ^cmake@3.12%gcc@9.3.0 arch=linux-ubuntu20.04-skylake\r\n -   [bl t]      ^hdf5@2.3%gcc@9.3.0+mpi arch=linux-ubuntu20.04-skylake\r\n -   [bl  ]          ^openmpi@4.0.5%gcc@9.3.0~atomics~cuda~cxx~cxx_exceptions+gpfs~internal-hwloc~java~legacylaunchers~lustre~memchecker~pmi~singularity~sqlite3+static~thread_multiple+vt+wrapper-rpath fabrics=none patches=60ce20bc14d98c572ef7883b9fcd254c3f232c2f3a13377480f96466169ac4c8 schedulers=none arch=linux-ubuntu20.04-skylake\r\n -   [bl  ]              ^hwloc@2.4.1%gcc@9.3.0~cairo~cuda~gl~libudev+libxml2~netloc~nvml+pci+shared arch=linux-ubuntu20.04-skylake\r\n -   [bl  ]                  ^libpciaccess@0.16%gcc@9.3.0 arch=linux-ubuntu20.04-skylake\r\n -   [b   ]                      ^libtool@2.4.6%gcc@9.3.0 arch=linux-ubuntu20.04-skylake\r\n -   [b r ]                          ^m4@1.4.18%gcc@9.3.0+sigsegv patches=3877ab548f88597ab2327a2230ee048d2d07ace1062efe81fc92e91b7f39cd00,fc9b61654a3ba1a8d6cd78ce087e7c96366c290bc8d2c299f09828d793b853c8 arch=linux-ubuntu20.04-skylake\r\n -   [bl  ]                              ^libsigsegv@2.13%gcc@9.3.0 arch=linux-ubuntu20.04-skylake\r\n[+]  [b   ]                      ^pkgconf@1.7.4%gcc@9.3.0 arch=linux-ubuntu20.04-skylake\r\n -   [b   ]                      ^util-macros@1.19.1%gcc@9.3.0 arch=linux-ubuntu20.04-skylake\r\n -   [bl  ]                  ^libxml2@2.9.10%gcc@9.3.0~python arch=linux-ubuntu20.04-skylake\r\n -   [bl  ]                      ^libiconv@1.16%gcc@9.3.0 arch=linux-ubuntu20.04-skylake\r\n -   [bl  ]                      ^xz@5.2.5%gcc@9.3.0~pic libs=shared,static arch=linux-ubuntu20.04-skylake\r\n[+]  [bl  ]                      ^zlib@1.2.11%gcc@9.3.0+optimize+pic+shared arch=linux-ubuntu20.04-skylake\r\n -   [bl  ]                  ^ncurses@6.2%gcc@9.3.0~symlinks+termlib abi=none arch=linux-ubuntu20.04-skylake\r\n -   [bl  ]              ^libevent@2.1.12%gcc@9.3.0+openssl arch=linux-ubuntu20.04-skylake\r\n -   [bl  ]                  ^openssl@1.1.1f%gcc@9.3.0~docs+systemcerts arch=linux-ubuntu20.04-skylake\r\n -   [bl  ]              ^numactl@2.0.14%gcc@9.3.0 patches=4e1d78cbbb85de625bad28705e748856033eaafab92a66dffd383a3d7e00cc94,62fc8a8bf7665a60e8f4c93ebbd535647cebf74198f7afafec4c085a8825c006 arch=linux-ubuntu20.04-skylake\r\n -   [b   ]                  ^autoconf@2.69%gcc@9.3.0 arch=linux-ubuntu20.04-skylake\r\n -   [b r ]                      ^perl@5.30.0%gcc@9.3.0 arch=linux-ubuntu20.04-skylake\r\n -   [b   ]                  ^automake@1.16.3%gcc@9.3.0 arch=linux-ubuntu20.04-skylake\r\n -   [  r ]              ^openssh@8.5p1%gcc@9.3.0 arch=linux-ubuntu20.04-skylake\r\n -   [bl  ]                  ^libedit@3.1-20210216%gcc@9.3.0 arch=linux-ubuntu20.04-skylake\r\n```",
    "user": "vvolkl",
    "url": "https://api.github.com/repos/spack/spack/issues/24169",
    "updated_at": "2021-06-11 08:59:18",
    "created_at": "2021-06-06 12:21:37",
    "closed_at": "None",
    "state": "open",
    "title": "[cmd.spec] add tests command line  argument similar to `spack install`",
    "number": 24169,
    "milestone": null,
    "labels": [
        "concretization",
        "commands"
    ],
    "id": 912810346,
    "html_url": "https://github.com/spack/spack/pull/24169",
    "assignees": [
        "haampie",
        "alalazo"
    ],
    "comments": 2
}