{
    "body": "### Steps to reproduce the issue\r\n\r\n`strumpack@5.1.1 +rocm ~slate amdgpu_target=gfx906` fails to build using:\r\n* `spack@develop` (44e251d9747c5369c53d330cad4dd524a959baab from `Sun Aug 15 08:40:24 2021 -0700`)\r\n* Ubuntu 20.04, GCC 9.3.0\r\n* Ubuntu 18.04, GCC 7.5.0\r\n* RHEL 7, GCC 9.3.0\r\n* RHEL 8, GCC 8.4.1\r\n\r\nConcrete spec: [strumpack.spec.yaml.txt](https://github.com/spack/spack/files/6988729/strumpack.spec.yaml.txt)\r\n\r\nReproduced here using Docker container image `ecpe4s/ubuntu20.04-runner-x86_64:2021-07-01`\r\n\r\n```\r\n$> spack mirror add E4S https://cache.e4s.io\r\n$> spack buildcache keys -it\r\n\r\n$> spack install --cache-only --include-build-deps --only dependencies -f ./strumpack.spec.yaml\r\nOK\r\n\r\n$> spack install --no-cache -f ./strumpack.spec.yaml\r\n...\r\n==> Installing strumpack-5.1.1-wt6gmzv55hk5wwyy7isum4gb472pud6f\r\n==> Fetching https://mirror.spack.io/_source-cache/archive/6c/6cf4eaae5beb9bd377f2abce9e4da9fd3e95bf086ae2f04554fad6dd561c28b9.tar.gz\r\n==> Applied patch /spack/var/spack/repos/builtin/packages/strumpack/shared-rocm.patch\r\n==> strumpack: Executing phase: 'cmake'\r\n==> strumpack: Executing phase: 'build'\r\n==> Error: ProcessError: Command exited with status 2:\r\n    'make' '-j16'\r\n\r\n3 errors found in build log:\r\n     380    /spack/lib/spack/env/gcc/g++ -D__HIP_PLATFORM_AMD__=1 -D__HIP_PLATFORM_HCC__=1 -Dstrumpack_EXPORTS -I/tmp/root/spack-stage/spack-stage-strumpack-5.1.1-wt6gmzv55hk5wwyy7isum4\r\n            gb472pud6f/spack-src/src -I/tmp/root/spack-stage/spack-stage-strumpack-5.1.1-wt6gmzv55hk5wwyy7isum4gb472pud6f/spack-build-wt6gmzv -isystem /spack/opt/spack/linux-ubuntu20.04\r\n            -x86_64/gcc-9.3.0/mpich-3.4.2-z3qvcplqpvri2tliohtqp7ei2lnvqsf3/include -isystem /spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/parmetis-4.0.3-chueyyeu7ux2de7fdj73xk6ej3\r\n            2c7dow/include -isystem /spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/metis-5.1.0-lxkd2thzi5xc5z3aqvw4eodot57r53y5/include -isystem /spack/opt/spack/linux-ubuntu20.04-\r\n            x86_64/gcc-9.3.0/zfp-0.5.5-bu5zrporgont6p2ppehprhd3j7w22uxt/include -isystem /spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/butterflypack-1.2.1-wytahxfqtqycwq7llrynumsc\r\n            w3pahxtk/include -isystem /spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/hipblas-4.3.0-fjnybe3wp7uvkxncenqukrod2i75o2cx/include -isystem /spack/opt/spack/linux-ubuntu20\r\n            .04-x86_64/gcc-9.3.0/rocblas-4.3.0-mulja4mefjgnn5cct7oufj7vglzndtfc/include -isystem /spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/hip-4.3.0-k7ynx5px4rl2gxt4ozuhkxctdo\r\n            2wx5oj/include -isystem /spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/hsa-rocr-dev-4.3.0-fh2odlqadtmp6apu72ewpnwdszea5mz2/include -isystem /spack/opt/spack/linux-ubunt\r\n            u20.04-x86_64/gcc-9.3.0/rocsolver-4.3.0-azxlqckh45jl45wiprwmthlexucestum/include -O2 -g -DNDEBUG -fPIC -Wall -Wno-overloaded-virtual -fopenmp -MD -MT CMakeFiles/strumpack.di\r\n            r/src/BLR/BLRExtendAdd.cpp.o -MF CMakeFiles/strumpack.dir/src/BLR/BLRExtendAdd.cpp.o.d -o CMakeFiles/strumpack.dir/src/BLR/BLRExtendAdd.cpp.o -c /tmp/root/spack-stage/spack-\r\n            stage-strumpack-5.1.1-wt6gmzv55hk5wwyy7isum4gb472pud6f/spack-src/src/BLR/BLRExtendAdd.cpp\r\n     381    /spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/cmake-3.20.5-zyz2eldbrcih3f6l37dyvdxmyoiyvhv5/bin/cmake -E cmake_copy_f90_mod strumpack.mod CMakeFiles/strumpack.dir/stru\r\n            mpack.mod.stamp GNU\r\n     382    /spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/cmake-3.20.5-zyz2eldbrcih3f6l37dyvdxmyoiyvhv5/bin/cmake -E touch CMakeFiles/strumpack.dir/src/fortran/strumpack.f90.o.pro\r\n            vides.build\r\n     383    [100%] Linking CXX shared library libstrumpack.so\r\n     384    /spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/cmake-3.20.5-zyz2eldbrcih3f6l37dyvdxmyoiyvhv5/bin/cmake -E cmake_link_script CMakeFiles/strumpack.dir/link.txt --verbose=\r\n            1\r\n     385    /spack/lib/spack/env/gcc/g++ -fPIC -O2 -g -DNDEBUG -Wl,-rpath -Wl,/spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/mpich-3.4.2-z3qvcplqpvri2tliohtqp7ei2lnvqsf3/lib -L/spa\r\n            ck/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/hwloc-2.4.1-eeigvjc57oehl37canx4h5lfganpvdq2/lib -shared -Wl,-soname,libstrumpack.so -o libstrumpack.so CMakeFiles/strumpack.\r\n            dir/src/StrumpackParameters.cpp.o CMakeFiles/strumpack.dir/src/StrumpackOptions.cpp.o CMakeFiles/strumpack.dir/src/SparseSolverBase.cpp.o CMakeFiles/strumpack.dir/src/Sparse\r\n            Solver.cpp.o CMakeFiles/strumpack.dir/src/SparseSolverMixedPrecision.cpp.o CMakeFiles/strumpack.dir/src/StrumpackSparseSolverC.cpp.o CMakeFiles/strumpack.dir/src/SparseSolve\r\n            rMPIDist.cpp.o CMakeFiles/strumpack.dir/src/SparseSolverMixedPrecisionMPIDist.cpp.o CMakeFiles/strumpack.dir/src/misc/TaskTimer.cpp.o CMakeFiles/strumpack.dir/src/misc/Tripl\r\n            et.cpp.o CMakeFiles/strumpack.dir/src/sparse/strumpack_mc64ad.c.o CMakeFiles/strumpack.dir/src/sparse/CompressedSparseMatrix.cpp.o CMakeFiles/strumpack.dir/src/sparse/CSRGra\r\n            ph.cpp.o CMakeFiles/strumpack.dir/src/sparse/CSRMatrix.cpp.o CMakeFiles/strumpack.dir/src/sparse/EliminationTree.cpp.o CMakeFiles/strumpack.dir/src/sparse/SeparatorTree.cpp.\r\n            o CMakeFiles/strumpack.dir/src/sparse/CSRMatrixMPI.cpp.o CMakeFiles/strumpack.dir/src/sparse/EliminationTreeMPI.cpp.o CMakeFiles/strumpack.dir/src/sparse/EliminationTreeMPID\r\n            ist.cpp.o CMakeFiles/strumpack.dir/src/sparse/PropMapSparseMatrix.cpp.o CMakeFiles/strumpack.dir/src/sparse/iterative/BiCGStab.cpp.o CMakeFiles/strumpack.dir/src/sparse/iter\r\n            ative/GMRes.cpp.o CMakeFiles/strumpack.dir/src/sparse/iterative/IterativeRefinement.cpp.o CMakeFiles/strumpack.dir/src/sparse/iterative/GMResMPI.cpp.o CMakeFiles/strumpack.d\r\n            ir/src/sparse/iterative/BiCGStabMPI.cpp.o CMakeFiles/strumpack.dir/src/sparse/iterative/IterativeRefinementMPI.cpp.o CMakeFiles/strumpack.dir/src/sparse/fronts/FrontFactory.\r\n            cpp.o CMakeFiles/strumpack.dir/src/sparse/fronts/FrontalMatrix.cpp.o CMakeFiles/strumpack.dir/src/sparse/fronts/FrontalMatrixDense.cpp.o CMakeFiles/strumpack.dir/src/sparse/\r\n            fronts/FrontalMatrixHSS.cpp.o CMakeFiles/strumpack.dir/src/sparse/fronts/FrontalMatrixMPI.cpp.o CMakeFiles/strumpack.dir/src/sparse/fronts/FrontalMatrixDenseMPI.cpp.o CMakeF\r\n            iles/strumpack.dir/src/sparse/fronts/FrontalMatrixHSSMPI.cpp.o CMakeFiles/strumpack.dir/src/sparse/fronts/FrontalMatrixBLRMPI.cpp.o CMakeFiles/strumpack.dir/src/sparse/front\r\n            s/ExtendAdd.cpp.o CMakeFiles/strumpack.dir/src/sparse/fronts/FrontalMatrixGPU.cpp.o CMakeFiles/strumpack.dir/src/sparse/fronts/FrontalMatrixLossy.cpp.o CMakeFiles/strumpack.\r\n            dir/src/sparse/fronts/FrontalMatrixHODLR.cpp.o CMakeFiles/strumpack.dir/src/sparse/fronts/FrontalMatrixHODLRMPI.cpp.o CMakeFiles/strumpack.dir/src/sparse/ordering/GeometricR\r\n            eordering.cpp.o CMakeFiles/strumpack.dir/src/sparse/ordering/MatrixReordering.cpp.o CMakeFiles/strumpack.dir/src/sparse/ordering/GeometricReorderingMPI.cpp.o CMakeFiles/stru\r\n            mpack.dir/src/sparse/ordering/MatrixReorderingMPI.cpp.o CMakeFiles/strumpack.dir/src/sparse/ordering/rcm/degree.f.o CMakeFiles/strumpack.dir/src/sparse/ordering/rcm/fnroot.f\r\n            .o CMakeFiles/strumpack.dir/src/sparse/ordering/rcm/genrcm.f.o CMakeFiles/strumpack.dir/src/sparse/ordering/rcm/rcm.f.o CMakeFiles/strumpack.dir/src/sparse/ordering/rcm/root\r\n            ls.f.o CMakeFiles/strumpack.dir/src/sparse/MUMPS/ana_orderings.F.o CMakeFiles/strumpack.dir/src/kernel/Kernel.cpp.o CMakeFiles/strumpack.dir/src/clustering/PCAPartitioning.c\r\n            pp.o CMakeFiles/strumpack.dir/src/clustering/CobblePartitioning.cpp.o CMakeFiles/strumpack.dir/src/clustering/KMeans.cpp.o CMakeFiles/strumpack.dir/src/clustering/KDTree.cpp\r\n            .o CMakeFiles/strumpack.dir/src/clustering/NeighborSearch.cpp.o CMakeFiles/strumpack.dir/src/dense/BLASLAPACKWrapper.cpp.o CMakeFiles/strumpack.dir/src/dense/BLASLAPACKOpenM\r\n            PTask.cpp.o CMakeFiles/strumpack.dir/src/dense/ACA.cpp.o CMakeFiles/strumpack.dir/src/dense/BACA.cpp.o CMakeFiles/strumpack.dir/src/dense/DenseMatrix.cpp.o CMakeFiles/strump\r\n            ack.dir/src/dense/ScaLAPACKWrapper.cpp.o CMakeFiles/strumpack.dir/src/dense/DistributedMatrix.cpp.o CMakeFiles/strumpack.dir/src/dense/HIPWrapper.cpp.o CMakeFiles/strumpack.\r\n            dir/src/dense/lapack/sgeqp3tol.f.o CMakeFiles/strumpack.dir/src/dense/lapack/dgeqp3tol.f.o CMakeFiles/strumpack.dir/src/dense/lapack/cgeqp3tol.f.o CMakeFiles/strumpack.dir/s\r\n            rc/dense/lapack/zgeqp3tol.f.o CMakeFiles/strumpack.dir/src/dense/lapack/sgeqrfmod.f.o CMakeFiles/strumpack.dir/src/dense/lapack/dgeqrfmod.f.o CMakeFiles/strumpack.dir/src/de\r\n            nse/lapack/cgeqrfmod.f.o CMakeFiles/strumpack.dir/src/dense/lapack/zgeqrfmod.f.o CMakeFiles/strumpack.dir/src/dense/lapack/sgeqr2mod.f.o CMakeFiles/strumpack.dir/src/dense/l\r\n            apack/dgeqr2mod.f.o CMakeFiles/strumpack.dir/src/dense/lapack/cgeqr2mod.f.o CMakeFiles/strumpack.dir/src/dense/lapack/zgeqr2mod.f.o CMakeFiles/strumpack.dir/src/dense/lapack\r\n            /slaqpsmod.f.o CMakeFiles/strumpack.dir/src/dense/lapack/dlaqpsmod.f.o CMakeFiles/strumpack.dir/src/dense/lapack/claqpsmod.f.o CMakeFiles/strumpack.dir/src/dense/lapack/zlaq\r\n            psmod.f.o CMakeFiles/strumpack.dir/src/dense/lapack/slaqp2mod.f.o CMakeFiles/strumpack.dir/src/dense/lapack/dlaqp2mod.f.o CMakeFiles/strumpack.dir/src/dense/lapack/claqp2mod\r\n            .f.o CMakeFiles/strumpack.dir/src/dense/lapack/zlaqp2mod.f.o CMakeFiles/strumpack.dir/src/dense/lapack/sgetrfmod.f.o CMakeFiles/strumpack.dir/src/dense/lapack/dgetrfmod.f.o\r\n            CMakeFiles/strumpack.dir/src/dense/lapack/cgetrfmod.f.o CMakeFiles/strumpack.dir/src/dense/lapack/zgetrfmod.f.o CMakeFiles/strumpack.dir/src/dense/lapack/sgetf2mod.f.o CMake\r\n            Files/strumpack.dir/src/dense/lapack/dgetf2mod.f.o CMakeFiles/strumpack.dir/src/dense/lapack/cgetf2mod.f.o CMakeFiles/strumpack.dir/src/dense/lapack/zgetf2mod.f.o CMakeFiles\r\n            /strumpack.dir/src/dense/lapack/sorglqmod.f.o CMakeFiles/strumpack.dir/src/dense/lapack/dorglqmod.f.o CMakeFiles/strumpack.dir/src/dense/lapack/cunglqmod.f.o CMakeFiles/stru\r\n            mpack.dir/src/dense/lapack/zunglqmod.f.o CMakeFiles/strumpack.dir/src/dense/lapack/sorgl2mod.f.o CMakeFiles/strumpack.dir/src/dense/lapack/dorgl2mod.f.o CMakeFiles/strumpack\r\n            .dir/src/dense/lapack/cungl2mod.f.o CMakeFiles/strumpack.dir/src/dense/lapack/zungl2mod.f.o CMakeFiles/strumpack.dir/src/dense/lapack/slarfbmod.f.o CMakeFiles/strumpack.dir/\r\n            src/dense/lapack/dlarfbmod.f.o CMakeFiles/strumpack.dir/src/dense/lapack/clarfbmod.f.o CMakeFiles/strumpack.dir/src/dense/lapack/zlarfbmod.f.o CMakeFiles/strumpack.dir/src/d\r\n            ense/lapack/slarftmod.f.o CMakeFiles/strumpack.dir/src/dense/lapack/dlarftmod.f.o CMakeFiles/strumpack.dir/src/dense/lapack/clarftmod.f.o CMakeFiles/strumpack.dir/src/dense/\r\n            lapack/zlarftmod.f.o CMakeFiles/strumpack.dir/src/dense/lapack/slarfmod.f.o CMakeFiles/strumpack.dir/src/dense/lapack/dlarfmod.f.o CMakeFiles/strumpack.dir/src/dense/lapack/\r\n            clarfmod.f.o CMakeFiles/strumpack.dir/src/dense/lapack/zlarfmod.f.o CMakeFiles/strumpack.dir/src/dense/lapack/sgelqfmod.f.o CMakeFiles/strumpack.dir/src/dense/lapack/dgelqfm\r\n            od.f.o CMakeFiles/strumpack.dir/src/dense/lapack/cgelqfmod.f.o CMakeFiles/strumpack.dir/src/dense/lapack/zgelqfmod.f.o CMakeFiles/strumpack.dir/src/dense/lapack/sgelq2mod.f.\r\n            o CMakeFiles/strumpack.dir/src/dense/lapack/dgelq2mod.f.o CMakeFiles/strumpack.dir/src/dense/lapack/cgelq2mod.f.o CMakeFiles/strumpack.dir/src/dense/lapack/zgelq2mod.f.o CMa\r\n            keFiles/strumpack.dir/src/dense/lapack/pcgeqpftol.f.o CMakeFiles/strumpack.dir/src/dense/lapack/pdgeqpftol.f.o CMakeFiles/strumpack.dir/src/dense/lapack/psgeqpftol.f.o CMake\r\n            Files/strumpack.dir/src/dense/lapack/pzgeqpftol.f.o CMakeFiles/strumpack.dir/src/HSS/HSSMatrixBase.cpp.o CMakeFiles/strumpack.dir/src/HSS/HSSMatrix.cpp.o CMakeFiles/strumpac\r\n            k.dir/src/HSS/HSSOptions.cpp.o CMakeFiles/strumpack.dir/src/HSS/HSSMatrixMPI.cpp.o CMakeFiles/strumpack.dir/src/HODLR/HODLROptions.cpp.o CMakeFiles/strumpack.dir/src/HODLR/H\r\n            ODLRMatrix.cpp.o CMakeFiles/strumpack.dir/src/HODLR/ButterflyMatrix.cpp.o CMakeFiles/strumpack.dir/src/HODLR/HODLRWrapper.cpp.o CMakeFiles/strumpack.dir/src/BLR/BLRMatrix.cp\r\n            p.o CMakeFiles/strumpack.dir/src/BLR/BLROptions.cpp.o CMakeFiles/strumpack.dir/src/BLR/DenseTile.cpp.o CMakeFiles/strumpack.dir/src/BLR/LRTile.cpp.o CMakeFiles/strumpack.dir\r\n            /src/BLR/BLRMatrixMPI.cpp.o CMakeFiles/strumpack.dir/src/BLR/BLRExtendAdd.cpp.o CMakeFiles/strumpack.dir/src/fortran/strumpack.f90.o CMakeFiles/strumpack.dir/src/sparse/fron\r\n            ts/strumpack_generated_FrontalMatrixHIP.hip.cpp.o  -Wl,-rpath,/spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/netlib-scalapack-2.1.0-znc4lfcpzhovluccban2wqcp3bwwbeqo/lib\r\n            :/spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/openblas-0.3.17-q42qd65ugkxmj6jsvjm6kng4dbylxp32/lib:/spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/zfp-0.5.5-bu5zr\r\n            porgont6p2ppehprhd3j7w22uxt/lib:/spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/butterflypack-1.2.1-wytahxfqtqycwq7llrynumscw3pahxtk/lib:/spack/opt/spack/linux-ubuntu20.\r\n            04-x86_64/gcc-9.3.0/mpich-3.4.2-z3qvcplqpvri2tliohtqp7ei2lnvqsf3/lib:/spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/hipblas-4.3.0-fjnybe3wp7uvkxncenqukrod2i75o2cx/hipbl\r\n            as/lib:/spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/rocsolver-4.3.0-azxlqckh45jl45wiprwmthlexucestum/rocsolver/lib:/spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0\r\n            /metis-5.1.0-lxkd2thzi5xc5z3aqvw4eodot57r53y5/lib:/spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/parmetis-4.0.3-chueyyeu7ux2de7fdj73xk6ej32c7dow/lib:/spack/opt/spack/li\r\n            nux-ubuntu20.04-x86_64/gcc-9.3.0/arpack-ng-3.8.0-2weruckz4ykq55veyk7jj2dyp6jqrxko/lib:/spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/rocblas-4.3.0-mulja4mefjgnn5cct7ouf\r\n            j7vglzndtfc/rocblas/lib:/spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/hip-4.3.0-k7ynx5px4rl2gxt4ozuhkxctdo2wx5oj/lib:/spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.\r\n            0/hsa-rocr-dev-4.3.0-fh2odlqadtmp6apu72ewpnwdszea5mz2/lib::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::\r\n            :::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::\r\n            :::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::\r\n            :::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::\r\n            :::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::\r\n            :::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::\r\n            :::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::\r\n            :::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::\r\n            :::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::\r\n            :::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::\r\n            :::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::\r\n            :::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::\r\n            :::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::\r\n            :::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::\r\n            :::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::\r\n            :::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::\r\n            :::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::\r\n            :::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::\r\n            :::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::\r\n            :::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::\r\n            :::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::: /spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/netlib-scalapack-2.1.0-znc4l\r\n            fcpzhovluccban2wqcp3bwwbeqo/lib/libscalapack.so /spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/openblas-0.3.17-q42qd65ugkxmj6jsvjm6kng4dbylxp32/lib/libopenblas.so /spac\r\n            k/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/openblas-0.3.17-q42qd65ugkxmj6jsvjm6kng4dbylxp32/lib/libopenblas.so /spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/zfp-0.\r\n            5.5-bu5zrporgont6p2ppehprhd3j7w22uxt/lib/libzfp.so.0.5.5 /spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/butterflypack-1.2.1-wytahxfqtqycwq7llrynumscw3pahxtk/lib/libdbut\r\n            terflypack.so.1.2.0 /spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/butterflypack-1.2.1-wytahxfqtqycwq7llrynumscw3pahxtk/lib/libzbutterflypack.so.1.2.0 /spack/opt/spack/\r\n            linux-ubuntu20.04-x86_64/gcc-9.3.0/mpich-3.4.2-z3qvcplqpvri2tliohtqp7ei2lnvqsf3/lib/libmpifort.so /spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/mpich-3.4.2-z3qvcplqpvr\r\n            i2tliohtqp7ei2lnvqsf3/lib/libmpi.so /spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/hipblas-4.3.0-fjnybe3wp7uvkxncenqukrod2i75o2cx/hipblas/lib/libhipblas.so.0.1 /spack/o\r\n            pt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/rocsolver-4.3.0-azxlqckh45jl45wiprwmthlexucestum/rocsolver/lib/librocsolver.so.0.1 /spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-\r\n            9.3.0/mpich-3.4.2-z3qvcplqpvri2tliohtqp7ei2lnvqsf3/lib/libmpicxx.so /usr/lib/gcc/x86_64-linux-gnu/9/libgomp.so /usr/lib/x86_64-linux-gnu/libpthread.so /spack/opt/spack/linux\r\n            -ubuntu20.04-x86_64/gcc-9.3.0/mpich-3.4.2-z3qvcplqpvri2tliohtqp7ei2lnvqsf3/lib/libmpi.so /spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/metis-5.1.0-lxkd2thzi5xc5z3aqvw4\r\n            eodot57r53y5/lib/libmetis.so /spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/parmetis-4.0.3-chueyyeu7ux2de7fdj73xk6ej32c7dow/lib/libparmetis.so /spack/opt/spack/linux-ub\r\n            untu20.04-x86_64/gcc-9.3.0/netlib-scalapack-2.1.0-znc4lfcpzhovluccban2wqcp3bwwbeqo/lib/libscalapack.so /spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/openblas-0.3.17-q4\r\n            2qd65ugkxmj6jsvjm6kng4dbylxp32/lib/libopenblas.so /spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/arpack-ng-3.8.0-2weruckz4ykq55veyk7jj2dyp6jqrxko/lib/libparpack.so /spa\r\n            ck/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/arpack-ng-3.8.0-2weruckz4ykq55veyk7jj2dyp6jqrxko/lib/libarpack.so -lm /spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/roc\r\n            blas-4.3.0-mulja4mefjgnn5cct7oufj7vglzndtfc/rocblas/lib/librocblas.so.0.1 /spack/opt/spack/linux-ubuntu20.04-x86_64/gcc-9.3.0/hip-4.3.0-k7ynx5px4rl2gxt4ozuhkxctdo2wx5oj/lib/\r\n            libamdhip64.so.4.3.21324- -L\"HIP_CLANG_INCLUDE_PATH-NOTFOUND/../lib/linux\" -lclang_rt.builtins-x86_64 -lgfortran -lquadmath -Wl,-rpath-link,/spack/opt/spack/linux-ubuntu20.0\r\n            4-x86_64/gcc-9.3.0/hsa-rocr-dev-4.3.0-fh2odlqadtmp6apu72ewpnwdszea5mz2/lib\r\n  >> 386    g++: error: -E or -x required when input is from standard input\r\n  >> 387    make[2]: *** [CMakeFiles/strumpack.dir/build.make:2256: libstrumpack.so] Error 1\r\n     388    make[2]: Leaving directory '/tmp/root/spack-stage/spack-stage-strumpack-5.1.1-wt6gmzv55hk5wwyy7isum4gb472pud6f/spack-build-wt6gmzv'\r\n  >> 389    make[1]: *** [CMakeFiles/Makefile2:962: CMakeFiles/strumpack.dir/all] Error 2\r\n     390    make[1]: Leaving directory '/tmp/root/spack-stage/spack-stage-strumpack-5.1.1-wt6gmzv55hk5wwyy7isum4gb472pud6f/spack-build-wt6gmzv'\r\n     391    make: *** [Makefile:149: all] Error 2\r\n```\r\n\r\n### Information on your system\r\n\r\n* **Spack:** 0.16.2-3913-44e251d974\r\n* **Python:** 3.8.5\r\n* **Platform:** linux-ubuntu20.04-cascadelake\r\n* **Concretizer:** original\r\n\r\n### Additional information\r\n\r\nBuild log: [strumpack-build-out.txt](https://github.com/spack/spack/files/6988745/strumpack-build-out.txt)\r\n\r\n@pghysels @balay \r\n\r\n### General information\r\n\r\n- [X] I have run `spack debug report` and reported the version of Spack/Python/Platform\r\n- [X] I have run `spack maintainers <name-of-the-package>` and **@mentioned** any maintainers\r\n- [X] I have uploaded the build log and environment files\r\n- [X] I have searched the issues of this repo and believe this is not a duplicate",
    "user": "eugeneswalker",
    "url": "https://api.github.com/repos/spack/spack/issues/25433",
    "updated_at": "2021-09-10 19:13:01",
    "created_at": "2021-08-15 19:20:38",
    "closed_at": "2021-09-10 19:01:19",
    "state": "closed",
    "title": "strumpack@5.1.1 +rocm build fails: g++: -E or -x required when input is from standard input",
    "number": 25433,
    "milestone": null,
    "labels": [
        "build-error",
        "ecp",
        "e4s"
    ],
    "id": 971205444,
    "html_url": "https://github.com/spack/spack/issues/25433",
    "assignees": [
        "srekolam"
    ],
    "comments": 11
}