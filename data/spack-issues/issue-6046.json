{
    "body": "Some compilers do not link with -lm [or equivalent] by default. And some packaged do not deal with this in their build tools.\r\n\r\nDoes spack provide a mechanism to specify a dependency on -lm or equivalent library?\r\n\r\n[for eg: gcc on fedora 27 requires -lm. And one should not use -lm with intel compilers - as intel provides -limf - which intel compilers link with by default]\r\n\r\nThe issue arises with 'plasma' package.\r\n\r\n```\r\n     11033 /usr/lib64/ccache/gcc -fopenmp -fPIC -o test/test test/test_zunmlq.o test/test_zsymm.o test/test_zgetri.o test/test_zpotrs.o test/test_zpotri.o test/test_zlansy.o test/test_zlacpy.o test/test_zgeqrf.o test/test_zgelqs.o test/test_dzamax.o test/test_zgetri_aux.o test/test_zpotrf.o test/test_zsyr2k.o test/test_zgesv.o test/test_ztrtri.o test/test_zsyrk.o test/test_zposv.o test/test_zlange.o test/test_zher2k.o test/test_ztrmm.o test/test_zlantr.o test/test_ztradd.o test/test_zhemm.o test/test_zgemm.o test/test_ztrsm.o test/test_zgeadd.o test/test_zherk.o test/test_zlauum.o test/test_zgels.o test/test_zcposv.o test/test_zgetrs.o test/test_zlag2c.o test/test_zgbtrf.o test/test_zpbsv.o test/test_zgbsv.o test/test_zgeqrs.o test/test_zpbtrf.o test/test_zlascl.o test/test_zlaswp.o test/test_zgetrf.o test/test_zlaset.o test/test_clag2z.o test/test_zgelqf.o test/test_zunmqr.o test/test_zlanhe.o test/test_zcgesv.o test/test.o test/test_sormlq.o test/test_dormlq.o test/test_cunmlq.o test/test_ssymm.o test/test_dsymm.o test/test_csymm.o test/test_cgetri.o test/test_dgetri.o test/test_sgetri.o test/test_spotrs.o test/test_dpotrs.o test/test_cpotrs.o test/test_cpotri.o test/test_dpotri.o test/test_spotri.o test/test_slansy.o test/test_dlansy.o test/test_clansy.o test/test_slacpy.o test/test_dlacpy.o test/test_clacpy.o test/test_sgeqrf.o test/test_dgeqrf.o test/test_cgeqrf.o test/test_sgelqs.o test/test_dgelqs.o test/test_cgelqs.o test/test_samax.o test/test_damax.o test/test_scamax.o test/test_cgetri_aux.o test/test_dgetri_aux.o test/test_sgetri_aux.o test/test_spotrf.o test/test_dpotrf.o test/test_cpotrf.o test/test_csyr2k.o test/test_dsyr2k.o test/test_ssyr2k.o test/test_sgesv.o test/test_dgesv.o test/test_cgesv.o test/test_ctrtri.o test/test_dtrtri.o test/test_strtri.o test/test_ssyrk.o test/test_dsyrk.o test/test_csyrk.o test/test_sposv.o test/test_dposv.o test/test_cposv.o test/test_slange.o test/test_dlange.o test/test_clange.o test/test_cher2k.o test/test_ctrmm.o test/test_dtrmm.o test/test_strmm.o test/test_slantr.o test/test_dlantr.o test/test_clantr.o test/test_stradd.o test/test_dtradd.o test/test_ctradd.o test/test_chemm.o test/test_sgemm.o test/test_dgemm.o test/test_cgemm.o test/test_ctrsm.o test/test_dtrsm.o test/test_strsm.o test/test_sgeadd.o test/test_dgeadd.o test/test_cgeadd.o test/test_cherk.o test/test_clauum.o test/test_dlauum.o test/test_slauum.o test/test_sgels.o test/test_dgels.o test/test_cgels.o test/test_dsposv.o test/test_sgetrs.o test/test_dgetrs.o test/test_cgetrs.o test/test_dlag2s.o test/test_sgbtrf.o test/test_dgbtrf.o test/test_cgbtrf.o test/test_spbsv.o test/test_dpbsv.o test/test_cpbsv.o test/test_sgbsv.o test/test_dgbsv.o test/test_cgbsv.o test/test_sgeqrs.o test/test_dgeqrs.o test/test_cgeqrs.o test/test_spbtrf.o test/test_dpbtrf.o test/test_cpbtrf.o test/test_slascl.o test/test_dlascl.o test/test_clascl.o test/test_slaswp.o test/test_dlaswp.o test/test_claswp.o test/test_sgetrf.o test/test_dgetrf.o test/test_cgetrf.o test/test_slaset.o test/test_dlaset.o test/test_claset.o test/test_slag2d.o test/test_sgelqf.o test/test_dgelqf.o test/test_cgelqf.o test/test_sormqr.o test/test_dormqr.o test/test_cunmqr.o test/test_clanhe.o test/test_dsgesv.o -Llib -lplasma -lcoreblas -L/home/balay/git-repo/github/spack/opt/spack/linux-fedora27-x86_64/gcc-7/openblas-0.2.20-swt4jmol62yynopza2oxu5ofl44dc5xt/lib -lopenblas\r\n  >> 11034 /usr/bin/ld: test/test_zsymm.o: undefined reference to symbol 'cabs@@GLIBC_2.2.5'\r\n  >> 11035 //usr/lib64/libm.so.6: error adding symbols: DSO missing from command line\r\n  >> 11036 collect2: error: ld returned 1 exit status\r\n\r\n```\r\n@luszczek @tgamblin ",
    "user": "balay",
    "url": "https://api.github.com/repos/spack/spack/issues/6046",
    "updated_at": "2020-09-20 02:29:37",
    "created_at": "2017-10-30 21:24:06",
    "closed_at": "None",
    "state": "open",
    "title": "is it possible to add dependency on -lm [or equivalent] in spack package dependencies?",
    "number": 6046,
    "milestone": null,
    "labels": [
        "xSDK",
        "help wanted"
    ],
    "id": 269759241,
    "html_url": "https://github.com/spack/spack/issues/6046",
    "assignees": [],
    "comments": 5
}