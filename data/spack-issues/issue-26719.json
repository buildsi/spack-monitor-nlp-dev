{
    "body": "Generating legible error messages from the new clingo concretizer has proven challenging, in part because the unsatisfiable cores returned from clingo solves are not minimal and cannot be minimized with reasonable performance so far.\r\n\r\nThis PR adds error message sentinels to the solve, attached to the rules that could fail a solve. The unsat core is then restricted to these messages, which makes the minimization problem tractable. Errors that can only be generated by a bug in the logic program or generating code are prefaced with `Internal error` to make clear to users that something has gone wrong on the Spack side of things.\r\n\r\nExamples:\r\n```\r\n$ spack spec hdf5 ^mpich ^openmpi\r\nInput spec\r\n--------------------------------\r\nhdf5\r\n    ^mpich\r\n    ^openmpi\r\n\r\nConcretized\r\n--------------------------------\r\n==> Error: hdf5 ^mpich ^openmpi is unsatisfiable, conflicts are:\r\n  error(\"All dependencies must be reachable from root\")\r\n  error(\"Virtual packages must be satisfied by a unique provider\")\r\n```\r\n\r\nOn an x86_64 system\r\n```\r\n$ spack spec zlib target=power9\r\nInput spec\r\n--------------------------------\r\nzlib arch=darwin-None-power9\r\n\r\nConcretized\r\n--------------------------------\r\n==> Error: zlib arch=darwin-None-power9 is unsatisfiable, conflicts are:\r\n  error(\"Each node must have exactly one compiler\")\r\n  error(\"No satisfying compiler available is compatible with a satisfying target\")\r\n```",
    "user": "becker33",
    "url": "https://api.github.com/repos/spack/spack/issues/26719",
    "updated_at": "2021-11-02 17:55:51",
    "created_at": "2021-10-13 19:16:19",
    "closed_at": "2021-11-02 17:55:51",
    "state": "closed",
    "title": "Improved error messages from clingo",
    "number": 26719,
    "milestone": null,
    "labels": [
        "tests",
        "commands"
    ],
    "id": 1025608957,
    "html_url": "https://github.com/spack/spack/pull/26719",
    "assignees": [
        "tgamblin",
        "tldahlgren"
    ],
    "comments": 1
}