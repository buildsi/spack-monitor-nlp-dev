{
    "body": "\r\n-----\r\n\r\nSome dependencies of the ompss seems to be broken. \r\n\r\n### Expected Result\r\n\r\nompss and dependencies properly installed\r\n\r\n### Actual Result\r\n\r\n`flex@2.6.4` is not compiling, `elfutils` default is `0.163` but it is also broken, the newest one `0.170` is also not compiling.\r\nWhen using this spec `spack install -v ompss ^hwloc@1.11.9^flex@2.6.3^elfutils@0.170`\r\nit fails at `dyninst`.\r\n\r\n### Steps to reproduce the issue\r\n\r\n```console\r\n$ spack install -v ompss ^hwloc@1.11.9^flex@2.6.3^elfutils@0.170\r\n```\r\n\r\n### Information on your system\r\n\r\nThe spack-build.out file:\r\n```console\r\nake: *** [all] Error 2\r\n==> Error: ProcessError: Command exited with status 2:\r\n    'make' '-j4'\r\n\r\n4 errors found in build log:\r\n     671     checking for egrep... /bin/grep -E\r\n     672     checking for ANSI C header files... [ 10%] Building CXX object common/CMakeFiles/common.dir/src/addrtranslate-auxv.C.o\r\n     673     cd /tmp/vgarciap/spack-stage/spack-stage-3wPUwq/dyninst/spack-build/common && /home/vgarciap/spack/lib/spack/env/gcc/g++  -DBOOST_ALL_NO_LIB=1 -DBOOST_MUL\r\n             TI_INDEX_DISABLE_SERIALIZATION -DCOMMON_LIB -DUSE_PARSE_API -DWITHOUT_SYMLITE -DWITH_SYMTAB_API -Darch_64bit -Darch_x86_64 -Dbug_force_terminate_failure -\r\n             Dbug_syscall_changepc_rewind -Dcap_32_64 -Dcap_async_events -Dcap_binary_rewriter -Dcap_dwarf -Dcap_dynamic_heap -Dcap_fixpoint_gen -Dcap_liveness -Dcap_m\r\n             utatee_traps -Dcap_noaddr_gen -Dcap_ptrace -Dcap_registers -Dcap_stack_mods -Dcap_stripped_binaries -Dcap_thread_db -Dcap_threads -Dcap_tramp_liveness -Dc\r\n             ommon_EXPORTS -Dos_linux -Dx86_64_unknown_linux2_4 -I/home/vgarciap/spack/opt/spack/linux-ubuntu18.04-x86_64/gcc-6.4.0/elfutils-0.170-atdb2ax4wranlgrwjmge\r\n             2ucqu6syhqu6/include/libelf -I/home/vgarciap/spack/opt/spack/linux-ubuntu18.04-x86_64/gcc-6.4.0/libdwarf-20160507-lgitxpqq6g4pbwkjjste5mzl4zwrvojg/include\r\n              -I/home/vgarciap/spack/opt/spack/linux-ubuntu18.04-x86_64/gcc-6.4.0/boost-1.67.0-buwihup74cdjkj2di4br37islwvkt6rk/include -I/tmp/vgarciap/spack-stage/spa\r\n             ck-stage-3wPUwq/dyninst/spack-build -I/tmp/vgarciap/spack-stage/spack-stage-3wPUwq/dyninst/spack-build/common/h -I/tmp/vgarciap/spack-stage/spack-stage-3w\r\n             PUwq/dyninst/common/h -I/tmp/vgarciap/spack-stage/spack-stage-3wPUwq/dyninst/dataflowAPI/h -I/tmp/vgarciap/spack-stage/spack-stage-3wPUwq/dyninst/dyninstA\r\n             PI/h -I/tmp/vgarciap/spack-stage/spack-stage-3wPUwq/dyninst/instructionAPI/h -I/tmp/vgarciap/spack-stage/spack-stage-3wPUwq/dyninst/parseAPI/h -I/tmp/vgar\r\n             ciap/spack-stage/spack-stage-3wPUwq/dyninst/patchAPI/h -I/tmp/vgarciap/spack-stage/spack-stage-3wPUwq/dyninst/proccontrol/h -I/tmp/vgarciap/spack-stage/sp\r\n             ack-stage-3wPUwq/dyninst/stackwalk/h -I/tmp/vgarciap/spack-stage/spack-stage-3wPUwq/dyninst/symtabAPI/h -I/tmp/vgarciap/spack-stage/spack-stage-3wPUwq/dyn\r\n             inst/dwarf/h -I/tmp/vgarciap/spack-stage/spack-stage-3wPUwq/dyninst/elf/h -I/tmp/vgarciap/spack-stage/spack-stage-3wPUwq/dyninst/symlite/h -I/tmp/vgarciap\r\n             /spack-stage/spack-stage-3wPUwq/dyninst -I/tmp/vgarciap/spack-stage/spack-stage-3wPUwq/dyninst/external -I/tmp/vgarciap/spack-stage/spack-stage-3wPUwq/dyn\r\n             inst/common/src  -std=c++11  -fvisibility=hidden -fvisibility-inlines-hidden -W -Wall -Wpointer-arith -Wcast-qual -Woverloaded-virtual -Wcast-align -Wno-n\r\n             on-template-friend -Wno-unused-local-typedefs -Wno-deprecated-declarations -O2 -g  -fPIC   -Winvalid-pch -include /tmp/vgarciap/spack-stage/spack-stage-3w\r\n             PUwq/dyninst/spack-build/common/cotire/common_CXX_prefix.hxx -o CMakeFiles/common.dir/src/addrtranslate-auxv.C.o -c /tmp/vgarciap/spack-stage/spack-stage-\r\n             3wPUwq/dyninst/common/src/addrtranslate-auxv.C\r\n     674     yes\r\n     675     checking for sys/types.h... yes\r\n     676     checking for sys/stat.h... yes\r\n  >> 677     checking for stdlib.h... make[2]: *** No rule to make target 'libiberty/libiberty.a', needed by 'common/libcommon.so.9.3.2'.  Stop.\r\n     678     make[2]: *** Waiting for unfinished jobs....\r\n     679     [ 10%] Building CXX object common/CMakeFiles/common.dir/src/addrtranslate-linux.C.o\r\n     680     cd /tmp/vgarciap/spack-stage/spack-stage-3wPUwq/dyninst/spack-build/common && /home/vgarciap/spack/lib/spack/env/gcc/g++  -DBOOST_ALL_NO_LIB=1 -DBOOST_MUL\r\n             TI_INDEX_DISABLE_SERIALIZATION -DCOMMON_LIB -DUSE_PARSE_API -DWITHOUT_SYMLITE -DWITH_SYMTAB_API -Darch_64bit -Darch_x86_64 -Dbug_force_terminate_failure -\r\n             Dbug_syscall_changepc_rewind -Dcap_32_64 -Dcap_async_events -Dcap_binary_rewriter -Dcap_dwarf -Dcap_dynamic_heap -Dcap_fixpoint_gen -Dcap_liveness -Dcap_m\r\n             utatee_traps -Dcap_noaddr_gen -Dcap_ptrace -Dcap_registers -Dcap_stack_mods -Dcap_stripped_binaries -Dcap_thread_db -Dcap_threads -Dcap_tramp_liveness -Dc\r\n             ommon_EXPORTS -Dos_linux -Dx86_64_unknown_linux2_4 -I/home/vgarciap/spack/opt/spack/linux-ubuntu18.04-x86_64/gcc-6.4.0/elfutils-0.170-atdb2ax4wranlgrwjmge\r\n             2ucqu6syhqu6/include/libelf -I/home/vgarciap/spack/opt/spack/linux-ubuntu18.04-x86_64/gcc-6.4.0/libdwarf-20160507-lgitxpqq6g4pbwkjjste5mzl4zwrvojg/include\r\n              -I/home/vgarciap/spack/opt/spack/linux-ubuntu18.04-x86_64/gcc-6.4.0/boost-1.67.0-buwihup74cdjkj2di4br37islwvkt6rk/include -I/tmp/vgarciap/spack-stage/spa\r\n             ck-stage-3wPUwq/dyninst/spack-build -I/tmp/vgarciap/spack-stage/spack-stage-3wPUwq/dyninst/spack-build/common/h -I/tmp/vgarciap/spack-stage/spack-stage-3w\r\n             PUwq/dyninst/common/h -I/tmp/vgarciap/spack-stage/spack-stage-3wPUwq/dyninst/dataflowAPI/h -I/tmp/vgarciap/spack-stage/spack-stage-3wPUwq/dyninst/dyninstA\r\n             PI/h -I/tmp/vgarciap/spack-stage/spack-stage-3wPUwq/dyninst/instructionAPI/h -I/tmp/vgarciap/spack-stage/spack-stage-3wPUwq/dyninst/parseAPI/h -I/tmp/vgar\r\n             ciap/spack-stage/spack-stage-3wPUwq/dyninst/patchAPI/h -I/tmp/vgarciap/spack-stage/spack-stage-3wPUwq/dyninst/proccontrol/h -I/tmp/vgarciap/spack-stage/sp\r\n             ack-stage-3wPUwq/dyninst/stackwalk/h -I/tmp/vgarciap/spack-stage/spack-stage-3wPUwq/dyninst/symtabAPI/h -I/tmp/vgarciap/spack-stage/spack-stage-3wPUwq/dyn\r\n             inst/dwarf/h -I/tmp/vgarciap/spack-stage/spack-stage-3wPUwq/dyninst/elf/h -I/tmp/vgarciap/spack-stage/spack-stage-3wPUwq/dyninst/symlite/h -I/tmp/vgarciap\r\n             /spack-stage/spack-stage-3wPUwq/dyninst -I/tmp/vgarciap/spack-stage/spack-stage-3wPUwq/dyninst/external -I/tmp/vgarciap/spack-stage/spack-stage-3wPUwq/dyn\r\n             inst/common/src  -std=c++11  -fvisibility=hidden -fvisibility-inlines-hidden -W -Wall -Wpointer-arith -Wcast-qual -Woverloaded-virtual -Wcast-align -Wno-n\r\n             on-template-friend -Wno-unused-local-typedefs -Wno-deprecated-declarations -O2 -g  -fPIC   -Winvalid-pch -include /tmp/vgarciap/spack-stage/spack-stage-3w\r\n             PUwq/dyninst/spack-build/common/cotire/common_CXX_prefix.hxx -o CMakeFiles/common.dir/src/addrtranslate-linux.C.o -c /tmp/vgarciap/spack-stage/spack-stage\r\n             -3wPUwq/dyninst/common/src/addrtranslate-linux.C\r\n     681     yes\r\n     682     checking for string.h... yes\r\n     683     checking for memory.h... yes\r\n\r\n     ...\r\n\r\n     1129    /home/vgarciap/spack/opt/spack/linux-ubuntu18.04-x86_64/gcc-6.4.0/cmake-3.11.1-t4737fzp5wmet7empesvopl5moksfchz/bin/cmake -E make_directory /tmp/vgarciap/\r\n             spack-stage/spack-stage-3wPUwq/dyninst/spack-build/CMakeFiles\r\n     1130    /home/vgarciap/spack/opt/spack/linux-ubuntu18.04-x86_64/gcc-6.4.0/cmake-3.11.1-t4737fzp5wmet7empesvopl5moksfchz/bin/cmake -E touch /tmp/vgarciap/spack-sta\r\n             ge/spack-stage-3wPUwq/dyninst/spack-build/CMakeFiles/LibIberty-complete\r\n     1131    /home/vgarciap/spack/opt/spack/linux-ubuntu18.04-x86_64/gcc-6.4.0/cmake-3.11.1-t4737fzp5wmet7empesvopl5moksfchz/bin/cmake -E touch /tmp/vgarciap/spack-sta\r\n             ge/spack-stage-3wPUwq/dyninst/spack-build/binutils/src/LibIberty-stamp/LibIberty-done\r\n     1132    make[2]: Leaving directory '/tmp/vgarciap/spack-stage/spack-stage-3wPUwq/dyninst/spack-build'\r\n     1133    [ 10%] Built target LibIberty\r\n     1134    make[2]: Leaving directory '/tmp/vgarciap/spack-stage/spack-stage-3wPUwq/dyninst/spack-build'\r\n  >> 1135    CMakeFiles/Makefile2:494: recipe for target 'common/CMakeFiles/common.dir/all' failed\r\n  >> 1136    make[1]: *** [common/CMakeFiles/common.dir/all] Error 2\r\n     1137    make[1]: Leaving directory '/tmp/vgarciap/spack-stage/spack-stage-3wPUwq/dyninst/spack-build'\r\n     1138    Makefile:132: recipe for target 'all' failed\r\n  >> 1139    make: *** [all] Error 2\r\n\r\n```\r\n",
    "user": "viniciusvgp",
    "url": "https://api.github.com/repos/spack/spack/issues/7940",
    "updated_at": "2018-04-28 18:54:25",
    "created_at": "2018-04-28 18:43:10",
    "closed_at": "None",
    "state": "open",
    "title": "ompss broken dependencies",
    "number": 7940,
    "milestone": null,
    "labels": [
        "build-error"
    ],
    "id": 318659522,
    "html_url": "https://github.com/spack/spack/issues/7940",
    "assignees": [],
    "comments": 0
}