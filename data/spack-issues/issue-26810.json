{
    "body": "### Steps to reproduce the issue\n\nUsing:\r\n* `spack@develop` (a118e799ae8ae0f4d6063f502606af3a77fdae9a from `Mon Oct 18 23:21:08 2021 +0200`)\r\n* Ubuntu 20.04, GCC 9.3.0\r\n* x86_64 and ppc64le\r\n\r\nConcrete spec: [axom-lgdlj3.spec.yaml.txt](https://github.com/spack/spack/files/7369080/axom-lgdlj3.spec.yaml.txt)\r\n\r\nReproducible using Docker container image `ecpe4s/ubuntu20.04-runner-x86_64:2021-10-01`\r\n\r\n```\r\n$> git clone https://github.com/spack/spack\r\n$> (cd spack && git checkout a118e799ae8ae0f4d6063f502606af3a77fdae9a)\r\n$> . spack/share/spack/setup-env.sh\r\n\r\n\r\n$> spack mirror add E4S https://cache.e4s.io\r\n$> spack buildcache keys -it\r\n==> Fetching https://cache.e4s.io/build_cache/_pgp/25645FA2B218FE55B4EF649E4345F04B40005581.pub\r\ngpg: key 4345F04B40005581: public key \"University of Oregon - E4S\" imported\r\ngpg: Total number processed: 1\r\ngpg:               imported: 1\r\ngpg: inserting ownertrust of 6\r\n\r\n\r\n$> spack install --cache-only --include-build-deps --only dependencies -f ./axom-lgdlj3.spec.yaml\r\n... OK\r\n\r\n\r\n$> spack install --no-cache -f ./axom-lgdlj3.spec.yaml\r\n...\r\n==> Installing axom-0.5.0-up3kn2546w2j5lm24suzepavv36hlfhf\r\n==> Ran patch() for axom\r\n==> axom: Executing phase: 'initconfig'\r\n==> axom: Executing phase: 'cmake'\r\n==> axom: Executing phase: 'build'\r\n==> Error: ProcessError: Command exited with status 2:\r\n    'make' '-j16'\r\n...\r\n     324    In file included from /tmp/root/spack-stage/spack-stage-axom-0.5.0-up3kn2546w2j5lm24suzepavv36hlfhf/spack-src/src/axom/quest/MeshTester.hpp:26,\r\n     325                     from /tmp/root/spack-stage/spack-stage-axom-0.5.0-up3kn2546w2j5lm24suzepavv36hlfhf/spack-src/src/axom/quest/MeshTester.cpp:7:\r\n  >> 326    /tmp/root/spack-stage/spack-stage-axom-0.5.0-up3kn2546w2j5lm24suzepavv36hlfhf/spack-src/src/axom/spin/BVH.hpp:20:4: error: #error *** The spin::BVH class requires RAJA and U\r\n            mpire ***\r\n     327       20 |   #error*** The spin::BVH class requires RAJA and Umpire ***\r\n     328          |    ^~~~~\r\n     329    [ 15%] Building CXX object axom/slam/examples/lulesh2.0.3_orig/CMakeFiles/slam_lulesh_orig_ex.dir/lulesh-init.cc.o\r\n...\r\n  >> 363    /tmp/root/spack-stage/spack-stage-axom-0.5.0-up3kn2546w2j5lm24suzepavv36hlfhf/spack-src/src/axom/quest/MeshTester.hpp:119:3: error: 'umpire' has not been declared\r\n     364      119 |   umpire::ResourceManager& rm = umpire::ResourceManager::getInstance();\r\n     365          |   ^~~~~~\r\n  >> 366    /tmp/root/spack-stage/spack-stage-axom-0.5.0-up3kn2546w2j5lm24suzepavv36hlfhf/spack-src/src/axom/quest/MeshTester.hpp:119:28: error: 'rm' was not declared in this scope; did\r\n             you mean 'tm'?\r\n     367      119 |   umpire::ResourceManager& rm = umpire::ResourceManager::getInstance();\r\n     368          |                            ^~\r\n     369          |                            tm\r\n  >> 370    /tmp/root/spack-stage/spack-stage-axom-0.5.0-up3kn2546w2j5lm24suzepavv36hlfhf/spack-src/src/axom/quest/MeshTester.hpp:119:33: error: 'umpire' has not been declared\r\n     371      119 |   umpire::ResourceManager& rm = umpire::ResourceManager::getInstance();\r\n     372          |                                 ^~~~~~\r\n  >> 373    /tmp/root/spack-stage/spack-stage-axom-0.5.0-up3kn2546w2j5lm24suzepavv36hlfhf/spack-src/src/axom/quest/MeshTester.hpp:122:3: error: 'umpire' has not been declared\r\n     374      122 |   umpire::Allocator allocator =\r\n     375          |   ^~~~~~\r\n  >> 376    /tmp/root/spack-stage/spack-stage-axom-0.5.0-up3kn2546w2j5lm24suzepavv36hlfhf/spack-src/src/axom/quest/MeshTester.hpp:127:3: error: 'umpire' has not been declared\r\n     377      127 |   umpire::Allocator pool_allocator =\r\n     378          |   ^~~~~~\r\n  >> 379    /tmp/root/spack-stage/spack-stage-axom-0.5.0-up3kn2546w2j5lm24suzepavv36hlfhf/spack-src/src/axom/quest/MeshTester.hpp:133:22: error: 'pool_allocator' was not declared in thi\r\n            s scope\r\n     380      133 |   const int poolID = pool_allocator.getId();\r\n     381          |                      ^~~~~~~~~~~~~~\r\n  >> 382    /tmp/root/spack-stage/spack-stage-axom-0.5.0-up3kn2546w2j5lm24suzepavv36hlfhf/spack-src/src/axom/quest/MeshTester.hpp:144:57: error: 'umpire' has not been declared\r\n     383      144 |     axom::allocate<int>(1, getUmpireResourceAllocatorID(umpire::resource::Host));\r\n     384          |                                                         ^~~~~~\r\n  >> 385    /tmp/root/spack-stage/spack-stage-axom-0.5.0-up3kn2546w2j5lm24suzepavv36hlfhf/spack-src/src/axom/quest/MeshTester.hpp:144:28: error: there are no arguments to 'getUmpireReso\r\n            urceAllocatorID' that depend on a template parameter, so a declaration of 'getUmpireResourceAllocatorID' must be available [-fpermissive]\r\n     386      144 |     axom::allocate<int>(1, getUmpireResourceAllocatorID(umpire::resource::Host));\r\n...\r\n```\r\n\r\n@white238 \r\n\n\n### Information on your system\n\n* **Spack:** 0.16.3-4914-a118e799ae\r\n* **Python:** 3.8.10\r\n* **Platform:** linux-ubuntu20.04-cascadelake\r\n* **Concretizer:** clingo\n\n### Additional information\n\nFull build log: [axom-build-out.txt](https://github.com/spack/spack/files/7369066/axom-build-out.txt)\r\n\n\n### General information\n\n- [X] I have run `spack debug report` and reported the version of Spack/Python/Platform\n- [X] I have run `spack maintainers <name-of-the-package>` and **@mentioned** any maintainers\n- [X] I have uploaded the build log and environment files\n- [X] I have searched the issues of this repo and believe this is not a duplicate",
    "user": "eugeneswalker",
    "url": "https://api.github.com/repos/spack/spack/issues/26810",
    "updated_at": "2021-10-19 05:19:08",
    "created_at": "2021-10-18 23:28:29",
    "closed_at": "None",
    "state": "open",
    "title": "axom@0.5.0 build fails: spin::BVH class requires RAJA and Umpire",
    "number": 26810,
    "milestone": null,
    "labels": [
        "build-error",
        "e4s"
    ],
    "id": 1029696041,
    "html_url": "https://github.com/spack/spack/issues/26810",
    "assignees": [],
    "comments": 1
}