{
    "body": "While running spack compiler find on Edison, I came across this error message:\r\n```\r\nProcess Process-11:\r\nTraceback (most recent call last):\r\n  File \"/usr/lib64/python2.6/multiprocessing/process.py\", line 232, in _bootstrap\r\n    self.run()\r\n  File \"/usr/lib64/python2.6/multiprocessing/process.py\", line 88, in run\r\n    self._target(*self._args, **self._kwargs)\r\n  File \"/global/u2/m/mamelara/spack/lib/spack/spack/util/multiproc.py\", line 37, in fun\r\n    pipe.send(f(x))\r\n    pipe.send(f(x))\r\n  File \"/global/u2/m/mamelara/spack/lib/spack/spack/operating_systems/cnl.py\", line 53, in <lambda>\r\n  File \"/global/u2/m/mamelara/spack/lib/spack/spack/operating_systems/cnl.py\", line 53, in <lambda>\r\n    pipe.send(f(x))\r\n  File \"/global/u2/m/mamelara/spack/lib/spack/spack/operating_systems/cnl.py\", line 53, in <lambda>\r\n    lambda cmp_cls: self.find_compiler(cmp_cls, *paths), types)\r\n  File \"/global/u2/m/mamelara/spack/lib/spack/spack/operating_systems/cnl.py\", line 76, in find_compiler\r\n    spack.spec.CompilerSpec(name + '@' + v),\r\n    lambda cmp_cls: self.find_compiler(cmp_cls, *paths), types)\r\n  File \"/global/u2/m/mamelara/spack/lib/spack/spack/spec.py\", line 475, in __init__\r\n  File \"/global/u2/m/mamelara/spack/lib/spack/spack/operating_systems/cnl.py\", line 76, in find_compiler\r\n    spack.spec.CompilerSpec(name + '@' + v),\r\n  File \"/global/u2/m/mamelara/spack/lib/spack/spack/spec.py\", line 475, in __init__\r\n    lambda cmp_cls: self.find_compiler(cmp_cls, *paths), types)\r\n  File \"/global/u2/m/mamelara/spack/lib/spack/spack/operating_systems/cnl.py\", line 76, in find_compiler\r\n    spack.spec.CompilerSpec(name + '@' + v),\r\n  File \"/global/u2/m/mamelara/spack/lib/spack/spack/spec.py\", line 475, in __init__\r\n    c = SpecParser().parse_compiler(arg)\r\n  File \"/global/u2/m/mamelara/spack/lib/spack/spack/spec.py\", line 3032, in parse_compiler\r\n    self.setup(text)\r\n  File \"/global/u2/m/mamelara/spack/lib/spack/spack/parse.py\", line 168, in setup\r\n    c = SpecParser().parse_compiler(arg)\r\n  File \"/global/u2/m/mamelara/spack/lib/spack/spack/spec.py\", line 3032, in parse_compiler\r\n    self.setup(text)\r\n  File \"/global/u2/m/mamelara/spack/lib/spack/spack/parse.py\", line 168, in setup\r\n    c = SpecParser().parse_compiler(arg)\r\n  File \"/global/u2/m/mamelara/spack/lib/spack/spack/spec.py\", line 3032, in parse_compiler\r\n    self.setup(text)\r\n  File \"/global/u2/m/mamelara/spack/lib/spack/spack/parse.py\", line 168, in setup\r\n    self.push_tokens(self.lexer.lex(text))\r\n    self.push_tokens(self.lexer.lex(text))\r\n  File \"/global/u2/m/mamelara/spack/lib/spack/spack/parse.py\", line 103, in lex\r\n  File \"/global/u2/m/mamelara/spack/lib/spack/spack/parse.py\", line 103, in lex\r\n    self.push_tokens(self.lexer.lex(text))\r\n    tokens = self.lex_word(word)\r\n    tokens = self.lex_word(word)\r\n  File \"/global/u2/m/mamelara/spack/lib/spack/spack/parse.py\", line 96, in lex_word\r\n  File \"/global/u2/m/mamelara/spack/lib/spack/spack/parse.py\", line 103, in lex\r\n  File \"/global/u2/m/mamelara/spack/lib/spack/spack/parse.py\", line 96, in lex_word\r\n    raise LexError(\"Invalid character\", word, word.index(remainder))\r\n    raise LexError(\"Invalid character\", word, word.index(remainder))\r\n    tokens = self.lex_word(word)\r\n  File \"/global/u2/m/mamelara/spack/lib/spack/spack/parse.py\", line 96, in lex_word\r\nLexError: Invalid character\r\n    raise LexError(\"Invalid character\", word, word.index(remainder))\r\nLexError: Invalid character\r\nLexError: Invalid character\r\n```\r\n\r\nWas confused  because spack compiler find ran fine on Cori and I haven't had this issue before with Edison.\r\n\r\nDoing some investigating via print statements led me to this:\r\n```bash\r\n# In def setup in class Parser, shlex.split() line\r\nTEXT= gcc@4.7.2\r\n<type 'unicode'>\r\n['g\\x00\\x00\\x00c\\x00\\x00\\x00c\\x00\\x00\\x00@\\x00\\x00\\x004\\x00\\x00\\x00.\\x00\\x00\\x007\\x00\\x00\\x00.\\x00\\x00\\x002\\x00\\x00\\x00']\r\n```\r\nChecked to see whether a different python would be able to handle it and after module loading spack compiler find worked.\r\n\r\nEdison version: 2.6.9\r\nCori version: 2.7.9\r\n\r\nI'm not too familiar with how older (<= 2.6.9) versions of Python handle unicode, or if this is a common problem. It's solved via module loading a more recent python but that shouldn't be necessary. Anyway to fix this with older Python versions?",
    "user": "mamelara",
    "url": "https://api.github.com/repos/spack/spack/issues/4339",
    "updated_at": "2017-08-14 18:23:04",
    "created_at": "2017-05-24 20:27:08",
    "closed_at": "2017-08-14 18:23:04",
    "state": "closed",
    "title": "Unicode Problems with Python 2.6.9?",
    "number": 4339,
    "milestone": null,
    "labels": [
        "python"
    ],
    "id": 231161177,
    "html_url": "https://github.com/spack/spack/issues/4339",
    "assignees": [],
    "comments": 1
}