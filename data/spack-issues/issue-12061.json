{
    "body": "Papyrus builds with openmpi but fails to build with mpich.\r\n\r\nRunning:\r\n\r\n`spack install papyrus^mpich@3.2.1 device=ch3 +hydra netmod=tcp +pci pmi=pmi +romio~slurm~verbs~wrapperrpath`\r\n\r\nFails like:\r\n\r\n```\r\n==> Executing phase: 'build'\r\n==> Error: ProcessError: Command exited with status 2:\r\n    'make' '-j16'\r\n\r\n61 errors found in build log:\r\n     220    /spack/opt/spack/linux-centos7-x86_64/gcc-7.3.0/mpich-3.2.1-cvou3wu\r\n            4yikwet64n2ddhkywl6pnsb4l/bin/mpicxx  -O2 -g -DNDEBUG   CMakeFiles/\r\n            kv.test01_open_close.dir/test01_open_close.c.o  -o kv.test01_open_c\r\n            lose ../../src/libpapyruskv.a\r\n     221    /spack/opt/spack/linux-centos7-x86_64/gcc-7.3.0/mpich-3.2.1-cvou3wu\r\n            4yikwet64n2ddhkywl6pnsb4l/bin/mpicxx  -O2 -g -DNDEBUG   CMakeFiles/\r\n            kv.test05_fence.dir/test05_fence.c.o  -o kv.test05_fence ../../src/\r\n            libpapyruskv.a\r\n     222    /spack/opt/spack/linux-centos7-x86_64/gcc-7.3.0/mpich-3.2.1-cvou3wu\r\n            4yikwet64n2ddhkywl6pnsb4l/bin/mpicxx  -O2 -g -DNDEBUG   CMakeFiles/\r\n            kv.test06_signal.dir/test06_signal.c.o  -o kv.test06_signal ../../s\r\n            rc/libpapyruskv.a\r\n     223    /spack/opt/spack/linux-centos7-x86_64/gcc-7.3.0/mpich-3.2.1-cvou3wu\r\n            4yikwet64n2ddhkywl6pnsb4l/bin/mpicxx  -O2 -g -DNDEBUG   CMakeFiles/\r\n            kv.test12_free.dir/test12_free.c.o  -o kv.test12_free ../../src/lib\r\n            papyruskv.a\r\n     224    [100%] Linking CXX executable kv.test09_cache\r\n     225    cd /tmp/root/spack-stage/spack-stage-4DyLRZ/spack-build/kv/tests/09\r\n            _cache && /spack/opt/spack/linux-centos7-x86_64/gcc-7.3.0/cmake-3.1\r\n            4.5-6semn25gnvvlrj53qk2kxjccdqa5kav2/bin/cmake -E cmake_link_script\r\n             CMakeFiles/kv.test09_cache.dir/link.txt --verbose=1\r\n  >> 226    /usr/bin/ld: ../../src/libpapyruskv.a(Signal.cpp.o): undefined refe\r\n            rence to symbol 'sem_post@@@@GLIBC_2.2.5'\r\n  >> 227    /usr/lib64/libpthread.so.0: error adding symbols: DSO missing from \r\n            command line\r\n  >> 228    collect2: error: ld returned 1 exit status\r\n     229    /spack/opt/spack/linux-centos7-x86_64/gcc-7.3.0/mpich-3.2.1-cvou3wu\r\n            4yikwet64n2ddhkywl6pnsb4l/bin/mpicxx  -O2 -g -DNDEBUG   CMakeFiles/\r\n            kv.test09_cache.dir/test09_cache.c.o  -o kv.test09_cache ../../src/\r\n            libpapyruskv.a\r\n  >> 230    /usr/bin/ld: ../../src/libpapyruskv.a(Signal.cpp.o): undefined refe\r\n            rence to symbol 'sem_post@@@@GLIBC_2.2.5'\r\n  >> 231    /usr/lib64/libpthread.so.0: error adding symbols: DSO missing from \r\n            command line\r\n  >> 232    make[2]: *** [kv/tests/07_consistency/kv.test07_consistency] Error \r\n            1\r\n     233    make[2]: Leaving directory `/tmp/root/spack-stage/spack-stage-4DyLR\r\n            Z/spack-build'\r\n  >> 234    make[1]: *** [kv/tests/07_consistency/CMakeFiles/kv.test07_consiste\r\n            ncy.dir/all] Error 2\r\n     235    make[1]: *** Waiting for unfinished jobs....\r\n  >> 236    collect2: error: ld returned 1 exit status\r\n  >> 237    make[2]: *** [kv/tests/08_protect/kv.test08_protect] Error 1\r\n     238    make[2]: Leaving directory `/tmp/root/spack-stage/spack-stage-4DyLR\r\n            Z/spack-build'\r\n  >> 239    make[1]: *** [kv/tests/08_protect/CMakeFiles/kv.test08_protect.dir/\r\n            all] Error 2\r\n  >> 240    /usr/bin/ld: ../../src/libpapyruskv.a(Signal.cpp.o): undefined refe\r\n            rence to symbol 'sem_post@@@@GLIBC_2.2.5'\r\n  >> 241    /usr/lib64/libpthread.so.0: error adding symbols: DSO missing from \r\n            command line\r\n  >> 242    collect2: error: ld returned 1 exit status\r\n  >> 243    make[2]: *** [kv/tests/10_checkpoint/kv.test10_checkpoint] Error 1\r\n     244    make[2]: Leaving directory `/tmp/root/spack-stage/spack-stage-4DyLR\r\n            Z/spack-build'\r\n  >> 245    make[1]: *** [kv/tests/10_checkpoint/CMakeFiles/kv.test10_checkpoin\r\n            t.dir/all] Error 2\r\n  >> 246    /usr/bin/ld: ../../src/libpapyruskv.a(Signal.cpp.o): undefined refe\r\n            rence to symbol 'sem_post@@@@GLIBC_2.2.5'\r\n  >> 247    /usr/lib64/libpthread.so.0: error adding symbols: DSO missing from \r\n            command line\r\n  >> 248    collect2: error: ld returned 1 exit status\r\n  >> 249    make[2]: *** [kv/tests/04_delete/kv.test04_delete] Error 1\r\n     250    make[2]: Leaving directory `/tmp/root/spack-stage/spack-stage-4DyLR\r\n            Z/spack-build'\r\n  >> 251    make[1]: *** [kv/tests/04_delete/CMakeFiles/kv.test04_delete.dir/al\r\n            l] Error 2\r\n  >> 252    /usr/bin/ld: ../../src/libpapyruskv.a(Signal.cpp.o): undefined refe\r\n            rence to symbol 'sem_post@@@@GLIBC_2.2.5'\r\n  >> 253    /usr/lib64/libpthread.so.0: error adding symbols: DSO missing from \r\n            command line\r\n  >> 254    collect2: error: ld returned 1 exit status\r\n  >> 255    make[2]: *** [kv/tests/05_fence/kv.test05_fence] Error 1\r\n     256    make[2]: Leaving directory `/tmp/root/spack-stage/spack-stage-4DyLR\r\n            Z/spack-build'\r\n  >> 257    make[1]: *** [kv/tests/05_fence/CMakeFiles/kv.test05_fence.dir/all]\r\n             Error 2\r\n  >> 258    /usr/bin/ld: ../../src/libpapyruskv.a(Signal.cpp.o): undefined refe\r\n            rence to symbol 'sem_post@@@@GLIBC_2.2.5'\r\n  >> 259    /usr/lib64/libpthread.so.0: error adding symbols: DSO missing from \r\n            command line\r\n  >> 260    collect2: error: ld returned 1 exit status\r\n  >> 261    make[2]: *** [kv/tests/12_free/kv.test12_free] Error 1\r\n     262    make[2]: Leaving directory `/tmp/root/spack-stage/spack-stage-4DyLR\r\n            Z/spack-build'\r\n  >> 263    make[1]: *** [kv/tests/12_free/CMakeFiles/kv.test12_free.dir/all] E\r\n            rror 2\r\n  >> 264    /usr/bin/ld: ../../src/libpapyruskv.a(Signal.cpp.o): undefined refe\r\n            rence to symbol 'sem_post@@@@GLIBC_2.2.5'\r\n  >> 265    /usr/lib64/libpthread.so.0: error adding symbols: DSO missing from \r\n            command line\r\n  >> 266    collect2: error: ld returned 1 exit status\r\n  >> 267    /usr/bin/ld: ../../src/libpapyruskv.a(Signal.cpp.o): undefined refe\r\n            rence to symbol 'sem_post@@@@GLIBC_2.2.5'\r\n  >> 268    /usr/lib64/libpthread.so.0: error adding symbols: DSO missing from \r\n            command line\r\n  >> 269    collect2: error: ld returned 1 exit status\r\n  >> 270    make[2]: *** [kv/tests/06_signal/kv.test06_signal] Error 1\r\n     271    make[2]: Leaving directory `/tmp/root/spack-stage/spack-stage-4DyLR\r\n            Z/spack-build'\r\n  >> 272    make[1]: *** [kv/tests/06_signal/CMakeFiles/kv.test06_signal.dir/al\r\n            l] Error 2\r\n  >> 273    make[2]: *** [kv/tests/11_restart/kv.test11_restart] Error 1\r\n     274    make[2]: Leaving directory `/tmp/root/spack-stage/spack-stage-4DyLR\r\n            Z/spack-build'\r\n  >> 275    make[1]: *** [kv/tests/11_restart/CMakeFiles/kv.test11_restart.dir/\r\n            all] Error 2\r\n  >> 276    /usr/bin/ld: ../../src/libpapyruskv.a(Signal.cpp.o): undefined refe\r\n            rence to symbol 'sem_post@@@@GLIBC_2.2.5'\r\n  >> 277    /usr/lib64/libpthread.so.0: error adding symbols: DSO missing from \r\n            command line\r\n  >> 278    /usr/collect2: error: ld returned 1 exit status\r\n  >> 279    bin/ld: ../../src/libpapyruskv.a(Signal.cpp.o): undefined reference\r\n             to symbol 'sem_post@@@@GLIBC_2.2.5'\r\n  >> 280    /usr/lib64/libpthread.so.0: error adding symbols: DSO missing from \r\n            command line\r\n  >> 281    collect2: error: ld returned 1 exit status\r\n  >> 282    /usr/bin/ld: ../../src/libpapyruskv.a(Signal.cpp.o): undefined refe\r\n            rence to symbol 'sem_post@@@@GLIBC_2.2.5'\r\n  >> 283    /usr/lib64/libpthread.so.0: error adding symbols: DSO missing from \r\n            command line\r\n  >> 284    collect2: error: ld returned 1 exit status\r\n  >> 285    make[2]: *** [kv/tests/02_put_get/kv.test02_put_get] Error 1\r\n     286    make[2]: Leaving directory `/tmp/root/spack-stage/spack-stage-4DyLR\r\n            Z/spack-build'\r\n  >> 287    make[1]: *** [kv/tests/02_put_get/CMakeFiles/kv.test02_put_get.dir/\r\n            all] Error 2\r\n  >> 288    make[2]: *** [kv/tests/03_barrier/kv.test03_barrier] Error 1\r\n     289    make[2]: Leaving directory `/tmp/root/spack-stage/spack-stage-4DyLR\r\n            Z/spack-build'\r\n  >> 290    make[1]: *** [kv/tests/03_barrier/CMakeFiles/kv.test03_barrier.dir/\r\n            all] Error 2\r\n  >> 291    make[2]: *** [kv/tests/01_open_close/kv.test01_open_close] Error 1\r\n     292    make[2]: Leaving directory `/tmp/root/spack-stage/spack-stage-4DyLR\r\n            Z/spack-build'\r\n  >> 293    make[1]: *** [kv/tests/01_open_close/CMakeFiles/kv.test01_open_clos\r\n            e.dir/all] Error 2\r\n  >> 294    /usr/bin/ld: ../../src/libpapyruskv.a(Signal.cpp.o): undefined refe\r\n            rence to symbol 'sem_post@@@@GLIBC_2.2.5'\r\n  >> 295    /usr/lib64/libpthread.so.0: error adding symbols: DSO missing from \r\n            command line\r\n  >> 296    collect2: error: ld returned 1 exit status\r\n  >> 297    make[2]: *** [kv/tests/09_cache/kv.test09_cache] Error 1\r\n     298    make[2]: Leaving directory `/tmp/root/spack-stage/spack-stage-4DyLR\r\n            Z/spack-build'\r\n  >> 299    make[1]: *** [kv/tests/09_cache/CMakeFiles/kv.test09_cache.dir/all]\r\n             Error 2\r\n     300    make[1]: Leaving directory `/tmp/root/spack-stage/spack-stage-4DyLR\r\n            Z/spack-build'\r\n  >> 301    make: *** [all] Error 2\r\n\r\nSee build log for details:\r\n  /spack/var/spack/stage/papyrus-1.0.0-q4jopulvhuigfhhehxphnmdxotwxianu/spack-build-out.txt\r\n\r\n```",
    "user": "wspear",
    "url": "https://api.github.com/repos/spack/spack/issues/12061",
    "updated_at": "2019-07-20 13:58:35",
    "created_at": "2019-07-18 23:19:32",
    "closed_at": "None",
    "state": "open",
    "title": "Installation issue: papyrus^mpich",
    "number": 12061,
    "milestone": null,
    "labels": [
        "build-error",
        "impact-low"
    ],
    "id": 470039214,
    "html_url": "https://github.com/spack/spack/issues/12061",
    "assignees": [
        "becker33"
    ],
    "comments": 3
}