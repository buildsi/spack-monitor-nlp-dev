{
    "body": "### Steps to reproduce the issue\n\n```console\r\n$ spack spec -l boost cxxstd=17 %intel\r\nInput spec\r\n--------------------------------\r\nboost%intel cxxstd=17\r\n\r\nConcretized\r\n--------------------------------\r\nrwzzf7x  boost@1.78.0%intel@2021.5.0+atomic+chrono~clanglibcpp~container~context~coroutine+date_time~debug+exception~fiber+filesystem+graph~icu+iostreams+locale+log+math~mpi+multithreaded~numpy~pic+program_options~python+random+regex+serialization+shared+signals~singlethreaded+system~taggedlayout+test+thread+timer~versionedlayout+wave cxxstd=17 visibility=hidden arch=linux-fedora35-broadwell\r\n4meisx2      ^bzip2@1.0.8%intel@2021.5.0~debug~pic+shared arch=linux-fedora35-broadwell\r\n4a6y247      ^zlib@1.2.11%intel@2021.5.0+optimize+pic+shared arch=linux-fedora35-broadwell\r\n```\r\n\n\n### Error message\n\n<details><summary>Error message</summary><pre>\r\n==> Installing boost-1.78.0-rwzzf7xc6pnmk6oprr4y6m7njmsrfrfe\r\n==> No binary for boost-1.78.0-rwzzf7xc6pnmk6oprr4y6m7njmsrfrfe found: installing from source\r\n==> Using cached archive: /home/ptb/gitrepos/spack/var/spack/cache/_source-cache/archive/86/8681f175d4bdb26c52222665793eef08490d7758529330f98d3b29dd0735bccc.tar.bz2\r\n==> Ran patch() for boost\r\n==> boost: Executing phase: 'install'\r\n==> Error: ProcessError: Command exited with status 1:\r\n    './bootstrap.sh' '--prefix=/usr/local/spack/opt/spack/linux-fedora35-broadwell/intel-2021.5.0/boost-1.78.0-rwzzf7xc6pnmk6oprr4y6m7njmsrfrfe' '--with-toolset=intel-linux' '--with-libraries=math,filesystem,wave,date_time,thread,chrono,system,locale,random,exception,timer,atomic,program_options,serialization,test,iostreams,graph,log,regex' '--without-icu'\r\n\r\n5 errors found in build log:\r\n     14    InstalledDir: /opt/intel/oneapi/compiler/2022.0.2/linux/bin-llvm\r\n     15    \r\n     16    ###\r\n     17    ###\r\n     18    \r\n     19    > icpx -x c++ -std=c++11 -O3 -s -static -DNDEBUG builtins.cpp class.cpp command.cpp compile.cpp constants.cpp cwd.cpp debug.cpp debugger.cpp\r\n            execcmd.cpp execnt.cpp execunix.cpp filesys.cpp filent.cpp fileunix.cpp frames.cpp function.cpp glob.cpp hash.cpp hcache.cpp hdrmacro.cpp h\r\n           eaders.cpp jam_strings.cpp jam.cpp jamgram.cpp lists.cpp make.cpp make1.cpp md5.cpp mem.cpp modules.cpp native.cpp object.cpp option.cpp out\r\n           put.cpp parse.cpp pathnt.cpp pathsys.cpp pathunix.cpp regexp.cpp rules.cpp scan.cpp search.cpp startup.cpp subst.cpp sysinfo.cpp timestamp.c\r\n           pp variable.cpp w32_getreg.cpp modules/order.cpp modules/path.cpp modules/property-set.cpp modules/regex.cpp modules/sequence.cpp modules/se\r\n           t.cpp -o b2\r\n  >> 20    ld: cannot find -lstdc++\r\n  >> 21    ld: cannot find -lm\r\n  >> 22    ld: cannot find -lc\r\n  >> 23    clang++: error: linker command failed with exit code 1 (use -v to see invocation)\r\n     24    > cp b2 bjam\r\n  >> 25    cp: cannot stat 'b2': No such file or directory\r\n     26    \r\n     27    Failed to build B2 build engine\r\n</pre></details>\r\n\n\n### Information on your system\n\n* **Spack:** 0.17.1-1455-80a6eab2db\r\n* **Python:** 3.10.1\r\n* **Platform:** linux-fedora35-broadwell\r\n* **Concretizer:** clingo\r\n\n\n### Additional information\n\n[spack-build-env.txt](https://github.com/spack/spack/files/8189322/spack-build-env.txt)\r\n[spack-build-out.txt](https://github.com/spack/spack/files/8189324/spack-build-out.txt)\r\n\r\nBoost is using the intel-oneapi compiler `icpx` when it should just be using `icpc`.  My `compilers.yaml`\r\n\r\n```yaml\r\n- compiler:\r\n    spec: intel@2021.5.0\r\n    paths:\r\n      cc: /opt/intel/oneapi/compiler/2022.0.2/linux/bin/intel64/icc\r\n      cxx: /opt/intel/oneapi/compiler/2022.0.2/linux/bin/intel64/icpc\r\n      f77: /opt/intel/oneapi/compiler/2022.0.2/linux/bin/intel64/ifort\r\n      fc: /opt/intel/oneapi/compiler/2022.0.2/linux/bin/intel64/ifort\r\n    flags: {}\r\n    operating_system: fedora35\r\n    target: x86_64\r\n    modules: [oneapi]\r\n    environment: {}\r\n    extra_rpaths: []\r\n- compiler:\r\n    spec: oneapi@2022.0.0\r\n    paths:\r\n      cc: /opt/intel/oneapi/compiler/2022.0.2/linux/bin/icx\r\n      cxx: /opt/intel/oneapi/compiler/2022.0.2/linux/bin/icpx\r\n      f77: /opt/intel/oneapi/compiler/2022.0.2/linux/bin/ifx\r\n      fc: /opt/intel/oneapi/compiler/2022.0.2/linux/bin/ifx\r\n    flags: {}\r\n    operating_system: fedora35\r\n    target: x86_64\r\n    modules: [oneapi]\r\n    environment: {}\r\n    extra_rpaths: []\r\n```\r\n\r\nmaintainer: @hainest \n\n### General information\n\n- [X] I have run `spack debug report` and reported the version of Spack/Python/Platform\n- [X] I have run `spack maintainers <name-of-the-package>` and **@mentioned** any maintainers\n- [X] I have uploaded the build log and environment files\n- [X] I have searched the issues of this repo and believe this is not a duplicate",
    "user": "pbrady",
    "url": "https://api.github.com/repos/spack/spack/issues/29352",
    "updated_at": "2022-03-07 18:14:41",
    "created_at": "2022-03-04 23:53:34",
    "closed_at": "None",
    "state": "open",
    "title": "Installation issue: boost fails with \"classic\" intel",
    "number": 29352,
    "milestone": null,
    "labels": [
        "build-error"
    ],
    "id": 1160141287,
    "html_url": "https://github.com/spack/spack/issues/29352",
    "assignees": [],
    "comments": 2
}