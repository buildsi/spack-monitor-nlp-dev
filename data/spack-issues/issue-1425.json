{
    "body": "Building Perl with a long path breaks in my centos 7 box. The same package succeeded without the long path.\n\n```\n./bin/spack install perl\n==> Installing perl\n==> Trying to fetch from file:///home/vagrant/myveryloooooooooooooooooooooooooooooooooongname/spack/var/spack/cache/perl/perl-5.24.0.tar.gz\n######################################################################## 100.0%\n==> Trying to fetch from file:///home/vagrant/myveryloooooooooooooooooooooooooooooooooongname/spack/var/spack/cache/perl/App-cpanminus-1.7042.tar.gz\n######################################################################## 100.0%\n==> Staging archive: /home/vagrant/myveryloooooooooooooooooooooooooooooooooongname/spack/var/spack/stage/perl-5.24.0-kn4hndjc5ieonorqtgyvc4g5j4e22d42/perl-5.24.0.tar.gz\n==> Created stage in /home/vagrant/myveryloooooooooooooooooooooooooooooooooongname/spack/var/spack/stage/perl-5.24.0-kn4hndjc5ieonorqtgyvc4g5j4e22d42\n==> Staging archive: /home/vagrant/myveryloooooooooooooooooooooooooooooooooongname/spack/var/spack/stage/resource-cpanm-kn4hndjc5ieonorqtgyvc4g5j4e22d42/App-cpanminus-1.7042.tar.gz\n==> Created stage in /home/vagrant/myveryloooooooooooooooooooooooooooooooooongname/spack/var/spack/stage/resource-cpanm-kn4hndjc5ieonorqtgyvc4g5j4e22d42\n==> Moving resource stage\n        source : /home/vagrant/myveryloooooooooooooooooooooooooooooooooongname/spack/var/spack/stage/resource-cpanm-kn4hndjc5ieonorqtgyvc4g5j4e22d42/App-cpanminus-1.7042/\n        destination : /home/vagrant/myveryloooooooooooooooooooooooooooooooooongname/spack/var/spack/stage/perl-5.24.0-kn4hndjc5ieonorqtgyvc4g5j4e22d42/perl-5.24.0/cpanm/cpanm\n==> No patches needed for perl\n==> Building perl\n==> Warning: Module file already exists : skipping creation\nfile : /home/vagrant/myveryloooooooooooooooooooooooooooooooooongname/spack/share/spack/dotkit/linux-centos7-x86_64/perl-5.24.0-gcc-4.8.5-kn4hndj.dk\nspec : perl@5.24.0%gcc@4.8.5+cpanm arch=linux-centos7-x86_64\n==> Warning: Patched overlong shebang in /home/vagrant/myveryloooooooooooooooooooooooooooooooooongname/spack/opt/spack/linux-centos7-x86_64/gcc-4.8.5/perl-5.24.0-kn4hndjc5ieonorqtgyvc4g5j4e22d42/bin/pod2man\n==> Warning: Patched overlong shebang in /home/vagrant/myveryloooooooooooooooooooooooooooooooooongname/spack/opt/spack/linux-centos7-x86_64/gcc-4.8.5/perl-5.24.0-kn4hndjc5ieonorqtgyvc4g5j4e22d42/bin/pod2text\n==> Warning: Patched overlong shebang in /home/vagrant/myveryloooooooooooooooooooooooooooooooooongname/spack/opt/spack/linux-centos7-x86_64/gcc-4.8.5/perl-5.24.0-kn4hndjc5ieonorqtgyvc4g5j4e22d42/bin/pod2usage\n==> Warning: Patched overlong shebang in /home/vagrant/myveryloooooooooooooooooooooooooooooooooongname/spack/opt/spack/linux-centos7-x86_64/gcc-4.8.5/perl-5.24.0-kn4hndjc5ieonorqtgyvc4g5j4e22d42/bin/podchecker\n==> Warning: Patched overlong shebang in /home/vagrant/myveryloooooooooooooooooooooooooooooooooongname/spack/opt/spack/linux-centos7-x86_64/gcc-4.8.5/perl-5.24.0-kn4hndjc5ieonorqtgyvc4g5j4e22d42/bin/podselect\n==> Warning: Patched overlong shebang in /home/vagrant/myveryloooooooooooooooooooooooooooooooooongname/spack/opt/spack/linux-centos7-x86_64/gcc-4.8.5/perl-5.24.0-kn4hndjc5ieonorqtgyvc4g5j4e22d42/bin/c2ph\n==> Warning: Patched overlong shebang in /home/vagrant/myveryloooooooooooooooooooooooooooooooooongname/spack/opt/spack/linux-centos7-x86_64/gcc-4.8.5/perl-5.24.0-kn4hndjc5ieonorqtgyvc4g5j4e22d42/bin/cpan\n==> Warning: Patched overlong shebang in /home/vagrant/myveryloooooooooooooooooooooooooooooooooongname/spack/opt/spack/linux-centos7-x86_64/gcc-4.8.5/perl-5.24.0-kn4hndjc5ieonorqtgyvc4g5j4e22d42/bin/corelist\n==> Warning: Patched overlong shebang in /home/vagrant/myveryloooooooooooooooooooooooooooooooooongname/spack/opt/spack/linux-centos7-x86_64/gcc-4.8.5/perl-5.24.0-kn4hndjc5ieonorqtgyvc4g5j4e22d42/bin/enc2xs\n==> Warning: Patched overlong shebang in /home/vagrant/myveryloooooooooooooooooooooooooooooooooongname/spack/opt/spack/linux-centos7-x86_64/gcc-4.8.5/perl-5.24.0-kn4hndjc5ieonorqtgyvc4g5j4e22d42/bin/encguess\n==> Warning: Patched overlong shebang in /home/vagrant/myveryloooooooooooooooooooooooooooooooooongname/spack/opt/spack/linux-centos7-x86_64/gcc-4.8.5/perl-5.24.0-kn4hndjc5ieonorqtgyvc4g5j4e22d42/bin/h2ph\n==> Warning: Patched overlong shebang in /home/vagrant/myveryloooooooooooooooooooooooooooooooooongname/spack/opt/spack/linux-centos7-x86_64/gcc-4.8.5/perl-5.24.0-kn4hndjc5ieonorqtgyvc4g5j4e22d42/bin/h2xs\n==> Warning: Patched overlong shebang in /home/vagrant/myveryloooooooooooooooooooooooooooooooooongname/spack/opt/spack/linux-centos7-x86_64/gcc-4.8.5/perl-5.24.0-kn4hndjc5ieonorqtgyvc4g5j4e22d42/bin/instmodsh\n==> Warning: Patched overlong shebang in /home/vagrant/myveryloooooooooooooooooooooooooooooooooongname/spack/opt/spack/linux-centos7-x86_64/gcc-4.8.5/perl-5.24.0-kn4hndjc5ieonorqtgyvc4g5j4e22d42/bin/json_pp\n==> Warning: Patched overlong shebang in /home/vagrant/myveryloooooooooooooooooooooooooooooooooongname/spack/opt/spack/linux-centos7-x86_64/gcc-4.8.5/perl-5.24.0-kn4hndjc5ieonorqtgyvc4g5j4e22d42/bin/libnetcfg\n==> Warning: Patched overlong shebang in /home/vagrant/myveryloooooooooooooooooooooooooooooooooongname/spack/opt/spack/linux-centos7-x86_64/gcc-4.8.5/perl-5.24.0-kn4hndjc5ieonorqtgyvc4g5j4e22d42/bin/perlbug\n==> Warning: Patched overlong shebang in /home/vagrant/myveryloooooooooooooooooooooooooooooooooongname/spack/opt/spack/linux-centos7-x86_64/gcc-4.8.5/perl-5.24.0-kn4hndjc5ieonorqtgyvc4g5j4e22d42/bin/perldoc\n==> Warning: Patched overlong shebang in /home/vagrant/myveryloooooooooooooooooooooooooooooooooongname/spack/opt/spack/linux-centos7-x86_64/gcc-4.8.5/perl-5.24.0-kn4hndjc5ieonorqtgyvc4g5j4e22d42/bin/perlivp\n==> Warning: Patched overlong shebang in /home/vagrant/myveryloooooooooooooooooooooooooooooooooongname/spack/opt/spack/linux-centos7-x86_64/gcc-4.8.5/perl-5.24.0-kn4hndjc5ieonorqtgyvc4g5j4e22d42/bin/piconv\n==> Warning: Patched overlong shebang in /home/vagrant/myveryloooooooooooooooooooooooooooooooooongname/spack/opt/spack/linux-centos7-x86_64/gcc-4.8.5/perl-5.24.0-kn4hndjc5ieonorqtgyvc4g5j4e22d42/bin/pl2pm\n==> Warning: Patched overlong shebang in /home/vagrant/myveryloooooooooooooooooooooooooooooooooongname/spack/opt/spack/linux-centos7-x86_64/gcc-4.8.5/perl-5.24.0-kn4hndjc5ieonorqtgyvc4g5j4e22d42/bin/pod2html\n==> Warning: Patched overlong shebang in /home/vagrant/myveryloooooooooooooooooooooooooooooooooongname/spack/opt/spack/linux-centos7-x86_64/gcc-4.8.5/perl-5.24.0-kn4hndjc5ieonorqtgyvc4g5j4e22d42/bin/prove\n==> Warning: Patched overlong shebang in /home/vagrant/myveryloooooooooooooooooooooooooooooooooongname/spack/opt/spack/linux-centos7-x86_64/gcc-4.8.5/perl-5.24.0-kn4hndjc5ieonorqtgyvc4g5j4e22d42/bin/ptar\n==> Warning: Patched overlong shebang in /home/vagrant/myveryloooooooooooooooooooooooooooooooooongname/spack/opt/spack/linux-centos7-x86_64/gcc-4.8.5/perl-5.24.0-kn4hndjc5ieonorqtgyvc4g5j4e22d42/bin/ptardiff\n==> Warning: Patched overlong shebang in /home/vagrant/myveryloooooooooooooooooooooooooooooooooongname/spack/opt/spack/linux-centos7-x86_64/gcc-4.8.5/perl-5.24.0-kn4hndjc5ieonorqtgyvc4g5j4e22d42/bin/ptargrep\n==> Warning: Patched overlong shebang in /home/vagrant/myveryloooooooooooooooooooooooooooooooooongname/spack/opt/spack/linux-centos7-x86_64/gcc-4.8.5/perl-5.24.0-kn4hndjc5ieonorqtgyvc4g5j4e22d42/bin/shasum\n==> Warning: Patched overlong shebang in /home/vagrant/myveryloooooooooooooooooooooooooooooooooongname/spack/opt/spack/linux-centos7-x86_64/gcc-4.8.5/perl-5.24.0-kn4hndjc5ieonorqtgyvc4g5j4e22d42/bin/splain\n==> Warning: Patched overlong shebang in /home/vagrant/myveryloooooooooooooooooooooooooooooooooongname/spack/opt/spack/linux-centos7-x86_64/gcc-4.8.5/perl-5.24.0-kn4hndjc5ieonorqtgyvc4g5j4e22d42/bin/xsubpp\n==> Warning: Patched overlong shebang in /home/vagrant/myveryloooooooooooooooooooooooooooooooooongname/spack/opt/spack/linux-centos7-x86_64/gcc-4.8.5/perl-5.24.0-kn4hndjc5ieonorqtgyvc4g5j4e22d42/bin/zipdetails\nTraceback (most recent call last):\n  File \"/home/vagrant/myveryloooooooooooooooooooooooooooooooooongname/spack/lib/spack/spack/build_environment.py\", line 512, in fork\n    function()\n  File \"/home/vagrant/myveryloooooooooooooooooooooooooooooooooongname/spack/lib/spack/spack/package.py\", line 1028, in build_process\n    spack.hooks.post_install(self)\n  File \"/home/vagrant/myveryloooooooooooooooooooooooooooooooooongname/spack/lib/spack/spack/hooks/__init__.py\", line 69, in __call__\n    hook(pkg)\n  File \"/home/vagrant/myveryloooooooooooooooooooooooooooooooooongname/spack/lib/spack/spack/hooks/sbang.py\", line 97, in post_install\n    filter_shebangs_in_directory(pkg.prefix.bin)\n  File \"/home/vagrant/myveryloooooooooooooooooooooooooooooooooongname/spack/lib/spack/spack/hooks/sbang.py\", line 88, in filter_shebangs_in_directory\n    filter_shebang(path)\n  File \"/home/vagrant/myveryloooooooooooooooooooooooooooooooooongname/spack/lib/spack/spack/hooks/sbang.py\", line 65, in filter_shebang\n    with open(path, 'w') as new_file:\nIOError: [Errno 13] Permission denied: '/home/vagrant/myveryloooooooooooooooooooooooooooooooooongname/spack/opt/spack/linux-centos7-x86_64/gcc-4.8.5/perl-5.24.0-kn4hndjc5ieonorqtgyvc4g5j4e22d42/bin/cpanm'\n==> Error: Installation process had nonzero exit code : 256\n```\n\n```\n./bin/spack install perl\n==> Installing perl\n==> Trying to fetch from file:///home/vagrant/spack/var/spack/cache/perl/perl-5.24.0.tar.gz\n######################################################################## 100.0%\n==> Trying to fetch from file:///home/vagrant/spack/var/spack/cache/perl/App-cpanminus-1.7042.tar.gz\n######################################################################## 100.0%\n==> Staging archive: /home/vagrant/spack/var/spack/stage/perl-5.24.0-kn4hndjc5ieonorqtgyvc4g5j4e22d42/perl-5.24.0.tar.gz\n==> Created stage in /home/vagrant/spack/var/spack/stage/perl-5.24.0-kn4hndjc5ieonorqtgyvc4g5j4e22d42\n==> Staging archive: /home/vagrant/spack/var/spack/stage/resource-cpanm-kn4hndjc5ieonorqtgyvc4g5j4e22d42/App-cpanminus-1.7042.tar.gz\n==> Created stage in /home/vagrant/spack/var/spack/stage/resource-cpanm-kn4hndjc5ieonorqtgyvc4g5j4e22d42\n==> Moving resource stage\n        source : /home/vagrant/spack/var/spack/stage/resource-cpanm-kn4hndjc5ieonorqtgyvc4g5j4e22d42/App-cpanminus-1.7042/\n        destination : /home/vagrant/spack/var/spack/stage/perl-5.24.0-kn4hndjc5ieonorqtgyvc4g5j4e22d42/perl-5.24.0/cpanm/cpanm\n==> No patches needed for perl\n==> Building perl\n==> Warning: Module file already exists : skipping creation\nfile : /home/vagrant/spack/share/spack/dotkit/linux-centos7-x86_64/perl-5.24.0-gcc-4.8.5-kn4hndj.dk\nspec : perl@5.24.0%gcc@4.8.5+cpanm arch=linux-centos7-x86_64\n==> Successfully installed perl\n  Fetch: 0.28s.  Build: 2m 16.89s.  Total: 2m 17.18s.\n[+] /home/vagrant/spack/opt/spack/linux-centos7-x86_64/gcc-4.8.5/perl-5.24.0-kn4hndjc5ieonorqtgyvc4g5j4e22d42\n```\n",
    "user": "sknigh",
    "url": "https://api.github.com/repos/spack/spack/issues/1425",
    "updated_at": "2016-08-04 17:46:46",
    "created_at": "2016-08-02 19:58:12",
    "closed_at": "2016-08-04 17:46:46",
    "state": "closed",
    "title": "Patch shebang error from perl module",
    "number": 1425,
    "milestone": null,
    "labels": [],
    "id": 168974247,
    "html_url": "https://github.com/spack/spack/issues/1425",
    "assignees": [],
    "comments": 2
}