{
    "body": "### Steps to reproduce the issue\n\n@arjun-raj-kuppala  @srekolam\r\n\r\nSame issue as with `rocm-validation-suite`. The build process now tries to download from Github which is not possible. All requirements should be downloadable via `spack fetch -D roctracer-dev`  so that the source code can than be synchronized to the build host.\r\n\r\n```console\r\n$ cat /localscratch/rocm-4.2.0.yaml\r\nspack:\r\n  concretization: separately\r\n  packages:\r\n    all:\r\n      compiler: [gcc@10.3.0]\r\n  specs:\r\n  - matrix:\r\n    - ['%gcc@10.3.0^cmake@3.17.5']\r\n    - [atmi@4.2.0, comgr@4.2.0, hip@4.2.0, hipblas@4.2.0, hipcub@4.2.0, hipfft@4.2.0,\r\n      hipfort@4.2.0, hipify-clang@4.2.0, hip-rocclr@4.2.0, hipsparse@4.2.0, hsakmt-roct@4.2.0,\r\n      hsa-rocr-dev@4.2.0, llvm-amdgpu@4.2.0, migraphx@4.2.0, miopengemm@4.2.0, miopen-hip@4.2.0,\r\n      miopen-opencl@4.2.0, mivisionx@4.2.0, rccl@4.2.0, rdc@4.2.0, rocalution@4.2.0,\r\n      rocblas@4.2.0, rocfft@4.2.0, rocm-bandwidth-test@4.2.0, rocm-clang-ocl@4.2.0,\r\n      rocm-cmake@4.2.0, rocm-dbgapi@4.2.0, rocm-debug-agent@4.2.0, rocm-gdb@4.2.0,\r\n      rocminfo@4.2.0, rocm-opencl@4.2.0, rocm-openmp-extras@4.2.0, rocm-smi-lib@4.2.0,\r\n      rocm-tensile@4.2.0, rocm-validation-suite@4.2.0, rocprim@4.2.0, rocprofiler-dev@4.2.0,\r\n      rocrand@4.2.0, rocsolver@4.2.0, rocsparse@4.2.0, rocthrust@4.2.0, roctracer-dev@4.2.0] # rocm-device-libs@4.2.0,\r\n  view: true\r\n\r\n$ spack env create -d /localscratch/2021-09-10_rocm-4.2.0 /localscratch/rocm-4.2.0.yaml\r\n\r\n$ spack env activate /localscratch/2021-09-10_rocm-4.2.0/\r\n\r\n$ spack install -j1 \r\n[\u2026]\r\n==> Installing roctracer-dev-4.2.0-dlirpv6wjndqhwqjfj57rvv2c4hcjtev\r\n==> No binary for roctracer-dev-4.2.0-dlirpv6wjndqhwqjfj57rvv2c4hcjtev found: installing from source\r\n==> Warning: Suspicious requests to set or unset 'HIP_PATH' found\r\n==> Warning:             at /sw/vulcan-CentOS7/hlrs/non-spack/misc/spack.2021-06-16/spack.develop/var/spack/repos/builtin/packages/hip/package.py:160\r\n==> Warning:    --->     at /sw/vulcan-CentOS7/hlrs/non-spack/misc/spack.2021-06-16/spack.develop/var/spack/repos/builtin/packages/roctracer-dev/package.py:49\r\n==> Using cached archive: /localscratch/tmp/spack/hpcoft30/src/_source-cache/archive/62/62a9c0cb1ba50b1c39a0636c886ac86e75a1a71cbf5fec05801517ceb0e67a37.tar.g\r\nz\r\n==> Ran patch() for roctracer-dev\r\n==> roctracer-dev: Executing phase: 'cmake'\r\n==> Error: ProcessError: Command exited with status 1:\r\n    'cmake' '-G' 'Unix Makefiles' '-DCMAKE_INSTALL_PREFIX:STRING=/opt/hlrs/spack/2021-09-10/roctracer-dev/4.2.0-gcc-10.3.0-dlirpv6w' '-DCMAKE_BUILD_TYPE:STRIN\r\nG=RelWithDebInfo' '-DCMAKE_INTERPROCEDURAL_OPTIMIZATION:BOOL=OFF' '-DCMAKE_VERBOSE_MAKEFILE:BOOL=ON' '-DCMAKE_INSTALL_RPATH_USE_LINK_PATH:BOOL=OFF' '-DCMAKE_I\r\nNSTALL_RPATH:STRING=/opt/hlrs/spack/2021-09-10/roctracer-dev/4.2.0-gcc-10.3.0-dlirpv6w/lib;/opt/hlrs/spack/2021-09-10/roctracer-dev/4.2.0-gcc-10.3.0-dlirpv6w/\r\nlib64;/opt/hlrs/spack/2021-09-10/hip/4.2.0-gcc-10.3.0-fz7qvh7m/lib;/opt/hlrs/spack/2021-09-10/comgr/4.2.0-gcc-10.3.0-k4slei3f/lib;/opt/hlrs/spack/2021-09-10/l\r\nlvm-amdgpu/4.2.0-gcc-10.3.0-gd5y4s3r/lib;/opt/hlrs/spack/2021-09-10/hwloc/2.5.0-gcc-10.3.0-lrxlqjfz/lib;/opt/hlrs/spack/2021-09-10/libpciaccess/0.16-gcc-10.3.\r\n0-gzeovr36/lib;/opt/hlrs/spack/2021-09-10/libxml2/2.9.12-gcc-10.3.0-stpvs3fw/lib;/opt/hlrs/spack/2021-09-10/libiconv/1.16-gcc-10.3.0-t26sr4qc/lib;/opt/hlrs/sp\r\nack/2021-09-10/xz/5.2.5-gcc-10.3.0-svfivipc/lib;/opt/hlrs/spack/2021-09-10/zlib/1.2.11-gcc-10.3.0-rr6h6ceo/lib;/opt/hlrs/spack/2021-09-10/ncurses/6.2-gcc-10.3\r\n.0-y4qh5ak6/lib;/opt/hlrs/spack/2021-09-10/libelf/0.8.13-gcc-10.3.0-tprjgpc5/lib;/opt/hlrs/spack/2021-09-10/z3/4.8.9-gcc-10.3.0-ipgnraxd/lib;/opt/hlrs/spack/2\r\n021-09-10/hip-rocclr/4.2.0-gcc-10.3.0-j66uitpp/lib;/opt/hlrs/spack/2021-09-10/hsa-rocr-dev/4.2.0-gcc-10.3.0-2aa7c5wi/lib;/opt/hlrs/spack/2021-09-10/numactl/2.\r\n0.14-gcc-10.3.0-q3sdjg56/lib;/opt/hlrs/spack/2021-09-10/mesa18/18.3.6-gcc-10.3.0-p24uxxtx/lib;/opt/hlrs/spack/2021-09-10/expat/2.4.1-gcc-10.3.0-nw77pf6k/lib;/\r\nopt/hlrs/spack/2021-09-10/libbsd/0.11.3-gcc-10.3.0-w5d76zwu/lib;/opt/hlrs/spack/2021-09-10/libmd/1.0.3-gcc-10.3.0-vyneuk52/lib;/opt/hlrs/spack/2021-09-10/glpr\r\noto/1.4.17-gcc-10.3.0-3oqf77eu/lib;/opt/hlrs/spack/2021-09-10/libx11/1.7.0-gcc-10.3.0-pnki4pym/lib;/opt/hlrs/spack/2021-09-10/inputproto/2.3.2-gcc-10.3.0-ruzk\r\ni35o/lib;/opt/hlrs/spack/2021-09-10/kbproto/1.0.7-gcc-10.3.0-ohq3u5z2/lib;/opt/hlrs/spack/2021-09-10/libxcb/1.14-gcc-10.3.0-6xchzkb2/lib;/opt/hlrs/spack/2021-\r\n09-10/libpthread-stubs/0.4-gcc-10.3.0-hyeyz3gf/lib;/opt/hlrs/spack/2021-09-10/libxau/1.0.8-gcc-10.3.0-jpig2rxt/lib;/opt/hlrs/spack/2021-09-10/xproto/7.0.31-gc\r\nc-10.3.0-wqnjrvmv/lib;/opt/hlrs/spack/2021-09-10/libxdmcp/1.1.2-gcc-10.3.0-iwsgxpq7/lib;/opt/hlrs/spack/2021-09-10/xcb-proto/1.14.1-gcc-10.3.0-yobzcdy3/lib;/o\r\npt/hlrs/spack/2021-09-10/xextproto/7.3.0-gcc-10.3.0-j6ixrfy3/lib;/opt/hlrs/spack/2021-09-10/libxext/1.3.3-gcc-10.3.0-2ph5zjan/lib;/opt/hlrs/spack/2021-09-10/r\r\nocprofiler-dev/4.2.0-gcc-10.3.0-m6mm2733/lib;/opt/hlrs/spack/2021-09-10/comgr/4.2.0-gcc-10.3.0-k4slei3f/lib64;/opt/hlrs/spack/2021-09-10/z3/4.8.9-gcc-10.3.0-i\r\npgnraxd/lib64;/opt/hlrs/spack/2021-09-10/hsakmt-roct/4.2.0-gcc-10.3.0-3edftvyl/lib64' '-DCMAKE_PREFIX_PATH:STRING=/opt/hlrs/spack/2021-09-10/rocprofiler-dev/4\r\n.2.0-gcc-10.3.0-m6mm2733;/opt/hlrs/spack/2021-09-10/py-cppheaderparser/2.7.4-gcc-10.3.0-igzcxlzf;/opt/hlrs/spack/2021-09-10/hip/4.2.0-gcc-10.3.0-fz7qvh7m;/opt\r\n/hlrs/spack/2021-09-10/roctracer-dev-api/4.2.0-gcc-10.3.0-wradt55q;/opt/hlrs/spack/2021-09-10/rocminfo/4.2.0-gcc-10.3.0-ewjtlnof;/opt/hlrs/spack/2021-09-10/hi\r\np-rocclr/4.2.0-gcc-10.3.0-j66uitpp;/opt/hlrs/spack/2021-09-10/mesa18/18.3.6-gcc-10.3.0-p24uxxtx;/opt/hlrs/spack/2021-09-10/libxext/1.3.3-gcc-10.3.0-2ph5zjan;/\r\nopt/hlrs/spack/2021-09-10/libx11/1.7.0-gcc-10.3.0-pnki4pym;/opt/hlrs/spack/2021-09-10/xtrans/1.3.5-gcc-10.3.0-nkiuieye;/opt/hlrs/spack/2021-09-10/xextproto/7.\r\n3.0-gcc-10.3.0-j6ixrfy3;/opt/hlrs/spack/2021-09-10/libxcb/1.14-gcc-10.3.0-6xchzkb2;/opt/hlrs/spack/2021-09-10/xcb-proto/1.14.1-gcc-10.3.0-yobzcdy3;/opt/hlrs/s\r\npack/2021-09-10/libxdmcp/1.1.2-gcc-10.3.0-iwsgxpq7;/opt/hlrs/spack/2021-09-10/libxau/1.0.8-gcc-10.3.0-jpig2rxt;/opt/hlrs/spack/2021-09-10/xproto/7.0.31-gcc-10\r\n.3.0-wqnjrvmv;/opt/hlrs/spack/2021-09-10/libpthread-stubs/0.4-gcc-10.3.0-hyeyz3gf;/opt/hlrs/spack/2021-09-10/kbproto/1.0.7-gcc-10.3.0-ohq3u5z2;/opt/hlrs/spack\r\n/2021-09-10/inputproto/2.3.2-gcc-10.3.0-ruzki35o;/opt/hlrs/spack/2021-09-10/glproto/1.4.17-gcc-10.3.0-3oqf77eu;/opt/hlrs/spack/2021-09-10/hsa-rocr-dev/4.2.0-g\r\ncc-10.3.0-2aa7c5wi;/opt/hlrs/spack/2021-09-10/hsakmt-roct/4.2.0-gcc-10.3.0-3edftvyl;/opt/hlrs/spack/2021-09-10/numactl/2.0.14-gcc-10.3.0-q3sdjg56;/opt/hlrs/sp\r\nack/2021-09-10/comgr/4.2.0-gcc-10.3.0-k4slei3f;/opt/hlrs/spack/2021-09-10/llvm-amdgpu/4.2.0-gcc-10.3.0-gd5y4s3r;/opt/hlrs/spack/2021-09-10/z3/4.8.9-gcc-10.3.0\r\n-ipgnraxd;/opt/hlrs/spack/2021-09-10/python/3.8.11-gcc-10.3.0-ytuishzc;/opt/hlrs/spack/2021-09-10/expat/2.4.1-gcc-10.3.0-nw77pf6k;/opt/hlrs/spack/2021-09-10/l\r\nibbsd/0.11.3-gcc-10.3.0-w5d76zwu;/opt/hlrs/spack/2021-09-10/libmd/1.0.3-gcc-10.3.0-vyneuk52;/opt/hlrs/spack/2021-09-10/libelf/0.8.13-gcc-10.3.0-tprjgpc5;/opt/\r\nhlrs/spack/2021-09-10/hwloc/2.5.0-gcc-10.3.0-lrxlqjfz;/opt/hlrs/spack/2021-09-10/libxml2/2.9.12-gcc-10.3.0-stpvs3fw;/opt/hlrs/spack/2021-09-10/xz/5.2.5-gcc-10\r\n.3.0-svfivipc;/opt/hlrs/spack/2021-09-10/libpciaccess/0.16-gcc-10.3.0-gzeovr36;/opt/hlrs/spack/2021-09-10/cmake/3.17.5-gcc-10.3.0-sawlky57;/opt/hlrs/spack/202\r\n1-09-10/zlib/1.2.11-gcc-10.3.0-rr6h6ceo;/opt/hlrs/spack/2021-09-10/libiconv/1.16-gcc-10.3.0-t26sr4qc;/opt/hlrs/spack/2021-09-10/ncurses/6.2-gcc-10.3.0-y4qh5ak\r\n6' '-DHIP_VDI=1' '-DCMAKE_MODULE_PATH=/localscratch/tmp/spack/hpcoft30/build/spack-stage-roctracer-dev-4.2.0-dlirpv6wjndqhwqjfj57rvv2c4hcjtev/spack-src/cmake_\r\nmodules' '-DHSA_RUNTIME_HSA_INC_PATH=/opt/hlrs/spack/2021-09-10/hsa-rocr-dev/4.2.0-gcc-10.3.0-2aa7c5wi/include' '/localscratch/tmp/spack/hpcoft30/build/spack-\r\nstage-roctracer-dev-4.2.0-dlirpv6wjndqhwqjfj57rvv2c4hcjtev/spack-src'\r\n\r\n1 error found in build log:\r\n     105    + ln -s /localscratch/tmp/spack/hpcoft30/build/spack-stage-roctracer-dev-4.2.0-dlirpv6wjndqhwqjfj57rvv2c4hcjtev/spack-src/../rocprofiler/src/core\r\n            /activity.h /localscratch/tmp/spack/hpcoft30/build/spack-stage-roctracer-dev-4.2.0-dlirpv6wjndqhwqjfj57rvv2c4hcjtev/spack-build-dlirpv6/inc/rocpr\r\n            ofiler/activity.h\r\n     106    + '[' '!' -e /localscratch/tmp/spack/hpcoft30/build/spack-stage-roctracer-dev-4.2.0-dlirpv6wjndqhwqjfj57rvv2c4hcjtev/spack-src/test/hsa ']'\r\n     107    + git clone https://github.com/ROCmSoftwarePlatform/hsa-class.git /localscratch/tmp/spack/hpcoft30/build/spack-stage-roctracer-dev-4.2.0-dlirpv6w\r\n            jndqhwqjfj57rvv2c4hcjtev/spack-src/test/hsa\r\n     108    Cloning into '/localscratch/tmp/spack/hpcoft30/build/spack-stage-roctracer-dev-4.2.0-dlirpv6wjndqhwqjfj57rvv2c4hcjtev/spack-src/test/hsa'...\r\n     109    fatal: unable to access 'https://github.com/ROCmSoftwarePlatform/hsa-class.git/': Failed connect to github.com:443; Connection timed out\r\n     110    + '[' -e /localscratch/tmp/spack/hpcoft30/build/spack-stage-roctracer-dev-4.2.0-dlirpv6wjndqhwqjfj57rvv2c4hcjtev/spack-src/test/hsa ']'\r\n  >> 111    CMake Error at test/CMakeLists.txt:77 (add_subdirectory):\r\n     112      add_subdirectory given source\r\n     113      \"/localscratch/tmp/spack/hpcoft30/build/spack-stage-roctracer-dev-4.2.0-dlirpv6wjndqhwqjfj57rvv2c4hcjtev/spack-src/test/hsa/test\"\r\n     114      which is not an existing directory.\r\n     115    \r\n     116    \r\n     117    + cp /localscratch/tmp/spack/hpcoft30/build/spack-stage-roctracer-dev-4.2.0-dlirpv6wjndqhwqjfj57rvv2c4hcjtev/spack-src/test/run.sh /localscratch/\r\n            tmp/spack/hpcoft30/build/spack-stage-roctracer-dev-4.2.0-dlirpv6wjndqhwqjfj57rvv2c4hcjtev/spack-build-dlirpv6\r\n\r\nSee build log for details:\r\n  /localscratch/tmp/spack/hpcoft30/build/spack-stage-roctracer-dev-4.2.0-dlirpv6wjndqhwqjfj57rvv2c4hcjtev/spack-build-out.txt\r\n```\n\n### Information on your system\n\n```\r\n$ spack debug report\r\n* **Spack:** 0.16.2-4210-b12f383\r\n* **Python:** 3.6.8\r\n* **Platform:** linux-centos7-zen2\r\n* **Concretizer:** original\r\n```\n\n### Additional information\n\n[spack-build-out.txt](https://github.com/spack/spack/files/7161360/spack-build-out.txt)\r\n[spack-build-env.txt](https://github.com/spack/spack/files/7161388/spack-build-env.txt)\r\n\n\n### General information\n\n- [X] I have run `spack debug report` and reported the version of Spack/Python/Platform\n- [X] I have run `spack maintainers <name-of-the-package>` and **@mentioned** any maintainers\n- [X] I have uploaded the build log and environment files\n- [X] I have searched the issues of this repo and believe this is not a duplicate",
    "user": "UweSauter",
    "url": "https://api.github.com/repos/spack/spack/issues/25936",
    "updated_at": "2021-10-11 21:26:51",
    "created_at": "2021-09-14 11:18:10",
    "closed_at": "None",
    "state": "open",
    "title": "Installation issue: roctracer-dev-4.2.0 tries to download from Github",
    "number": 25936,
    "milestone": null,
    "labels": [
        "build-error"
    ],
    "id": 995897904,
    "html_url": "https://github.com/spack/spack/issues/25936",
    "assignees": [
        "srekolam"
    ],
    "comments": 0
}