{
    "body": "This PR fixes that the mayavi application (calling `mayavi2`) fails with [1] because vtk is not discoverable by pkg_resources. Unfortunately the application still does not start for me, but I will open an issue for that.\r\n\r\n[1]:\r\n```\r\n$ mayavi2\r\nTraceback (most recent call last):\r\n  File \"$spack/opt/spack/linux-fedora32-haswell/gcc-11.2.0/py-mayavi-4.7.3-mdifgrxqjires35i2u4qtny4danabk3n/bin/mayavi2\", line 34, in <module>\r\n    sys.exit(load_entry_point('mayavi==4.7.3', 'gui_scripts', 'mayavi2')())\r\n  File \"$spack/opt/spack/linux-fedora32-haswell/gcc-11.2.0/py-mayavi-4.7.3-mdifgrxqjires35i2u4qtny4danabk3n/bin/mayavi2\", line 26, in importlib_load_entry_point\r\n    return next(matches).load()\r\n  File \"$spack/opt/spack/linux-fedora32-haswell/gcc-11.2.0/python-3.8.12-ki22qjbudhz5hudrexeghc3xvjehgbhr/lib/python3.8/importlib/metadata.py\", line 77, in load\r\n    module = import_module(match.group('module'))\r\n  File \"$spack/opt/spack/linux-fedora32-haswell/gcc-11.2.0/python-3.8.12-ki22qjbudhz5hudrexeghc3xvjehgbhr/lib/python3.8/importlib/__init__.py\", line 127, in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\n  File \"<frozen importlib._bootstrap>\", line 1014, in _gcd_import\r\n  File \"<frozen importlib._bootstrap>\", line 991, in _find_and_load\r\n  File \"<frozen importlib._bootstrap>\", line 975, in _find_and_load_unlocked\r\n  File \"<frozen importlib._bootstrap>\", line 671, in _load_unlocked\r\n  File \"<frozen importlib._bootstrap_external>\", line 843, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n  File \"$spack/opt/spack/linux-fedora32-haswell/gcc-11.2.0/py-mayavi-4.7.3-mdifgrxqjires35i2u4qtny4danabk3n/lib/python3.8/site-packages/mayavi/scripts/mayavi2.py\", line 464, in <module>\r\n    from mayavi.plugins.app import Mayavi, setup_logger\r\n  File \"$spack/opt/spack/linux-fedora32-haswell/gcc-11.2.0/py-mayavi-4.7.3-mdifgrxqjires35i2u4qtny4danabk3n/lib/python3.8/site-packages/mayavi/plugins/app.py\", line 19, in <module>\r\n    from .mayavi_workbench_application import MayaviWorkbenchApplication\r\n  File \"$spack/opt/spack/linux-fedora32-haswell/gcc-11.2.0/py-mayavi-4.7.3-mdifgrxqjires35i2u4qtny4danabk3n/lib/python3.8/site-packages/mayavi/plugins/mayavi_workbench_application.py\", line 13, in <module>\r\n    from envisage.ui.workbench.api import WorkbenchApplication\r\n  File \"$spack/opt/spack/linux-fedora32-haswell/gcc-11.2.0/py-envisage-6.0.1-erndgoonl6w4w3xpdwzulibj657m6ph4/lib/python3.8/site-packages/envisage/ui/workbench/api.py\", line 13, in <module>\r\n    from .workbench import Workbench\r\n  File \"$spack/opt/spack/linux-fedora32-haswell/gcc-11.2.0/py-envisage-6.0.1-erndgoonl6w4w3xpdwzulibj657m6ph4/lib/python3.8/site-packages/envisage/ui/workbench/workbench.py\", line 16, in <module>\r\n    from envisage.api import IApplication\r\n  File \"$spack/opt/spack/linux-fedora32-haswell/gcc-11.2.0/py-envisage-6.0.1-erndgoonl6w4w3xpdwzulibj657m6ph4/lib/python3.8/site-packages/envisage/api.py\", line 70, in <module>\r\n    from .egg_plugin_manager import EggPluginManager\r\n  File \"$spack/opt/spack/linux-fedora32-haswell/gcc-11.2.0/py-envisage-6.0.1-erndgoonl6w4w3xpdwzulibj657m6ph4/lib/python3.8/site-packages/envisage/egg_plugin_manager.py\", line 18, in <module>\r\n    import pkg_resources\r\n  File \"$spack/opt/spack/linux-fedora32-haswell/gcc-11.2.0/py-setuptools-58.2.0-hjgczo5aalred6ycf54d53q4fwfdhhaq/lib/python3.8/site-packages/pkg_resources/__init__.py\", line 3243, in <module>\r\n    def _initialize_master_working_set():\r\n  File \"$spack/opt/spack/linux-fedora32-haswell/gcc-11.2.0/py-setuptools-58.2.0-hjgczo5aalred6ycf54d53q4fwfdhhaq/lib/python3.8/site-packages/pkg_resources/__init__.py\", line 3226, in _call_aside\r\n    f(*args, **kwargs)\r\n  File \"$spack/opt/spack/linux-fedora32-haswell/gcc-11.2.0/py-setuptools-58.2.0-hjgczo5aalred6ycf54d53q4fwfdhhaq/lib/python3.8/site-packages/pkg_resources/__init__.py\", line 3255, in _initialize_master_working_set\r\n    working_set = WorkingSet._build_master()\r\n  File \"$spack/opt/spack/linux-fedora32-haswell/gcc-11.2.0/py-setuptools-58.2.0-hjgczo5aalred6ycf54d53q4fwfdhhaq/lib/python3.8/site-packages/pkg_resources/__init__.py\", line 568, in _build_master\r\n    ws.require(__requires__)\r\n  File \"$spack/opt/spack/linux-fedora32-haswell/gcc-11.2.0/py-setuptools-58.2.0-hjgczo5aalred6ycf54d53q4fwfdhhaq/lib/python3.8/site-packages/pkg_resources/__init__.py\", line 886, in require\r\n    needed = self.resolve(parse_requirements(requirements))\r\n  File \"$spack/opt/spack/linux-fedora32-haswell/gcc-11.2.0/py-setuptools-58.2.0-hjgczo5aalred6ycf54d53q4fwfdhhaq/lib/python3.8/site-packages/pkg_resources/__init__.py\", line 772, in resolve\r\n    raise DistributionNotFound(req, requirers)\r\npkg_resources.DistributionNotFound: The 'vtk' distribution was not found and is required by mayavi\r\n```",
    "user": "manuelakuhn",
    "url": "https://api.github.com/repos/spack/spack/issues/27626",
    "updated_at": "2021-11-25 17:11:58",
    "created_at": "2021-11-24 10:49:46",
    "closed_at": "None",
    "state": "open",
    "title": "py-mayavi: fix vtk not discoverable",
    "number": 27626,
    "milestone": null,
    "labels": [
        "python",
        "update-package"
    ],
    "id": 1062272991,
    "html_url": "https://github.com/spack/spack/pull/27626",
    "assignees": [
        "scheibelp",
        "adamjstewart"
    ],
    "comments": 3
}